!function(e){function t(e,t,n){return 4===arguments.length?r.apply(this,arguments):void i(e,{declarative:!0,deps:t,declare:n})}function r(e,t,r,n){i(e,{declarative:!1,deps:t,executingRequire:r,execute:n})}function i(e,t){t.name=e,e in v||(v[e]=t),t.normalizedDeps=t.deps}function n(e,t){if(t[e.groupIndex]=t[e.groupIndex]||[],-1==M.call(t[e.groupIndex],e)){t[e.groupIndex].push(e);for(var r=0,i=e.normalizedDeps.length;i>r;r++){var a=e.normalizedDeps[r],o=v[a];if(o&&!o.evaluated){var s=e.groupIndex+(o.declarative!=e.declarative);if(void 0===o.groupIndex||o.groupIndex<s){if(void 0!==o.groupIndex&&(t[o.groupIndex].splice(M.call(t[o.groupIndex],o),1),0==t[o.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");o.groupIndex=s}n(o,t)}}}}function a(e){var t=v[e];t.groupIndex=0;var r=[];n(t,r);for(var i=!!t.declarative==r.length%2,a=r.length-1;a>=0;a--){for(var o=r[a],u=0;u<o.length;u++){var f=o[u];i?s(f):c(f)}i=!i}}function o(e){return w[e]||(w[e]={name:e,dependencies:[],exports:{},importers:[]})}function s(t){if(!t.module){var r=t.module=o(t.name),i=t.module.exports,n=t.declare.call(e,function(e,t){if(r.locked=!0,"object"==typeof e)for(var n in e)i[n]=e[n];else i[e]=t;for(var a=0,o=r.importers.length;o>a;a++){var s=r.importers[a];if(!s.locked)for(var u=0;u<s.dependencies.length;++u)s.dependencies[u]===r&&s.setters[u](i)}return r.locked=!1,t},{id:t.name});r.setters=n.setters,r.execute=n.execute;for(var a=0,u=t.normalizedDeps.length;u>a;a++){var c,f=t.normalizedDeps[a],l=v[f],d=w[f];d?c=d.exports:l&&!l.declarative?c=l.esModule:l?(s(l),d=l.module,c=d.exports):c=h(f),d&&d.importers?(d.importers.push(r),r.dependencies.push(d)):r.dependencies.push(null),r.setters[a]&&r.setters[a](c)}}}function u(e){var t,r=v[e];if(r)r.declarative?d(e,[]):r.evaluated||c(r),t=r.module.exports;else if(t=h(e),!t)throw new Error("Unable to load dependency "+e+".");return(!r||r.declarative)&&t&&t.__useDefault?t["default"]:t}function c(t){if(!t.module){var r={},i=t.module={exports:r,id:t.name};if(!t.executingRequire)for(var n=0,a=t.normalizedDeps.length;a>n;n++){var o=t.normalizedDeps[n],s=v[o];s&&c(s)}t.evaluated=!0;var l=t.execute.call(e,function(e){for(var r=0,i=t.deps.length;i>r;r++)if(t.deps[r]==e)return u(t.normalizedDeps[r]);throw new TypeError("Module "+e+" not declared as a dependency.")},r,i);void 0!==typeof l&&(i.exports=l),r=i.exports,r&&r.__esModule?t.esModule=r:t.esModule=f(r)}}function f(t){var r={};if(("object"==typeof t||"function"==typeof t)&&t!==e)if(p)for(var i in t)"default"!==i&&l(r,t,i);else{var n=t&&t.hasOwnProperty;for(var i in t)"default"===i||n&&!t.hasOwnProperty(i)||(r[i]=t[i])}return r["default"]=t,g(r,"__useDefault",{value:!0}),r}function l(e,t,r){try{var i;(i=Object.getOwnPropertyDescriptor(t,r))&&g(e,r,i)}catch(i){return e[r]=t[r],!1}}function d(t,r){var i=v[t];if(i&&!i.evaluated&&i.declarative){r.push(t);for(var n=0,a=i.normalizedDeps.length;a>n;n++){var o=i.normalizedDeps[n];-1==M.call(r,o)&&(v[o]?d(o,r):h(o))}i.evaluated||(i.evaluated=!0,i.module.execute.call(e))}}function h(e){if(A[e])return A[e];if("@node/"==e.substr(0,6))return A[e]=f(y(e.substr(6)));var t=v[e];if(!t)throw"Module "+e+" not present.";return a(e),d(e,[]),v[e]=void 0,t.declarative&&g(t.module.exports,"__esModule",{value:!0}),A[e]=t.declarative?t.module.exports:t.esModule}var v={},M=Array.prototype.indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]===e)return t;return-1},p=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(e){p=!1}var g;!function(){try{Object.defineProperty({},"a",{})&&(g=Object.defineProperty)}catch(e){g=function(e,t,r){try{e[t]=r.value||r.get.call(e)}catch(e){}}}}();var w={},y="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,A={"@empty":{}};return function(e,i,n,a){return function(o){o(function(o){for(var s={_nodeRequire:y,register:t,registerDynamic:r,get:h,set:function(e,t){A[e]=t},newModule:function(e){return e}},u=0;u<i.length;u++)(function(e,t){t&&t.__esModule?A[e]=t:A[e]=f(t)})(i[u],arguments[u]);a(s);var c=h(e[0]);if(e.length>1)for(var u=1;u<e.length;u++)h(e[u]);return n?c["default"]:c})}}}("undefined"!=typeof self?self:global)(["1"],[],false,function(e){var t=this.require,r=this.exports,i=this.module;!function(t){function r(e,t){e=e.replace(s,"");var r=e.match(f),i=(r[1].split(",")[t]||"require").replace(l,""),n=d[i]||(d[i]=new RegExp(u+i+c,"g"));n.lastIndex=0;for(var a,o=[];a=n.exec(e);)o.push(a[2]||a[3]);return o}function i(e,t,r,n){if("object"==typeof e&&!(e instanceof Array))return i.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof e&&"function"==typeof t&&(e=[e]),!(e instanceof Array)){if("string"==typeof e){var o=a.get(e);return o.__useDefault?o["default"]:o}throw new TypeError("Invalid require")}for(var s=[],u=0;u<e.length;u++)s.push(a["import"](e[u],n));Promise.all(s).then(function(e){t&&t.apply(null,e)},r)}function n(e,n,s){"string"!=typeof e&&(s=n,n=e,e=null),n instanceof Array||(s=n,n=["require","exports","module"].splice(0,s.length)),"function"!=typeof s&&(s=function(e){return function(){return e}}(s)),void 0===n[n.length-1]&&n.pop();var u,c,f;-1!=(u=o.call(n,"require"))&&(n.splice(u,1),e||(n=n.concat(r(s.toString(),u)))),-1!=(c=o.call(n,"exports"))&&n.splice(c,1),-1!=(f=o.call(n,"module"))&&n.splice(f,1);var l={name:e,deps:n,execute:function(e,r,o){for(var l=[],d=0;d<n.length;d++)l.push(e(n[d]));o.uri=o.id,o.config=function(){},-1!=f&&l.splice(f,0,o),-1!=c&&l.splice(c,0,r),-1!=u&&l.splice(u,0,function(t,r,n){return"string"==typeof t&&"function"!=typeof r?e(t):i.call(a,t,r,n,o.id)});var h=s.apply(-1==c?t:r,l);return"undefined"==typeof h&&o&&(h=o.exports),"undefined"!=typeof h?h:void 0}};if(e)h.anonDefine||h.isBundle?h.anonDefine&&h.anonDefine.name&&(h.anonDefine=null):h.anonDefine=l,h.isBundle=!0,a.registerDynamic(l.name,l.deps,!1,l.execute);else{if(h.anonDefine&&!h.anonDefine.name)throw new Error("Multiple anonymous defines in module "+e);h.anonDefine=l}}var a=e,o=Array.prototype.indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]===e)return t;return-1},s=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,u="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",c="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",f=/\(([^\)]*)\)/,l=/^\s+|\s+$/g,d={};n.amd={};var h={isBundle:!1,anonDefine:null};a.amdDefine=n,a.amdRequire=i}("undefined"!=typeof self?self:global);e.registerDynamic("2",[],true,function(e,t,r){var i,n=this||self,a=n;(function t(r,i,n){function a(s,u){if(!i[s]){if(!r[s]){var c=typeof e=="function"&&e;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var l=i[s]={exports:{}};r[s][0].call(l.exports,function(e){var t=r[s][1][e];return a(t?t:e)},l,l.exports,t,r,i,n)}return i[s].exports}var o=typeof e=="function"&&e;for(var s=0;s<n.length;s++)a(n[s]);return a})({1:[function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty;var n=Object.prototype.propertyIsEnumerable;function a(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function o(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(i.join("")!=="0123456789"){return false}var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e});if(Object.keys(Object.assign({},n)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}t.exports=o()?Object.assign:function(e,t){var r;var o=a(e);var s;for(var u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r){if(i.call(r,c)){o[c]=r[c]}}if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var f=0;f<s.length;f++){if(n.call(r,s[f])){o[s[f]]=r[s[f]]}}}}return o}},{}],2:[function(e,t,r){var i=e("./util.js");var n=e("./wakelock.js");var a=1e3;var o=false;var s=[0,0,.5,1];var u=[.5,0,.5,1];function c(){this.leftProjectionMatrix=new Float32Array(16);this.leftViewMatrix=new Float32Array(16);this.rightProjectionMatrix=new Float32Array(16);this.rightViewMatrix=new Float32Array(16);this.pose=null}function f(){this.isPolyfilled=true;this.displayId=a++;this.displayName="webvr-polyfill displayName";this.depthNear=.01;this.depthFar=1e4;this.isConnected=true;this.isPresenting=false;this.capabilities={hasPosition:false,hasOrientation:false,hasExternalDisplay:false,canPresent:false,maxLayers:1};this.stageParameters=null;this.waitingForPresent_=false;this.layer_=null;this.fullscreenElement_=null;this.fullscreenWrapper_=null;this.fullscreenElementCachedStyle_=null;this.fullscreenEventTarget_=null;this.fullscreenChangeHandler_=null;this.fullscreenErrorHandler_=null;this.wakelock_=new n}f.prototype.getFrameData=function(e){return i.frameDataFromPose(e,this.getPose(),this)};f.prototype.getPose=function(){return this.getImmediatePose()};f.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)};f.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)};f.prototype.wrapForFullscreen=function(e){if(i.isIOS()){return e}if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";");this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e){return this.fullscreenWrapper_}this.removeFullscreenWrapper();this.fullscreenElement_=e;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_);r.removeChild(this.fullscreenElement_);this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild);this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;function a(){if(!n.fullscreenElement_){return}var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}a();return this.fullscreenWrapper_};f.prototype.removeFullscreenWrapper=function(){if(!this.fullscreenElement_){return}var e=this.fullscreenElement_;if(this.fullscreenElementCachedStyle_){e.setAttribute("style",this.fullscreenElementCachedStyle_)}else{e.removeAttribute("style")}this.fullscreenElement_=null;this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;this.fullscreenWrapper_.removeChild(e);t.insertBefore(e,this.fullscreenWrapper_);t.removeChild(this.fullscreenWrapper_);return e};f.prototype.requestPresent=function(e){var t=this.isPresenting;var r=this;if(!(e instanceof Array)){if(!o){console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers.");o=true}e=[e]}return new Promise(function(n,a){if(!r.capabilities.canPresent){a(new Error("VRDisplay is not capable of presenting."));return}if(e.length==0||e.length>r.capabilities.maxLayers){a(new Error("Invalid number of layers."));return}var o=e[0];if(!o.source){n();return}var c=o.leftBounds||s;var f=o.rightBounds||u;if(t){var l=false;var d=r.layer_;if(d.source!==o.source){d.source=o.source;l=true}for(var h=0;h<4;h++){if(d.leftBounds[h]!==c[h]){d.leftBounds[h]=c[h];l=true}if(d.rightBounds[h]!==f[h]){d.rightBounds[h]=f[h];l=true}}if(l){r.fireVRDisplayPresentChange_()}n();return}r.layer_={predistorted:o.predistorted,source:o.source,leftBounds:c.slice(0),rightBounds:f.slice(0)};r.waitingForPresent_=false;if(r.layer_&&r.layer_.source){var v=r.wrapForFullscreen(r.layer_.source);function M(){var e=i.getFullscreenElement();r.isPresenting=v===e;if(r.isPresenting){if(screen.orientation&&screen.orientation.lock){screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)})}r.waitingForPresent_=false;r.beginPresent_();n()}else{if(screen.orientation&&screen.orientation.unlock){screen.orientation.unlock()}r.removeFullscreenWrapper();r.wakelock_.release();r.endPresent_();r.removeFullscreenListeners_()}r.fireVRDisplayPresentChange_()}function p(){if(!r.waitingForPresent_){return}r.removeFullscreenWrapper();r.removeFullscreenListeners_();r.wakelock_.release();r.waitingForPresent_=false;r.isPresenting=false;a(new Error("Unable to present."))}r.addFullscreenListeners_(v,M,p);if(i.requestFullscreen(v)){r.wakelock_.request();r.waitingForPresent_=true}else if(i.isIOS()){r.wakelock_.request();r.isPresenting=true;r.beginPresent_();r.fireVRDisplayPresentChange_();n()}}if(!r.waitingForPresent_&&!i.isIOS()){i.exitFullscreen();a(new Error("Unable to present."))}})};f.prototype.exitPresent=function(){var e=this.isPresenting;var t=this;this.isPresenting=false;this.layer_=null;this.wakelock_.release();return new Promise(function(r,n){if(e){if(!i.exitFullscreen()&&i.isIOS()){t.endPresent_();t.fireVRDisplayPresentChange_()}r()}else{n(new Error("Was not presenting to VRDisplay."))}})};f.prototype.getLayers=function(){if(this.layer_){return[this.layer_]}return[]};f.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{vrdisplay:this}});window.dispatchEvent(e)};f.prototype.addFullscreenListeners_=function(e,t,r){this.removeFullscreenListeners_();this.fullscreenEventTarget_=e;this.fullscreenChangeHandler_=t;this.fullscreenErrorHandler_=r;if(t){if(document.fullscreenEnabled){e.addEventListener("fullscreenchange",t,false)}else if(document.webkitFullscreenEnabled){e.addEventListener("webkitfullscreenchange",t,false)}else if(document.mozFullScreenEnabled){document.addEventListener("mozfullscreenchange",t,false)}else if(document.msFullscreenEnabled){e.addEventListener("msfullscreenchange",t,false)}}if(r){if(document.fullscreenEnabled){e.addEventListener("fullscreenerror",r,false)}else if(document.webkitFullscreenEnabled){e.addEventListener("webkitfullscreenerror",r,false)}else if(document.mozFullScreenEnabled){document.addEventListener("mozfullscreenerror",r,false)}else if(document.msFullscreenEnabled){e.addEventListener("msfullscreenerror",r,false)}}};f.prototype.removeFullscreenListeners_=function(){if(!this.fullscreenEventTarget_)return;var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,false);e.removeEventListener("webkitfullscreenchange",t,false);document.removeEventListener("mozfullscreenchange",t,false);e.removeEventListener("msfullscreenchange",t,false)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,false);e.removeEventListener("webkitfullscreenerror",r,false);document.removeEventListener("mozfullscreenerror",r,false);e.removeEventListener("msfullscreenerror",r,false)}this.fullscreenEventTarget_=null;this.fullscreenChangeHandler_=null;this.fullscreenErrorHandler_=null};f.prototype.beginPresent_=function(){};f.prototype.endPresent_=function(){};f.prototype.submitFrame=function(e){};f.prototype.getEyeParameters=function(e){return null};function l(){this.isPolyfilled=true;this.hardwareUnitId="webvr-polyfill hardwareUnitId";this.deviceId="webvr-polyfill deviceId";this.deviceName="webvr-polyfill deviceName"}function d(){}d.prototype=new l;function h(){}h.prototype=new l;t.exports.VRFrameData=c;t.exports.VRDisplay=f;t.exports.VRDevice=l;t.exports.HMDVRDevice=d;t.exports.PositionSensorVRDevice=h},{"./util.js":22,"./wakelock.js":24}],3:[function(e,t,r){var i=e("./cardboard-ui.js");var n=e("./util.js");var a=e("./deps/wglu-preserve-state.js");var o=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n");var s=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function u(e){this.gl=e;this.ctxAttribs=e.getContextAttributes();this.meshWidth=20;this.meshHeight=20;this.bufferScale=WebVRConfig.BUFFER_SCALE;this.bufferWidth=e.drawingBufferWidth;this.bufferHeight=e.drawingBufferHeight;this.realBindFramebuffer=e.bindFramebuffer;this.realEnable=e.enable;this.realDisable=e.disable;this.realColorMask=e.colorMask;this.realClearColor=e.clearColor;this.realViewport=e.viewport;if(!n.isIOS()){this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width");this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")}this.isPatched=false;this.lastBoundFramebuffer=null;this.cullFace=false;this.depthTest=false;this.blend=false;this.scissorTest=false;this.stencilTest=false;this.viewport=[0,0,0,0];this.colorMask=[true,true,true,true];this.clearColor=[0,0,0,0];this.attribs={position:0,texCoord:1};this.program=n.linkProgram(e,o,s,this.attribs);this.uniforms=n.getProgramUniforms(e,this.program);this.viewportOffsetScale=new Float32Array(8);this.setTextureBounds();this.vertexBuffer=e.createBuffer();this.indexBuffer=e.createBuffer();this.indexCount=0;this.renderTarget=e.createTexture();this.framebuffer=e.createFramebuffer();this.depthStencilBuffer=null;this.depthBuffer=null;this.stencilBuffer=null;if(this.ctxAttribs.depth&&this.ctxAttribs.stencil){this.depthStencilBuffer=e.createRenderbuffer()}else if(this.ctxAttribs.depth){this.depthBuffer=e.createRenderbuffer()}else if(this.ctxAttribs.stencil){this.stencilBuffer=e.createRenderbuffer()}this.patch();this.onResize();if(!WebVRConfig.CARDBOARD_UI_DISABLED){this.cardboardUI=new i(e)}}u.prototype.destroy=function(){var e=this.gl;this.unpatch();e.deleteProgram(this.program);e.deleteBuffer(this.vertexBuffer);e.deleteBuffer(this.indexBuffer);e.deleteTexture(this.renderTarget);e.deleteFramebuffer(this.framebuffer);if(this.depthStencilBuffer){e.deleteRenderbuffer(this.depthStencilBuffer)}if(this.depthBuffer){e.deleteRenderbuffer(this.depthBuffer)}if(this.stencilBuffer){e.deleteRenderbuffer(this.stencilBuffer)}if(this.cardboardUI){this.cardboardUI.destroy()}};u.prototype.onResize=function(){var e=this.gl;var t=this;var r=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];a(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null);if(t.scissorTest){t.realDisable.call(e,e.SCISSOR_TEST)}t.realColorMask.call(e,true,true,true,true);t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight);t.realClearColor.call(e,0,0,0,1);e.clear(e.COLOR_BUFFER_BIT);t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer);e.bindTexture(e.TEXTURE_2D,t.renderTarget);e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0);if(t.ctxAttribs.depth&&t.ctxAttribs.stencil){e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)}else if(t.ctxAttribs.depth){e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)}else if(t.ctxAttribs.stencil){e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer);e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)}if(!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){console.error("Framebuffer incomplete!")}t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer);if(t.scissorTest){t.realEnable.call(e,e.SCISSOR_TEST)}t.realColorMask.apply(e,t.colorMask);t.realViewport.apply(e,t.viewport);t.realClearColor.apply(e,t.clearColor)});if(this.cardboardUI){this.cardboardUI.onResize()}};u.prototype.patch=function(){if(this.isPatched){return}var e=this;var t=this.gl.canvas;var r=this.gl;if(!n.isIOS()){t.width=n.getScreenWidth()*this.bufferScale;t.height=n.getScreenHeight()*this.bufferScale;Object.defineProperty(t,"width",{configurable:true,enumerable:true,get:function(){return e.bufferWidth},set:function(t){e.bufferWidth=t;e.onResize()}});Object.defineProperty(t,"height",{configurable:true,enumerable:true,get:function(){return e.bufferHeight},set:function(t){e.bufferHeight=t;e.onResize()}})}this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING);if(this.lastBoundFramebuffer==null){this.lastBoundFramebuffer=this.framebuffer;this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)}this.gl.bindFramebuffer=function(t,i){e.lastBoundFramebuffer=i?i:e.framebuffer;e.realBindFramebuffer.call(r,t,e.lastBoundFramebuffer)};this.cullFace=r.getParameter(r.CULL_FACE);this.depthTest=r.getParameter(r.DEPTH_TEST);this.blend=r.getParameter(r.BLEND);this.scissorTest=r.getParameter(r.SCISSOR_TEST);this.stencilTest=r.getParameter(r.STENCIL_TEST);r.enable=function(t){switch(t){case r.CULL_FACE:e.cullFace=true;break;case r.DEPTH_TEST:e.depthTest=true;break;case r.BLEND:e.blend=true;break;case r.SCISSOR_TEST:e.scissorTest=true;break;case r.STENCIL_TEST:e.stencilTest=true;break}e.realEnable.call(r,t)};r.disable=function(t){switch(t){case r.CULL_FACE:e.cullFace=false;break;case r.DEPTH_TEST:e.depthTest=false;break;case r.BLEND:e.blend=false;break;case r.SCISSOR_TEST:e.scissorTest=false;break;case r.STENCIL_TEST:e.stencilTest=false;break}e.realDisable.call(r,t)};this.colorMask=r.getParameter(r.COLOR_WRITEMASK);r.colorMask=function(t,i,n,a){e.colorMask[0]=t;e.colorMask[1]=i;e.colorMask[2]=n;e.colorMask[3]=a;e.realColorMask.call(r,t,i,n,a)};this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE);r.clearColor=function(t,i,n,a){e.clearColor[0]=t;e.clearColor[1]=i;e.clearColor[2]=n;e.clearColor[3]=a;e.realClearColor.call(r,t,i,n,a)};this.viewport=r.getParameter(r.VIEWPORT);r.viewport=function(t,i,n,a){e.viewport[0]=t;e.viewport[1]=i;e.viewport[2]=n;e.viewport[3]=a;e.realViewport.call(r,t,i,n,a)};this.isPatched=true;n.safariCssSizeWorkaround(t)};u.prototype.unpatch=function(){if(!this.isPatched){return}var e=this.gl;var t=this.gl.canvas;if(!n.isIOS()){Object.defineProperty(t,"width",this.realCanvasWidth);Object.defineProperty(t,"height",this.realCanvasHeight)}t.width=this.bufferWidth;t.height=this.bufferHeight;e.bindFramebuffer=this.realBindFramebuffer;e.enable=this.realEnable;e.disable=this.realDisable;e.colorMask=this.realColorMask;e.clearColor=this.realClearColor;e.viewport=this.realViewport;if(this.lastBoundFramebuffer==this.framebuffer){e.bindFramebuffer(e.FRAMEBUFFER,null)}this.isPatched=false;setTimeout(function(){n.safariCssSizeWorkaround(t)},1)};u.prototype.setTextureBounds=function(e,t){if(!e){e=[0,0,.5,1]}if(!t){t=[.5,0,.5,1]}this.viewportOffsetScale[0]=e[0];this.viewportOffsetScale[1]=e[1];this.viewportOffsetScale[2]=e[2];this.viewportOffsetScale[3]=e[3];this.viewportOffsetScale[4]=t[0];this.viewportOffsetScale[5]=t[1];this.viewportOffsetScale[6]=t[2];this.viewportOffsetScale[7]=t[3]};u.prototype.submitFrame=function(){var e=this.gl;var t=this;var r=[];if(!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS){r.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0)}a(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null);if(t.cullFace){t.realDisable.call(e,e.CULL_FACE)}if(t.depthTest){t.realDisable.call(e,e.DEPTH_TEST)}if(t.blend){t.realDisable.call(e,e.BLEND)}if(t.scissorTest){t.realDisable.call(e,e.SCISSOR_TEST)}if(t.stencilTest){t.realDisable.call(e,e.STENCIL_TEST)}t.realColorMask.call(e,true,true,true,true);t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight);if(t.ctxAttribs.alpha||n.isIOS()){t.realClearColor.call(e,0,0,0,1);e.clear(e.COLOR_BUFFER_BIT)}e.useProgram(t.program);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer);e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);e.enableVertexAttribArray(t.attribs.position);e.enableVertexAttribArray(t.attribs.texCoord);e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,false,20,0);e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,false,20,8);e.activeTexture(e.TEXTURE0);e.uniform1i(t.uniforms.diffuse,0);e.bindTexture(e.TEXTURE_2D,t.renderTarget);e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale);e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0);if(t.cardboardUI){t.cardboardUI.renderNoState()}t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer);if(!t.ctxAttribs.preserveDrawingBuffer){t.realClearColor.call(e,0,0,0,0);e.clear(e.COLOR_BUFFER_BIT)}if(!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer)}if(t.cullFace){t.realEnable.call(e,e.CULL_FACE)}if(t.depthTest){t.realEnable.call(e,e.DEPTH_TEST)}if(t.blend){t.realEnable.call(e,e.BLEND)}if(t.scissorTest){t.realEnable.call(e,e.SCISSOR_TEST)}if(t.stencilTest){t.realEnable.call(e,e.STENCIL_TEST)}t.realColorMask.apply(e,t.colorMask);t.realViewport.apply(e,t.viewport);if(t.ctxAttribs.alpha||!t.ctxAttribs.preserveDrawingBuffer){t.realClearColor.apply(e,t.clearColor)}});if(n.isIOS()){var i=e.canvas;if(i.width!=t.bufferWidth||i.height!=t.bufferHeight){t.bufferWidth=i.width;t.bufferHeight=i.height;t.onResize()}}};u.prototype.updateDeviceInfo=function(e){var t=this.gl;var r=this;var i=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];a(t,i,function(t){var i=r.computeMeshVertices_(r.meshWidth,r.meshHeight,e);t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer);t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW);if(!r.indexCount){var n=r.computeMeshIndices_(r.meshWidth,r.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer);t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW);r.indexCount=n.length}})};u.prototype.computeMeshVertices_=function(e,t,r){var i=new Float32Array(2*e*t*5);var a=r.getLeftEyeVisibleTanAngles();var o=r.getLeftEyeNoLensTanAngles();var s=r.getLeftEyeVisibleScreenRect(o);var u=0;var c=0;for(var f=0;f<2;f++){for(var l=0;l<t;l++){for(var d=0;d<e;d++,u++){var h=d/(e-1);var v=l/(t-1);var M=h;var p=v;var g=n.lerp(a[0],a[2],h);var w=n.lerp(a[3],a[1],v);var y=Math.sqrt(g*g+w*w);var A=r.distortion.distortInverse(y);var m=g*A/y;var D=w*A/y;h=(m-o[0])/(o[2]-o[0]);v=(D-o[3])/(o[1]-o[3]);var N=r.device.widthMeters/r.device.heightMeters;h=(s.x+h*s.width-.5)*2;v=(s.y+v*s.height-.5)*2;i[u*5+0]=h;i[u*5+1]=v;i[u*5+2]=M;i[u*5+3]=p;i[u*5+4]=f}}var E=a[2]-a[0];a[0]=-(E+a[0]);a[2]=E-a[2];E=o[2]-o[0];o[0]=-(E+o[0]);o[2]=E-o[2];s.x=1-(s.x+s.width)}return i};u.prototype.computeMeshIndices_=function(e,t){var r=new Uint16Array(2*(e-1)*(t-1)*6);var i=e/2;var n=t/2;var a=0;var o=0;for(var s=0;s<2;s++){for(var u=0;u<t;u++){for(var c=0;c<e;c++,a++){if(c==0||u==0)continue;if(c<=i==u<=n){r[o++]=a;r[o++]=a-e-1;r[o++]=a-e;r[o++]=a-e-1;r[o++]=a;r[o++]=a-1}else{r[o++]=a-1;r[o++]=a-e;r[o++]=a;r[o++]=a-e;r[o++]=a-1;r[o++]=a-e-1}}}}return r};u.prototype.getOwnPropertyDescriptor_=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);if(r.get===undefined||r.set===undefined){r.configurable=true;r.enumerable=true;r.get=function(){return this.getAttribute(t)};r.set=function(e){this.setAttribute(t,e)}}return r};t.exports=u},{"./cardboard-ui.js":4,"./deps/wglu-preserve-state.js":6,"./util.js":22}],4:[function(e,t,r){var i=e("./util.js");var n=e("./deps/wglu-preserve-state.js");var a=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n");var o=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n");var s=Math.PI/180;var u=60;var c=12;var f=20;var l=1;var d=.75;var h=.3125;var v=4;var M=28;var p=1.5;var g=[0,c,f,u-f,u-c];function w(e){this.gl=e;this.attribs={position:0};this.program=i.linkProgram(e,a,o,this.attribs);this.uniforms=i.getProgramUniforms(e,this.program);this.vertexBuffer=e.createBuffer();this.gearOffset=0;this.gearVertexCount=0;this.arrowOffset=0;this.arrowVertexCount=0;this.projMat=new Float32Array(16);this.listener=null;this.onResize()}w.prototype.destroy=function(){var e=this.gl;if(this.listener){e.canvas.removeEventListener("click",this.listener,false)}e.deleteProgram(this.program);e.deleteBuffer(this.vertexBuffer)};w.prototype.listen=function(e,t){var r=this.gl.canvas;this.listener=function(i){var n=r.clientWidth/2;var a=M*p;if(i.clientX>n-a&&i.clientX<n+a&&i.clientY>r.clientHeight-a){e(i)}else if(i.clientX<a&&i.clientY<a){t(i)}};r.addEventListener("click",this.listener,false)};w.prototype.onResize=function(){var e=this.gl;var t=this;var r=[e.ARRAY_BUFFER_BINDING];n(e,r,function(e){var r=[];var n=e.drawingBufferWidth/2;var a=e.drawingBufferWidth/(screen.width*window.devicePixelRatio);if(!i.isIOS()){a*=window.devicePixelRatio}var o=v*a/2;var g=M*p*a;var w=M*a/2;var y=(M*p-M)*a;r.push(n-o,g);r.push(n-o,e.drawingBufferHeight);r.push(n+o,g);r.push(n+o,e.drawingBufferHeight);t.gearOffset=r.length/2;function A(e,t){var i=(90-e)*s;var a=Math.cos(i);var o=Math.sin(i);r.push(h*a*w+n,h*o*w+w);r.push(t*a*w+n,t*o*w+w)}for(var m=0;m<=6;m++){var D=m*u;A(D,l);A(D+c,l);A(D+f,d);A(D+(u-f),d);A(D+(u-c),l)}t.gearVertexCount=r.length/2-t.gearOffset;t.arrowOffset=r.length/2;function N(t,i){r.push(y+t,e.drawingBufferHeight-y-i)}var E=o/Math.sin(45*s);N(0,w);N(w,0);N(w+E,E);N(E,w+E);N(E,w-E);N(0,w);N(w,w*2);N(w+E,w*2-E);N(E,w-E);N(0,w);N(E,w-o);N(M*a,w-o);N(E,w+o);N(M*a,w+o);t.arrowVertexCount=r.length/2-t.arrowOffset;e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer);e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW)})};w.prototype.render=function(){var e=this.gl;var t=this;var r=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];n(e,r,function(e){e.disable(e.CULL_FACE);e.disable(e.DEPTH_TEST);e.disable(e.BLEND);e.disable(e.SCISSOR_TEST);e.disable(e.STENCIL_TEST);e.colorMask(true,true,true,true);e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight);t.renderNoState()})};w.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program);e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer);e.enableVertexAttribArray(this.attribs.position);e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,false,8,0);e.uniform4f(this.uniforms.color,1,1,1,1);i.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024);e.uniformMatrix4fv(this.uniforms.projectionMat,false,this.projMat);e.drawArrays(e.TRIANGLE_STRIP,0,4);e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount);e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};t.exports=w},{"./deps/wglu-preserve-state.js":6,"./util.js":22}],5:[function(e,t,r){var i=e("./cardboard-distorter.js");var n=e("./cardboard-ui.js");var a=e("./device-info.js");var o=e("./dpdb/dpdb.js");var s=e("./sensor-fusion/fusion-pose-sensor.js");var u=e("./rotate-instructions.js");var c=e("./viewer-selector.js");var f=e("./base.js").VRDisplay;var l=e("./util.js");var d={LEFT:"left",RIGHT:"right"};function h(){this.displayName="Cardboard VRDisplay (webvr-polyfill)";this.capabilities.hasOrientation=true;this.capabilities.canPresent=true;this.bufferScale_=WebVRConfig.BUFFER_SCALE;
this.poseSensor_=new s;this.distorter_=null;this.cardboardUI_=null;this.dpdb_=new o(true,this.onDeviceParamsUpdated_.bind(this));this.deviceInfo_=new a(this.dpdb_.getDeviceParams());this.viewerSelector_=new c;this.viewerSelector_.on("change",this.onViewerChanged_.bind(this));this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());if(!WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED){this.rotateInstructions_=new u}if(l.isIOS()){window.addEventListener("resize",this.onResize_.bind(this))}}h.prototype=new f;h.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}};h.prototype.resetPose=function(){this.poseSensor_.resetPose()};h.prototype.getEyeParameters=function(e){var t=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];var r;if(e==d.LEFT){t[0]*=-1;r=this.deviceInfo_.getFieldOfViewLeftEye()}else if(e==d.RIGHT){r=this.deviceInfo_.getFieldOfViewRightEye()}else{console.error("Invalid eye provided: %s",e);return null}return{fieldOfView:r,offset:t,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}};h.prototype.onDeviceParamsUpdated_=function(e){console.log("DPDB reported that device params were updated.");this.deviceInfo_.updateDeviceParams(e);if(this.distorter_){this.distorter_.updateDeviceInfo(this.deviceInfo_)}};h.prototype.updateBounds_=function(){if(this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)){this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)}};h.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");if(!e)e=this.layer_.source.getContext("experimental-webgl");if(!e)e=this.layer_.source.getContext("webgl2");if(!e)return;if(this.layer_.predistorted){if(!WebVRConfig.CARDBOARD_UI_DISABLED){e.canvas.width=l.getScreenWidth()*this.bufferScale_;e.canvas.height=l.getScreenHeight()*this.bufferScale_;this.cardboardUI_=new n(e)}}else{this.distorter_=new i(e);this.distorter_.updateDeviceInfo(this.deviceInfo_);this.cardboardUI_=this.distorter_.cardboardUI}if(this.cardboardUI_){this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement);e.stopPropagation();e.preventDefault()}.bind(this),function(e){this.exitPresent();e.stopPropagation();e.preventDefault()}.bind(this))}if(this.rotateInstructions_){if(l.isLandscapeMode()&&l.isMobile()){this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement)}else{this.rotateInstructions_.update()}}this.orientationHandler=this.onOrientationChange_.bind(this);window.addEventListener("orientationchange",this.orientationHandler);this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this);window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler);this.fireVRDisplayDeviceParamsChange_()};h.prototype.endPresent_=function(){if(this.distorter_){this.distorter_.destroy();this.distorter_=null}if(this.cardboardUI_){this.cardboardUI_.destroy();this.cardboardUI_=null}if(this.rotateInstructions_){this.rotateInstructions_.hide()}this.viewerSelector_.hide();window.removeEventListener("orientationchange",this.orientationHandler);window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)};h.prototype.submitFrame=function(e){if(this.distorter_){this.distorter_.submitFrame()}else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;if(t.width!=this.lastWidth||t.height!=this.lastHeight){this.cardboardUI_.onResize()}this.lastWidth=t.width;this.lastHeight=t.height;this.cardboardUI_.render()}};h.prototype.onOrientationChange_=function(e){console.log("onOrientationChange_");this.viewerSelector_.hide();if(this.rotateInstructions_){this.rotateInstructions_.update()}this.onResize_()};h.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");var r=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0"];t.canvas.setAttribute("style",r.join("; ")+";");l.safariCssSizeWorkaround(t.canvas)}};h.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e);if(this.distorter_){this.distorter_.updateDeviceInfo(this.deviceInfo_)}this.fireVRDisplayDeviceParamsChange_()};h.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)};t.exports=h},{"./base.js":2,"./cardboard-distorter.js":3,"./cardboard-ui.js":4,"./device-info.js":7,"./dpdb/dpdb.js":11,"./rotate-instructions.js":16,"./sensor-fusion/fusion-pose-sensor.js":18,"./util.js":22,"./viewer-selector.js":23}],6:[function(e,t,r){function i(e,t,r){if(!t){r(e);return}var i=[];var n=null;for(var a=0;a<t.length;++a){var o=t[a];switch(o){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit");i.push(null,null);break}if(!n){n=e.getParameter(e.ACTIVE_TEXTURE)}e.activeTexture(s);i.push(e.getParameter(o),null);break;case e.ACTIVE_TEXTURE:n=e.getParameter(e.ACTIVE_TEXTURE);i.push(null);break;default:i.push(e.getParameter(o));break}}r(e);for(var a=0;a<t.length;++a){var o=t[a];var u=i[a];switch(o){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s);e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s);e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:if(u){e.enable(o)}else{e.disable(o)}break;default:console.log("No GL restore behavior for 0x"+o.toString(16));break}if(n){e.activeTexture(n)}}}t.exports=i},{}],7:[function(e,t,r){var i=e("./distortion/distortion.js");var n=e("./math-util.js");var a=e("./util.js");function o(e){this.width=e.width||a.getScreenWidth();this.height=e.height||a.getScreenHeight();this.widthMeters=e.widthMeters;this.heightMeters=e.heightMeters;this.bevelMeters=e.bevelMeters}var s=new o({widthMeters:.11,heightMeters:.062,bevelMeters:.004});var u=new o({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004});var c={CardboardV1:new h({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new h({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};var f={x:.5,y:.5};var l={x:.5,y:.5};function d(e){this.viewer=c.CardboardV2;this.updateDeviceParams(e);this.distortion=new i(this.viewer.distortionCoefficients)}d.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device};d.prototype.getDevice=function(){return this.device};d.prototype.setViewer=function(e){this.viewer=e;this.distortion=new i(this.viewer.distortionCoefficients)};d.prototype.determineDevice_=function(e){if(!e){if(a.isIOS()){console.warn("Using fallback iOS device measurements.");return u}else{console.warn("Using fallback Android device measurements.");return s}}var t=.0254;var r=t/e.xdpi;var i=t/e.ydpi;var n=a.getScreenWidth();var c=a.getScreenHeight();return new o({widthMeters:r*n,heightMeters:i*c,bevelMeters:e.bevelMm*.001})};d.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer;var t=this.device;var r=this.distortion;var i=e.screenLensDistance;var a=(t.widthMeters-e.interLensDistance)/2;var o=e.interLensDistance/2;var s=e.baselineLensDistance-t.bevelMeters;var u=t.heightMeters-s;var c=n.radToDeg*Math.atan(r.distort(a/i));var f=n.radToDeg*Math.atan(r.distort(o/i));var l=n.radToDeg*Math.atan(r.distort(s/i));var d=n.radToDeg*Math.atan(r.distort(u/i));return{leftDegrees:Math.min(c,e.fov),rightDegrees:Math.min(f,e.fov),downDegrees:Math.min(l,e.fov),upDegrees:Math.min(d,e.fov)}};d.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer;var t=this.device;var r=this.distortion;var i=Math.tan(-n.degToRad*e.fov);var a=Math.tan(n.degToRad*e.fov);var o=Math.tan(n.degToRad*e.fov);var s=Math.tan(-n.degToRad*e.fov);var u=t.widthMeters/4;var c=t.heightMeters/2;var f=e.baselineLensDistance-t.bevelMeters-c;var l=e.interLensDistance/2-u;var d=-f;var h=e.screenLensDistance;var v=r.distort((l-u)/h);var M=r.distort((d+c)/h);var p=r.distort((l+u)/h);var g=r.distort((d-c)/h);var w=new Float32Array(4);w[0]=Math.max(i,v);w[1]=Math.min(a,M);w[2]=Math.min(o,p);w[3]=Math.max(s,g);return w};d.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer;var t=this.device;var r=this.distortion;var i=new Float32Array(4);var a=r.distortInverse(Math.tan(-n.degToRad*e.fov));var o=r.distortInverse(Math.tan(n.degToRad*e.fov));var s=r.distortInverse(Math.tan(n.degToRad*e.fov));var u=r.distortInverse(Math.tan(-n.degToRad*e.fov));var c=t.widthMeters/4;var f=t.heightMeters/2;var l=e.baselineLensDistance-t.bevelMeters-f;var d=e.interLensDistance/2-c;var h=-l;var v=e.screenLensDistance;var M=(d-c)/v;var p=(h+f)/v;var g=(d+c)/v;var w=(h-f)/v;i[0]=Math.max(a,M);i[1]=Math.min(o,p);i[2]=Math.min(s,g);i[3]=Math.max(u,w);return i};d.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer;var r=this.device;var i=t.screenLensDistance;var n=(r.widthMeters-t.interLensDistance)/2;var a=t.baselineLensDistance-r.bevelMeters;var o=(e[0]*i+n)/r.widthMeters;var s=(e[1]*i+a)/r.heightMeters;var u=(e[2]*i+n)/r.widthMeters;var c=(e[3]*i+a)/r.heightMeters;return{x:o,y:c,width:u-o,height:s-c}};d.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()};d.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}};d.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:n.radToDeg*Math.atan(e.outerDist),rightDegrees:n.radToDeg*Math.atan(e.innerDist),downDegrees:n.radToDeg*Math.atan(e.bottomDist),upDegrees:n.radToDeg*Math.atan(e.topDist)}};d.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_();var t=this.viewer;var r=this.device;var i=t.screenLensDistance;var n=r.widthMeters/i;var a=r.heightMeters/i;var o=r.width/n;var s=r.height/a;var u=Math.round((e.eyePosX-e.outerDist)*o);var c=Math.round((e.eyePosY-e.bottomDist)*s);return{x:u,y:c,width:Math.round((e.eyePosX+e.innerDist)*o)-u,height:Math.round((e.eyePosY+e.topDist)*s)-c}};d.prototype.getUndistortedParams_=function(){var e=this.viewer;var t=this.device;var r=this.distortion;var i=e.screenLensDistance;var a=e.interLensDistance/2/i;var o=t.widthMeters/i;var s=t.heightMeters/i;var u=o/2-a;var c=(e.baselineLensDistance-t.bevelMeters)/i;var f=e.fov;var l=r.distortInverse(Math.tan(n.degToRad*f));var d=Math.min(u,l);var h=Math.min(a,l);var v=Math.min(c,l);var M=Math.min(s-c,l);return{outerDist:d,innerDist:h,topDist:M,bottomDist:v,eyePosX:u,eyePosY:c}};function h(e){this.id=e.id;this.label=e.label;this.fov=e.fov;this.interLensDistance=e.interLensDistance;this.baselineLensDistance=e.baselineLensDistance;this.screenLensDistance=e.screenLensDistance;this.distortionCoefficients=e.distortionCoefficients;this.inverseCoefficients=e.inverseCoefficients}d.Viewers=c;t.exports=d},{"./distortion/distortion.js":9,"./math-util.js":14,"./util.js":22}],8:[function(e,t,r){var i=e("./base.js").VRDisplay;var n=e("./base.js").HMDVRDevice;var a=e("./base.js").PositionSensorVRDevice;function o(e){this.display=e;this.hardwareUnitId=e.displayId;this.deviceId="webvr-polyfill:HMD:"+e.displayId;this.deviceName=e.displayName+" (HMD)"}o.prototype=new n;o.prototype.getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:e=="right"?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}};o.prototype.setFieldOfView=function(e,t,r,i){};function s(e){this.display=e;this.hardwareUnitId=e.displayId;this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId;this.deviceName=e.displayName+" (PositionSensor)"}s.prototype=new a;s.prototype.getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}};s.prototype.resetState=function(){return this.positionDevice.resetPose()};t.exports.VRDisplayHMDDevice=o;t.exports.VRDisplayPositionSensorDevice=s},{"./base.js":2}],9:[function(e,t,r){function i(e){this.coefficients=e}i.prototype.distortInverse=function(e){var t=0;var r=1;var i=e-this.distort(t);while(Math.abs(r-t)>1e-4){var n=e-this.distort(r);var a=r-n*((r-t)/(n-i));t=r;r=a;i=n}return r};i.prototype.distort=function(e){var t=e*e;var r=0;for(var i=0;i<this.coefficients.length;i++){r=t*(r+this.coefficients[i])}return(r+1)*e};i.prototype.solveLinear_=function(e,t){var r=e.length;for(var i=0;i<r-1;++i){for(var n=i+1;n<r;++n){var a=e[i][n]/e[i][i];for(var o=i+1;o<r;++o){e[o][n]-=a*e[o][i]}t[n]-=a*t[i]}}var s=new Array(r);for(var i=r-1;i>=0;--i){var u=t[i];for(var o=i+1;o<r;++o){u-=e[o][i]*s[o]}s[i]=u/e[i][i]}return s};i.prototype.solveLeastSquares_=function(e,t){var r,i,n,a;var o=e.length;var s=e[0].length;if(o!=t.Length){throw new Error("Matrix / vector dimension mismatch")}var u=new Array(s);for(n=0;n<s;++n){u[n]=new Array(s);for(i=0;i<s;++i){a=0;for(r=0;r<o;++r){a+=e[i][r]*e[n][r]}u[n][i]=a}}var c=new Array(s);for(i=0;i<s;++i){a=0;for(r=0;r<o;++r){a+=e[i][r]*t[r]}c[i]=a}return this.solveLinear_(u,c)};i.prototype.approximateInverse=function(e,t){e=e||1;t=t||100;var r=6;var n,a;var o=new Array(r);for(a=0;a<r;++a){o[a]=new Array(t)}var s=new Array(t);for(n=0;n<t;++n){var u=e*(n+1)/t;var c=this.distort(u);var f=c;for(a=0;a<r;++a){f*=c*c;o[a][n]=f}s[n]=u-c}var l=this.solveLeastSquares_(o,s);return new i(l)};t.exports=i},{}],10:[function(e,t,r){var i={format:1,last_updated:"2016-01-20T00:18:35Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 "}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 "}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3}]};t.exports=i},{}],11:[function(e,t,r){var i=e("./dpdb-cache.js");var n=e("../util.js");var a="https://storage.googleapis.com/cardboard-dpdb/dpdb.json";function o(e,t){this.dpdb=i;this.recalculateDeviceParams_();if(e){this.onDeviceParamsUpdated=t;console.log("Fetching DPDB...");var r=new XMLHttpRequest;var n=this;r.open("GET",a,true);r.addEventListener("load",function(){n.loading=false;if(r.status>=200&&r.status<=299){console.log("Successfully loaded online DPDB.");n.dpdb=JSON.parse(r.response);n.recalculateDeviceParams_()}else{console.error("Error loading online DPDB!")}});r.send()}}o.prototype.getDeviceParams=function(){return this.deviceParams};o.prototype.recalculateDeviceParams_=function(){console.log("Recalculating device params.");var e=this.calcDeviceParams_();console.log("New device parameters:");console.log(e);if(e){this.deviceParams=e;if(this.onDeviceParamsUpdated){this.onDeviceParamsUpdated(this.deviceParams)}}else{console.error("Failed to recalculate device parameters.")}};o.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e){console.error("DPDB not available.");return null}if(e.format!=1){console.error("DPDB has unexpected format version.");return null}if(!e.devices||!e.devices.length){console.error("DPDB does not have a devices section.");return null}var t=navigator.userAgent||navigator.vendor||window.opera;var r=n.getScreenWidth();var i=n.getScreenHeight();console.log("User agent: "+t);console.log("Pixel width: "+r);console.log("Pixel height: "+i);if(!e.devices){console.error("DPDB has no devices section.");return null}for(var a=0;a<e.devices.length;a++){var o=e.devices[a];if(!o.rules){console.warn("Device["+a+"] has no rules section.");continue}if(o.type!="ios"&&o.type!="android"){console.warn("Device["+a+"] has invalid type.");continue}if(n.isIOS()!=(o.type=="ios"))continue;var u=false;for(var c=0;c<o.rules.length;c++){var f=o.rules[c];if(this.matchRule_(f,t,r,i)){console.log("Rule matched:");console.log(f);u=true;break}}if(!u)continue;var l=o.dpi[0]||o.dpi;var d=o.dpi[1]||o.dpi;return new s({xdpi:l,ydpi:d,bevelMm:o.bw})}console.warn("No DPDB device match.");return null};o.prototype.matchRule_=function(e,t,r,i){if(!e.ua&&!e.res)return false;if(e.ua&&t.indexOf(e.ua)<0)return false;if(e.res){if(!e.res[0]||!e.res[1])return false;var n=e.res[0];var a=e.res[1];if(Math.min(r,i)!=Math.min(n,a)||Math.max(r,i)!=Math.max(n,a)){return false}}return true};function s(e){this.xdpi=e.xdpi;this.ydpi=e.ydpi;this.bevelMm=e.bevelMm}t.exports=o},{"../util.js":22,"./dpdb-cache.js":10}],12:[function(e,t,r){function i(){this.callbacks={}}i.prototype.emit=function(e){var t=this.callbacks[e];if(!t){return}var r=[].slice.call(arguments);r.shift();for(var i=0;i<t.length;i++){t[i].apply(this,r)}};i.prototype.on=function(e,t){if(e in this.callbacks){this.callbacks[e].push(t)}else{this.callbacks[e]=[t]}};t.exports=i},{}],13:[function(e,t,r){var i=e("./util.js");var n=e("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=i.extend({FORCE_ENABLE_VR:false,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:true,CARDBOARD_UI_DISABLED:false,ROTATE_INSTRUCTIONS_DISABLED:false,YAW_ONLY:false,MOUSE_KEYBOARD_CONTROLS_DISABLED:false,DEFER_INITIALIZATION:false,ENABLE_DEPRECATED_API:false,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:false},window.WebVRConfig);if(!window.WebVRConfig.DEFER_INITIALIZATION){new n}else{window.InitializeWebVRPolyfill=function(){new n}}},{"./util.js":22,"./webvr-polyfill.js":25}],14:[function(e,t,r){var i=window.MathUtil||{};i.degToRad=Math.PI/180;i.radToDeg=180/Math.PI;i.Vector2=function(e,t){this.x=e||0;this.y=t||0};i.Vector2.prototype={constructor:i.Vector2,set:function(e,t){this.x=e;this.y=t;return this},copy:function(e){this.x=e.x;this.y=e.y;return this},subVectors:function(e,t){this.x=e.x-t.x;this.y=e.y-t.y;return this}};i.Vector3=function(e,t,r){this.x=e||0;this.y=t||0;this.z=r||0};i.Vector3.prototype={constructor:i.Vector3,set:function(e,t,r){this.x=e;this.y=t;this.z=r;return this},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;return this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(e!==0){var t=1/e;this.multiplyScalar(t)}else{this.x=0;this.y=0;this.z=0}return this},multiplyScalar:function(e){this.x*=e;this.y*=e;this.z*=e},applyQuaternion:function(e){var t=this.x;var r=this.y;var i=this.z;var n=e.x;var a=e.y;var o=e.z;var s=e.w;var u=s*t+a*i-o*r;var c=s*r+o*t-n*i;var f=s*i+n*r-a*t;var l=-n*t-a*r-o*i;this.x=u*s+l*-n+c*-o-f*-a;this.y=c*s+l*-a+f*-n-u*-o;this.z=f*s+l*-o+u*-a-c*-n;return this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z;var a=t.x,o=t.y,s=t.z;this.x=i*s-n*o;this.y=n*a-r*s;this.z=r*o-i*a;return this}};i.Quaternion=function(e,t,r,i){this.x=e||0;this.y=t||0;this.z=r||0;this.w=i!==undefined?i:1};i.Quaternion.prototype={constructor:i.Quaternion,set:function(e,t,r,i){this.x=e;this.y=t;this.z=r;this.w=i;return this},copy:function(e){this.x=e.x;this.y=e.y;this.z=e.z;this.w=e.w;return this},setFromEulerXYZ:function(e,t,r){var i=Math.cos(e/2);var n=Math.cos(t/2);var a=Math.cos(r/2);var o=Math.sin(e/2);var s=Math.sin(t/2);var u=Math.sin(r/2);this.x=o*n*a+i*s*u;this.y=i*s*a-o*n*u;this.z=i*n*u+o*s*a;this.w=i*n*a-o*s*u;return this},setFromEulerYXZ:function(e,t,r){var i=Math.cos(e/2);var n=Math.cos(t/2);var a=Math.cos(r/2);var o=Math.sin(e/2);var s=Math.sin(t/2);var u=Math.sin(r/2);this.x=o*n*a+i*s*u;this.y=i*s*a-o*n*u;this.z=i*n*u-o*s*a;this.w=i*n*a+o*s*u;return this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);this.x=e.x*i;this.y=e.y*i;this.z=e.z*i;this.w=Math.cos(r);return this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,i=e.y,n=e.z,a=e.w;var o=t.x,s=t.y,u=t.z,c=t.w;this.x=r*c+a*o+i*u-n*s;this.y=i*c+a*s+n*o-r*u;this.z=n*c+a*u+r*s-i*o;this.w=a*c-r*o-i*s-n*u;return this},inverse:function(){this.x*=-1;this.y*=-1;this.z*=-1;this.normalize();return this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);if(e===0){this.x=0;this.y=0;this.z=0;this.w=1}else{e=1/e;this.x=this.x*e;this.y=this.y*e;this.z=this.z*e;this.w=this.w*e}return this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var r=this.x,i=this.y,n=this.z,a=this.w;var o=a*e.w+r*e.x+i*e.y+n*e.z;if(o<0){this.w=-e.w;this.x=-e.x;this.y=-e.y;this.z=-e.z;o=-o}else{this.copy(e)}if(o>=1){this.w=a;this.x=r;this.y=i;this.z=n;return this}var s=Math.acos(o);var u=Math.sqrt(1-o*o);if(Math.abs(u)<.001){this.w=.5*(a+this.w);this.x=.5*(r+this.x);this.y=.5*(i+this.y);this.z=.5*(n+this.z);return this}var c=Math.sin((1-t)*s)/u,f=Math.sin(t*s)/u;this.w=a*c+this.w*f;this.x=r*c+this.x*f;this.y=i*c+this.y*f;this.z=n*c+this.z*f;return this},setFromUnitVectors:function(){var e,t;var r=1e-6;return function(n,a){if(e===undefined)e=new i.Vector3;t=n.dot(a)+1;if(t<r){t=0;if(Math.abs(n.x)>Math.abs(n.z)){e.set(-n.y,n.x,0)}else{e.set(0,-n.z,n.y)}}else{e.crossVectors(n,a)}this.x=e.x;this.y=e.y;this.z=e.z;this.w=t;this.normalize();return this}}()};t.exports=i},{}],15:[function(e,t,r){var i=e("./base.js").VRDisplay;var n=e("./math-util.js");var a=e("./util.js");var o=.15;var s=80;var u=.5;var c=.3;function f(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)";this.capabilities.hasOrientation=true;window.addEventListener("keydown",this.onKeyDown_.bind(this));window.addEventListener("mousemove",this.onMouseMove_.bind(this));window.addEventListener("mousedown",this.onMouseDown_.bind(this));window.addEventListener("mouseup",this.onMouseUp_.bind(this));this.phi_=0;this.theta_=0;this.targetAngle_=null;this.angleAnimation_=null;this.orientation_=new n.Quaternion;this.rotateStart_=new n.Vector2;this.rotateEnd_=new n.Vector2;this.rotateDelta_=new n.Vector2;this.isDragging_=false;this.orientationOut_=new Float32Array(4)}f.prototype=new i;f.prototype.getImmediatePose=function(){this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0);this.orientationOut_[0]=this.orientation_.x;this.orientationOut_[1]=this.orientation_.y;this.orientationOut_[2]=this.orientation_.z;
this.orientationOut_[3]=this.orientation_.w;return{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}};f.prototype.onKeyDown_=function(e){if(e.keyCode==38){this.animatePhi_(this.phi_+o)}else if(e.keyCode==39){this.animateTheta_(this.theta_-o)}else if(e.keyCode==40){this.animatePhi_(this.phi_-o)}else if(e.keyCode==37){this.animateTheta_(this.theta_+o)}};f.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)};f.prototype.animatePhi_=function(e){e=a.clamp(e,-Math.PI/2,Math.PI/2);this.animateKeyTransitions_("phi_",e)};f.prototype.animateKeyTransitions_=function(e,t){if(this.angleAnimation_){cancelAnimationFrame(this.angleAnimation_)}var r=this[e];var i=new Date;this.angleAnimation_=requestAnimationFrame(function n(){var a=new Date-i;if(a>=s){this[e]=t;cancelAnimationFrame(this.angleAnimation_);return}this.angleAnimation_=requestAnimationFrame(n.bind(this));var o=a/s;this[e]=r+(t-r)*o}.bind(this))};f.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY);this.isDragging_=true};f.prototype.onMouseMove_=function(e){if(!this.isDragging_&&!this.isPointerLocked_()){return}if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0;var r=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-r)}else{this.rotateEnd_.set(e.clientX,e.clientY)}this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_);this.rotateStart_.copy(this.rotateEnd_);this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*c;this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*u;this.phi_=a.clamp(this.phi_,-Math.PI/2,Math.PI/2)};f.prototype.onMouseUp_=function(e){this.isDragging_=false};f.prototype.isPointerLocked_=function(){var e=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement;return e!==undefined};f.prototype.resetPose=function(){this.phi_=0;this.theta_=0};t.exports=f},{"./base.js":2,"./math-util.js":14,"./util.js":22}],16:[function(e,t,r){var i=e("./util.js");function n(){this.loadIcon_();var e=document.createElement("div");var t=e.style;t.position="fixed";t.top=0;t.right=0;t.bottom=0;t.left=0;t.backgroundColor="gray";t.fontFamily="sans-serif";t.zIndex=1e6;var r=document.createElement("img");r.src=this.icon;var t=r.style;t.marginLeft="25%";t.marginTop="25%";t.width="50%";e.appendChild(r);var i=document.createElement("div");var t=i.style;t.textAlign="center";t.fontSize="16px";t.lineHeight="24px";t.margin="24px 25%";t.width="50%";i.innerHTML="Place your phone into your Cardboard viewer.";e.appendChild(i);var n=document.createElement("div");var t=n.style;t.backgroundColor="#CFD8DC";t.position="fixed";t.bottom=0;t.width="100%";t.height="48px";t.padding="14px 24px";t.boxSizing="border-box";t.color="#656A6B";e.appendChild(n);var a=document.createElement("div");a.style.float="left";a.innerHTML="No Cardboard viewer?";var o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/";o.innerHTML="get one";o.target="_blank";var t=o.style;t.float="right";t.fontWeight=600;t.textTransform="uppercase";t.borderLeft="1px solid gray";t.paddingLeft="24px";t.textDecoration="none";t.color="#656A6B";n.appendChild(a);n.appendChild(o);this.overlay=e;this.text=i;this.hide()}n.prototype.show=function(e){if(!e&&!this.overlay.parentElement){document.body.appendChild(this.overlay)}else if(e){if(this.overlay.parentElement&&this.overlay.parentElement!=e)this.overlay.parentElement.removeChild(this.overlay);e.appendChild(this.overlay)}this.overlay.style.display="block";var t=this.overlay.querySelector("img");var r=t.style;if(i.isLandscapeMode()){r.width="20%";r.marginLeft="40%";r.marginTop="3%"}else{r.width="50%";r.marginLeft="25%";r.marginTop="25%"}};n.prototype.hide=function(){this.overlay.style.display="none"};n.prototype.showTemporarily=function(e,t){this.show(t);this.timer=setTimeout(this.hide.bind(this),e)};n.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)};n.prototype.update=function(){this.disableShowTemporarily();if(!i.isLandscapeMode()&&i.isMobile()){this.show()}else{this.hide()}};n.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+");
};t.exports=n},{"./util.js":22}],17:[function(e,t,r){var i=e("./sensor-sample.js");var n=e("../math-util.js");var a=e("../util.js");var o=false;function s(e){this.kFilter=e;this.currentAccelMeasurement=new i;this.currentGyroMeasurement=new i;this.previousGyroMeasurement=new i;if(a.isIOS()){this.filterQ=new n.Quaternion(-1,0,0,1)}else{this.filterQ=new n.Quaternion(1,0,0,1)}this.previousFilterQ=new n.Quaternion;this.previousFilterQ.copy(this.filterQ);this.accelQ=new n.Quaternion;this.isOrientationInitialized=false;this.estimatedGravity=new n.Vector3;this.measuredGravity=new n.Vector3;this.gyroIntegralQ=new n.Quaternion}s.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)};s.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var r=t-this.previousGyroMeasurement.timestampS;if(a.isTimestampDeltaValid(r)){this.run_()}this.previousGyroMeasurement.copy(this.currentGyroMeasurement)};s.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample);this.previousFilterQ.copy(this.accelQ);this.isOrientationInitialized=true;return}var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS;var t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t);this.filterQ.copy(this.previousFilterQ);this.filterQ.multiply(t);var r=new n.Quaternion;r.copy(this.filterQ);r.inverse();this.estimatedGravity.set(0,0,-1);this.estimatedGravity.applyQuaternion(r);this.estimatedGravity.normalize();this.measuredGravity.copy(this.currentAccelMeasurement.sample);this.measuredGravity.normalize();var i=new n.Quaternion;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity);i.inverse();if(o){console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",n.radToDeg*a.getQuaternionAngle(i),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1))}var s=new n.Quaternion;s.copy(this.filterQ);s.multiply(i);this.filterQ.slerp(s,1-this.kFilter);this.previousFilterQ.copy(this.filterQ)};s.prototype.getOrientation=function(){return this.filterQ};s.prototype.accelToQuaternion_=function(e){var t=new n.Vector3;t.copy(e);t.normalize();var r=new n.Quaternion;r.setFromUnitVectors(new n.Vector3(0,0,-1),t);r.inverse();return r};s.prototype.gyroToQuaternionDelta_=function(e,t){var r=new n.Quaternion;var i=new n.Vector3;i.copy(e);i.normalize();r.setFromAxisAngle(i,e.length()*t);return r};t.exports=s},{"../math-util.js":14,"../util.js":22,"./sensor-sample.js":20}],18:[function(e,t,r){var i=e("./complementary-filter.js");var n=e("./pose-predictor.js");var a=e("../touch-panner.js");var o=e("../math-util.js");var s=e("../util.js");function u(){this.deviceId="webvr-polyfill:fused";this.deviceName="VR Position Device (webvr-polyfill:fused)";this.accelerometer=new o.Vector3;this.gyroscope=new o.Vector3;window.addEventListener("devicemotion",this.onDeviceMotionChange_.bind(this));window.addEventListener("orientationchange",this.onScreenOrientationChange_.bind(this));this.filter=new i(WebVRConfig.K_FILTER);this.posePredictor=new n(WebVRConfig.PREDICTION_TIME_S);this.touchPanner=new a;this.filterToWorldQ=new o.Quaternion;if(s.isIOS()){this.filterToWorldQ.setFromAxisAngle(new o.Vector3(1,0,0),Math.PI/2)}else{this.filterToWorldQ.setFromAxisAngle(new o.Vector3(1,0,0),-Math.PI/2)}this.inverseWorldToScreenQ=new o.Quaternion;this.worldToScreenQ=new o.Quaternion;this.originalPoseAdjustQ=new o.Quaternion;this.originalPoseAdjustQ.setFromAxisAngle(new o.Vector3(0,0,1),-window.orientation*Math.PI/180);this.setScreenTransform_();if(s.isLandscapeMode()){this.filterToWorldQ.multiply(this.inverseWorldToScreenQ)}this.resetQ=new o.Quaternion;this.isFirefoxAndroid=s.isFirefoxAndroid();this.isIOS=s.isIOS();this.orientationOut_=new Float32Array(4)}u.prototype.getPosition=function(){return null};u.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new o.Quaternion;t.copy(this.filterToWorldQ);t.multiply(this.resetQ);if(!WebVRConfig.TOUCH_PANNER_DISABLED){t.multiply(this.touchPanner.getOrientation())}t.multiply(this.predictedQ);t.multiply(this.worldToScreenQ);if(WebVRConfig.YAW_ONLY){t.x=0;t.z=0;t.normalize()}this.orientationOut_[0]=t.x;this.orientationOut_[1]=t.y;this.orientationOut_[2]=t.z;this.orientationOut_[3]=t.w;return this.orientationOut_};u.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation());this.resetQ.x=0;this.resetQ.y=0;this.resetQ.z*=-1;this.resetQ.normalize();if(s.isLandscapeMode()){this.resetQ.multiply(this.inverseWorldToScreenQ)}this.resetQ.multiply(this.originalPoseAdjustQ);if(!WebVRConfig.TOUCH_PANNER_DISABLED){this.touchPanner.resetSensor()}};u.prototype.onDeviceMotionChange_=function(e){var t=e.accelerationIncludingGravity;var r=e.rotationRate;var i=e.timeStamp/1e3;if(this.isFirefoxAndroid){i/=1e3}var n=i-this.previousTimestampS;if(n<=s.MIN_TIMESTEP||n>s.MAX_TIMESTEP){console.warn("Invalid timestamps detected. Time step between successive "+"gyroscope sensor samples is very small or not monotonic");this.previousTimestampS=i;return}this.accelerometer.set(-t.x,-t.y,-t.z);this.gyroscope.set(r.alpha,r.beta,r.gamma);if(this.isIOS||this.isFirefoxAndroid){this.gyroscope.multiplyScalar(Math.PI/180)}this.filter.addAccelMeasurement(this.accelerometer,i);this.filter.addGyroMeasurement(this.gyroscope,i);this.previousTimestampS=i};u.prototype.onScreenOrientationChange_=function(e){this.setScreenTransform_()};u.prototype.setScreenTransform_=function(){this.worldToScreenQ.set(0,0,0,1);switch(window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new o.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new o.Vector3(0,0,1),Math.PI/2);break;case 180:break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ);this.inverseWorldToScreenQ.inverse()};t.exports=u},{"../math-util.js":14,"../touch-panner.js":21,"../util.js":22,"./complementary-filter.js":17,"./pose-predictor.js":19}],19:[function(e,t,r){var i=e("../math-util.js");var n=false;function a(e){this.predictionTimeS=e;this.previousQ=new i.Quaternion;this.previousTimestampS=null;this.deltaQ=new i.Quaternion;this.outQ=new i.Quaternion}a.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS){this.previousQ.copy(e);this.previousTimestampS=r;return e}var a=new i.Vector3;a.copy(t);a.normalize();var o=t.length();if(o<i.degToRad*20){if(n){console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*o).toFixed(1))}this.outQ.copy(e);this.previousQ.copy(e);return this.outQ}var s=r-this.previousTimestampS;var u=o*this.predictionTimeS;this.deltaQ.setFromAxisAngle(a,u);this.outQ.copy(this.previousQ);this.outQ.multiply(this.deltaQ);this.previousQ.copy(e);this.previousTimestampS=r;return this.outQ};t.exports=a},{"../math-util.js":14}],20:[function(e,t,r){function i(e,t){this.set(e,t)}i.prototype.set=function(e,t){this.sample=e;this.timestampS=t};i.prototype.copy=function(e){this.set(e.sample,e.timestampS)};t.exports=i},{}],21:[function(e,t,r){var i=e("./math-util.js");var n=e("./util.js");var a=.5;function o(){window.addEventListener("touchstart",this.onTouchStart_.bind(this));window.addEventListener("touchmove",this.onTouchMove_.bind(this));window.addEventListener("touchend",this.onTouchEnd_.bind(this));this.isTouching=false;this.rotateStart=new i.Vector2;this.rotateEnd=new i.Vector2;this.rotateDelta=new i.Vector2;this.theta=0;this.orientation=new i.Quaternion}o.prototype.getOrientation=function(){this.orientation.setFromEulerXYZ(0,0,this.theta);return this.orientation};o.prototype.resetSensor=function(){this.theta=0};o.prototype.onTouchStart_=function(e){if(e.touches.length!=1){return}this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY);this.isTouching=true};o.prototype.onTouchMove_=function(e){if(!this.isTouching){return}this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY);this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart);this.rotateStart.copy(this.rotateEnd);if(n.isIOS()){this.rotateDelta.x*=-1}var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*a};o.prototype.onTouchEnd_=function(e){this.isTouching=false};t.exports=o},{"./math-util.js":14,"./util.js":22}],22:[function(e,t,r){var i=e("object-assign");var n=window.Util||{};n.MIN_TIMESTEP=.001;n.MAX_TIMESTEP=1;n.base64=function(e,t){return"data:"+e+";base64,"+t};n.clamp=function(e,t,r){return Math.min(Math.max(t,e),r)};n.lerp=function(e,t,r){return e+(t-e)*r};n.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}();n.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}();n.isFirefoxAndroid=function(){var e=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return e}}();n.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90};n.isTimestampDeltaValid=function(e){if(isNaN(e)){return false}if(e<=n.MIN_TIMESTEP){return false}if(e>n.MAX_TIMESTEP){return false}return true};n.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio};n.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio};n.requestFullscreen=function(e){if(e.requestFullscreen){e.requestFullscreen()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}else{return false}return true};n.exitFullscreen=function(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}else{return false}return true};n.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};n.linkProgram=function(e,t,r,i){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t);e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,r);e.compileShader(a);var o=e.createProgram();e.attachShader(o,n);e.attachShader(o,a);for(var s in i)e.bindAttribLocation(o,i[s],s);e.linkProgram(o);e.deleteShader(n);e.deleteShader(a);return o};n.getProgramUniforms=function(e,t){var r={};var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);var n="";for(var a=0;a<i;a++){var o=e.getActiveUniform(t,a);n=o.name.replace("[0]","");r[n]=e.getUniformLocation(t,n)}return r};n.orthoMatrix=function(e,t,r,i,n,a,o){var s=1/(t-r),u=1/(i-n),c=1/(a-o);e[0]=-2*s;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*u;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*c;e[11]=0;e[12]=(t+r)*s;e[13]=(n+i)*u;e[14]=(o+a)*c;e[15]=1;return e};n.isMobile=function(){var e=false;(function(t){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))e=true})(navigator.userAgent||navigator.vendor||window.opera);return e};n.extend=i;n.safariCssSizeWorkaround=function(e){if(n.isIOS()){var t=e.style.width;var r=e.style.height;e.style.width=parseInt(t)+1+"px";e.style.height=parseInt(r)+"px";console.log("Resetting width to...",t);setTimeout(function(){console.log("Done. Width is now",t);e.style.width=t;e.style.height=r},100)}window.Util=n;window.canvas=e};n.frameDataFromPose=function(){var e=Math.PI/180;var t=Math.PI*.25;function r(r,i,n,a){var o=Math.tan(i?i.upDegrees*e:t),s=Math.tan(i?i.downDegrees*e:t),u=Math.tan(i?i.leftDegrees*e:t),c=Math.tan(i?i.rightDegrees*e:t),f=2/(u+c),l=2/(o+s);r[0]=f;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=l;r[6]=0;r[7]=0;r[8]=-((u-c)*f*.5);r[9]=(o-s)*l*.5;r[10]=a/(n-a);r[11]=-1;r[12]=0;r[13]=0;r[14]=a*n/(n-a);r[15]=0;return r}function i(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=i+i,u=n+n,c=a+a,f=i*s,l=i*u,d=i*c,h=n*u,v=n*c,M=a*c,p=o*s,g=o*u,w=o*c;e[0]=1-(h+M);e[1]=l+w;e[2]=d-g;e[3]=0;e[4]=l-w;e[5]=1-(f+M);e[6]=v+p;e[7]=0;e[8]=d+g;e[9]=v-p;e[10]=1-(f+h);e[11]=0;e[12]=r[0];e[13]=r[1];e[14]=r[2];e[15]=1;return e}function n(e,t,r){var i=r[0],n=r[1],a=r[2],o,s,u,c,f,l,d,h,v,M,p,g;if(t===e){e[12]=t[0]*i+t[4]*n+t[8]*a+t[12];e[13]=t[1]*i+t[5]*n+t[9]*a+t[13];e[14]=t[2]*i+t[6]*n+t[10]*a+t[14];e[15]=t[3]*i+t[7]*n+t[11]*a+t[15]}else{o=t[0];s=t[1];u=t[2];c=t[3];f=t[4];l=t[5];d=t[6];h=t[7];v=t[8];M=t[9];p=t[10];g=t[11];e[0]=o;e[1]=s;e[2]=u;e[3]=c;e[4]=f;e[5]=l;e[6]=d;e[7]=h;e[8]=v;e[9]=M;e[10]=p;e[11]=g;e[12]=o*i+f*n+v*a+t[12];e[13]=s*i+l*n+M*a+t[13];e[14]=u*i+d*n+p*a+t[14];e[15]=c*i+h*n+g*a+t[15]}return e}mat4_invert=function(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],d=t[10],h=t[11],v=t[12],M=t[13],p=t[14],g=t[15],w=r*s-i*o,y=r*u-n*o,A=r*c-a*o,m=i*u-n*s,D=i*c-a*s,N=n*c-a*u,E=f*M-l*v,I=f*p-d*v,T=f*g-h*v,L=l*p-d*M,j=l*g-h*M,x=d*g-h*p,S=w*x-y*j+A*L+m*T-D*I+N*E;if(!S){return null}S=1/S;e[0]=(s*x-u*j+c*L)*S;e[1]=(n*j-i*x-a*L)*S;e[2]=(M*N-p*D+g*m)*S;e[3]=(d*D-l*N-h*m)*S;e[4]=(u*T-o*x-c*I)*S;e[5]=(r*x-n*T+a*I)*S;e[6]=(p*A-v*N-g*y)*S;e[7]=(f*N-d*A+h*y)*S;e[8]=(o*j-s*T+c*E)*S;e[9]=(i*T-r*j-a*E)*S;e[10]=(v*D-M*A+g*w)*S;e[11]=(l*A-f*D-h*w)*S;e[12]=(s*I-o*L-u*E)*S;e[13]=(r*L-i*I+n*E)*S;e[14]=(M*y-v*m-p*w)*S;e[15]=(f*m-l*y+d*w)*S;return e};var a=new Float32Array([0,0,0,1]);var o=new Float32Array([0,0,0]);function s(e,t,s,u,c){r(e,u?u.fieldOfView:null,c.depthNear,c.depthFar);var f=s.orientation||a;var l=s.position||o;i(t,f,l);if(u)n(t,t,u.offset);mat4_invert(t,t)}return function(e,t,r){if(!e||!t)return false;e.pose=t;e.timestamp=t.timestamp;s(e.leftProjectionMatrix,e.leftViewMatrix,t,r.getEyeParameters("left"),r);s(e.rightProjectionMatrix,e.rightViewMatrix,t,r.getEyeParameters("right"),r);return true}}();t.exports=n},{"object-assign":1}],23:[function(e,t,r){var i=e("./emitter.js");var n=e("./util.js");var a=e("./device-info.js");var o="CardboardV1";var s="WEBVR_CARDBOARD_VIEWER";var u="webvr-polyfill-viewer-selector";function c(){try{this.selectedKey=localStorage.getItem(s)||o}catch(e){console.error("Failed to load viewer profile: %s",e)}this.dialog=this.createDialog_(a.Viewers);this.root=null}c.prototype=new i;c.prototype.show=function(e){this.root=e;e.appendChild(this.dialog);var t=this.dialog.querySelector("#"+this.selectedKey);t.checked=true;this.dialog.style.display="block"};c.prototype.hide=function(){if(this.root&&this.root.contains(this.dialog)){this.root.removeChild(this.dialog)}this.dialog.style.display="none"};c.prototype.getCurrentViewer=function(){return a.Viewers[this.selectedKey]};c.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");if(e){return e.id}return null};c.prototype.onSave_=function(){this.selectedKey=this.getSelectedKey_();if(!this.selectedKey||!a.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.emit("change",a.Viewers[this.selectedKey]);try{localStorage.setItem(s,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()};c.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add(u);t.style.display="none";var r=document.createElement("div");var i=r.style;i.position="fixed";i.left=0;i.top=0;i.width="100%";i.height="100%";i.background="rgba(0, 0, 0, 0.3)";r.addEventListener("click",this.hide.bind(this));var n=280;var a=document.createElement("div");var i=a.style;i.boxSizing="border-box";i.position="fixed";i.top="24px";i.left="50%";i.marginLeft=-n/2+"px";i.width=n+"px";i.padding="24px";i.overflow="hidden";i.background="#fafafa";i.fontFamily="'Roboto', sans-serif";i.boxShadow="0px 5px 20px #666";a.appendChild(this.createH1_("Select your viewer"));for(var o in e){a.appendChild(this.createChoice_(o,e[o].label))}a.appendChild(this.createButton_("Save",this.onSave_.bind(this)));t.appendChild(r);t.appendChild(a);return t};c.prototype.createH1_=function(e){var t=document.createElement("h1");var r=t.style;r.color="black";r.fontSize="20px";r.fontWeight="bold";r.marginTop=0;r.marginBottom="24px";t.innerHTML=e;return t};c.prototype.createChoice_=function(e,t){var r=document.createElement("div");r.style.marginTop="8px";r.style.color="black";var i=document.createElement("input");i.style.fontSize="30px";i.setAttribute("id",e);i.setAttribute("type","radio");i.setAttribute("value",e);i.setAttribute("name","field");var n=document.createElement("label");n.style.marginLeft="4px";n.setAttribute("for",e);n.innerHTML=t;r.appendChild(i);r.appendChild(n);return r};c.prototype.createButton_=function(e,t){var r=document.createElement("button");r.innerHTML=e;var i=r.style;i.float="right";i.textTransform="uppercase";i.color="#1094f7";i.fontSize="14px";i.letterSpacing=0;i.border=0;i.background="none";i.marginTop="16px";r.addEventListener("click",t);return r};t.exports=c},{"./device-info.js":7,"./emitter.js":12,"./util.js":22}],24:[function(e,t,r){var i=e("./util.js");function n(){var e=document.createElement("video");e.addEventListener("ended",function(){e.play()});this.request=function(){if(e.paused){e.src=i.base64("video/mp4","AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABMAAAAUc3RjbwAAAAAAAAABAAAIKwAAACt1ZHRhAAAAI6llbmMAFwAAdmxjIDIuMi4xIHN0cmVhbSBvdXRwdXQAAAAId2lkZQAACRRtZGF0AAACrgX//6vcRem95tlIt5Ys2CDZI+7veDI2NCAtIGNvcmUgMTQyIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDEzIG1lPWhleCBzdWJtZT03IHBzeT0xIHBzeV9yZD0xLjAwOjAuMDAgbWl4ZWRfcmVmPTEgbWVfcmFuZ2U9MTYgY2hyb21hX21lPTEgdHJlbGxpcz0xIDh4OGRjdD0xIGNxbT0wIGRlYWR6b25lPTIxLDExIGZhc3RfcHNraXA9MSBjaHJvbWFfcXBfb2Zmc2V0PS0yIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTEgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD00MCByYz1hYnIgbWJ0cmVlPTEgYml0cmF0ZT0xMDAgcmF0ZXRvbD0xLjAgcWNvbXA9MC42MCBxcG1pbj0xMCBxcG1heD01MSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAU2WIhAAQ/8ltlOe+cTZuGkKg+aRtuivcDZ0pBsfsEi9p/i1yU9DxS2lq4dXTinViF1URBKXgnzKBd/Uh1bkhHtMrwrRcOJslD01UB+fyaL6ef+DBAAAAFEGaJGxBD5B+v+a+4QqF3MgBXz9MAAAACkGeQniH/+94r6EAAAAKAZ5hdEN/8QytwAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFomUwIIf/+4QAAAApBnoZFESw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAOQZrwSahBbJlMCCH//uEAAAAKQZ8ORRUsP/++gQAAAAgBny10Q3/EgQAAAAgBny9qQ3/EgAAAAA5BmzRJqEFsmUwIIf/+4AAAAApBn1JFFSw//76BAAAACAGfcXRDf8SAAAAACAGfc2pDf8SAAAAADkGbeEmoQWyZTAgh//7hAAAACkGflkUVLD//voAAAAAIAZ+1dEN/xIEAAAAIAZ+3akN/xIEAAAAOQZu8SahBbJlMCCH//uAAAAAKQZ/aRRUsP/++gQAAAAgBn/l0Q3/EgAAAAAgBn/tqQ3/EgQAAAA5Bm+BJqEFsmUwIIf/+4QAAAApBnh5FFSw//76AAAAACAGePXRDf8SAAAAACAGeP2pDf8SBAAAADkGaJEmoQWyZTAgh//7gAAAACkGeQkUVLD//voEAAAAIAZ5hdEN/xIAAAAAIAZ5jakN/xIEAAAAOQZpoSahBbJlMCCH//uEAAAAKQZ6GRRUsP/++gQAAAAgBnqV0Q3/EgQAAAAgBnqdqQ3/EgAAAAA5BmqxJqEFsmUwIIf/+4AAAAApBnspFFSw//76BAAAACAGe6XRDf8SAAAAACAGe62pDf8SAAAAADkGa8EmoQWyZTAgh//7hAAAACkGfDkUVLD//voEAAAAIAZ8tdEN/xIEAAAAIAZ8vakN/xIAAAAAOQZs0SahBbJlMCCH//uAAAAAKQZ9SRRUsP/++gQAAAAgBn3F0Q3/EgAAAAAgBn3NqQ3/EgAAAAA5Bm3hJqEFsmUwIIf/+4QAAAApBn5ZFFSw//76AAAAACAGftXRDf8SBAAAACAGft2pDf8SBAAAADkGbvEmoQWyZTAgh//7gAAAACkGf2kUVLD//voEAAAAIAZ/5dEN/xIAAAAAIAZ/7akN/xIEAAAAOQZvgSahBbJlMCCH//uEAAAAKQZ4eRRUsP/++gAAAAAgBnj10Q3/EgAAAAAgBnj9qQ3/EgQAAAA5BmiRJqEFsmUwIIf/+4AAAAApBnkJFFSw//76BAAAACAGeYXRDf8SAAAAACAGeY2pDf8SBAAAADkGaaEmoQWyZTAgh//7hAAAACkGehkUVLD//voEAAAAIAZ6ldEN/xIEAAAAIAZ6nakN/xIAAAAAOQZqsSahBbJlMCCH//uAAAAAKQZ7KRRUsP/++gQAAAAgBnul0Q3/EgAAAAAgBnutqQ3/EgAAAAA5BmvBJqEFsmUwIIf/+4QAAAApBnw5FFSw//76BAAAACAGfLXRDf8SBAAAACAGfL2pDf8SAAAAADkGbNEmoQWyZTAgh//7gAAAACkGfUkUVLD//voEAAAAIAZ9xdEN/xIAAAAAIAZ9zakN/xIAAAAAOQZt4SahBbJlMCCH//uEAAAAKQZ+WRRUsP/++gAAAAAgBn7V0Q3/EgQAAAAgBn7dqQ3/EgQAAAA5Bm7xJqEFsmUwIIf/+4AAAAApBn9pFFSw//76BAAAACAGf+XRDf8SAAAAACAGf+2pDf8SBAAAADkGb4EmoQWyZTAgh//7hAAAACkGeHkUVLD//voAAAAAIAZ49dEN/xIAAAAAIAZ4/akN/xIEAAAAOQZokSahBbJlMCCH//uAAAAAKQZ5CRRUsP/++gQAAAAgBnmF0Q3/EgAAAAAgBnmNqQ3/EgQAAAA5BmmhJqEFsmUwIIf/+4QAAAApBnoZFFSw//76BAAAACAGepXRDf8SBAAAACAGep2pDf8SAAAAADkGarEmoQWyZTAgh//7gAAAACkGeykUVLD//voEAAAAIAZ7pdEN/xIAAAAAIAZ7rakN/xIAAAAAPQZruSahBbJlMFEw3//7B");e.play()}};this.release=function(){e.pause();e.src=""}}function a(){var e=null;this.request=function(){if(!e){e=setInterval(function(){window.location=window.location;setTimeout(window.stop,0)},3e4)}};this.release=function(){if(e){clearInterval(e);e=null}}}function o(){var e=navigator.userAgent||navigator.vendor||window.opera;if(e.match(/iPhone/i)||e.match(/iPod/i)){return a}else{return n}}t.exports=o()},{"./util.js":22}],25:[function(e,t,r){var i=e("./util.js");var n=e("./cardboard-vr-display.js");var a=e("./mouse-keyboard-vr-display.js");var o=e("./base.js").VRDisplay;var s=e("./base.js").VRFrameData;var u=e("./base.js").HMDVRDevice;var c=e("./base.js").PositionSensorVRDevice;var f=e("./display-wrappers.js").VRDisplayHMDDevice;var l=e("./display-wrappers.js").VRDisplayPositionSensorDevice;function d(){this.displays=[];this.devices=[];this.devicesPopulated=false;this.nativeWebVRAvailable=this.isWebVRAvailable();this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable();if(!this.nativeLegacyWebVRAvailable){if(!this.nativeWebVRAvailable){this.enablePolyfill()}if(WebVRConfig.ENABLE_DEPRECATED_API){this.enableDeprecatedPolyfill()}}h()}d.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator};d.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator};d.prototype.populateDevices=function(){if(this.devicesPopulated){return}var e=null;if(this.isCardboardCompatible()){e=new n;this.displays.push(e);if(WebVRConfig.ENABLE_DEPRECATED_API){this.devices.push(new f(e));this.devices.push(new l(e))}}if(!this.isMobile()&&!WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED){e=new a;this.displays.push(e);if(WebVRConfig.ENABLE_DEPRECATED_API){this.devices.push(new f(e));this.devices.push(new l(e))}}this.devicesPopulated=true};d.prototype.enablePolyfill=function(){navigator.getVRDisplays=this.getVRDisplays.bind(this);window.VRDisplay=o;var e=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return e.isCardboardCompatible()&&(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||false)}});window.VRFrameData=s};d.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this);window.HMDVRDevice=u;window.PositionSensorVRDevice=c};d.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;return new Promise(function(t,r){try{t(e)}catch(e){r(e)}})};d.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,r){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable){return navigator.getVRDisplays(function(r){for(var i=0;i<r.length;++i){e.devices.push(new f(r[i]));e.devices.push(new l(r[i]))}e.devicesPopulated=true;t(e.devices)},r)}if(e.nativeLegacyWebVRAvailable){return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(r){for(var i=0;i<r.length;++i){if(r[i]instanceof u){e.devices.push(r[i])}if(r[i]instanceof c){e.devices.push(r[i])}}e.devicesPopulated=true;t(e.devices)},r)}}e.populateDevices();t(e.devices)}catch(e){r(e)}})};d.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)};d.prototype.isCardboardCompatible=function(){return this.isMobile()||WebVRConfig.FORCE_ENABLE_VR};function h(){if("VRDisplay"in window&&!("VRFrameData"in window)){window.VRFrameData=s;if(!("depthNear"in window.VRDisplay.prototype)){window.VRDisplay.prototype.depthNear=.01}if(!("depthFar"in window.VRDisplay.prototype)){window.VRDisplay.prototype.depthFar=1e4}window.VRDisplay.prototype.getFrameData=function(e){return i.frameDataFromPose(e,this.getPose(),this)}}}t.exports.WebVRPolyfill=d},{"./base.js":2,"./cardboard-vr-display.js":5,"./display-wrappers.js":8,"./mouse-keyboard-vr-display.js":15,"./util.js":22}]},{},[13]);return r.exports});(function(){var t=e.amdDefine;t("3",["exports","4"],function(e,t){"use strict";Number.isNaN=Number.isNaN||function(e){return e!==e};Number.isFinite=Number.isFinite||function(e){return typeof e==="number"&&isFinite(e)};if(!String.prototype.endsWith){String.prototype.endsWith=function(e,t){var r=this.toString();if(typeof t!=="number"||!isFinite(t)||Math.floor(t)!==t||t>r.length){t=r.length}t-=e.length;var i=r.indexOf(e,t);return i!==-1&&i===t}}if(!String.prototype.startsWith){String.prototype.startsWith=function(e,t){t=t||0;return this.substr(t,e.length)===e}}if(!Array.from){Array.from=function(){var e=Object.prototype.toString;var t=function t(r){return typeof r==="function"||e.call(r)==="[object Function]"};var r=function e(t){var r=Number(t);if(isNaN(r)){return 0}if(r===0||!isFinite(r)){return r}return(r>0?1:-1)*Math.floor(Math.abs(r))};var i=Math.pow(2,53)-1;var n=function e(t){var n=r(t);return Math.min(Math.max(n,0),i)};return function e(r){var i=this;var a=Object(r);if(r==null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var o=arguments.length>1?arguments[1]:void undefined;var s;if(typeof o!=="undefined"){if(!t(o)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){s=arguments[2]}}var u=n(a.length);var c=t(i)?Object(new i(u)):new Array(u);var f=0;var l;while(f<u){l=a[f];if(o){c[f]=typeof s==="undefined"?o(l,f):o.call(s,l,f)}else{c[f]=l}f+=1}c.length=u;return c}}()}if(!Array.prototype.find){Array.prototype.find=function(e){if(this===null){throw new TypeError("Array.prototype.find called on null or undefined")}if(typeof e!=="function"){throw new TypeError("predicate must be a function")}var t=Object(this);var r=t.length>>>0;var i=arguments[1];var n;for(var a=0;a<r;a++){n=t[a];if(e.call(i,n,a,t)){return n}}return undefined}}if(!Array.prototype.findIndex){Array.prototype.findIndex=function(e){if(this===null){throw new TypeError("Array.prototype.findIndex called on null or undefined")}if(typeof e!=="function"){throw new TypeError("predicate must be a function")}var t=Object(this);var r=t.length>>>0;var i=arguments[1];var n;for(var a=0;a<r;a++){n=t[a];if(e.call(i,n,a,t)){return a}}return-1}}if(!Array.prototype.includes){Array.prototype.includes=function(e){var t=Object(this);var r=parseInt(t.length)||0;if(r===0){return false}var i=parseInt(arguments[1])||0;var n;if(i>=0){n=i}else{n=r+i;if(n<0){n=0}}var a;while(n<r){a=t[n];if(e===a||e!==e&&a!==a){return true}n++}return false}}if(typeof Object.assign!=="function"){Object.assign=function(e){if(e===undefined||e===null){throw new TypeError("Cannot convert undefined or null to object")}var t=Object(e);for(var r=1;r<arguments.length;r++){var i=arguments[r];if(i!==undefined&&i!==null){for(var n in i){if(i.hasOwnProperty(n)){t[n]=i[n]}}}}return t}}(function(e){var t=undefined;var r=Object.defineProperty;var i=function e(t,r){return t===r||t!==t&&r!==r};if(typeof Map=="undefined"||typeof(new Map).values!=="function"||!(new Map).values().next){
e.Map=n({delete:o,has:f,get:s,set:l,keys:v,values:M,entries:p,forEach:A,clear:h})}if(typeof Set=="undefined"||typeof(new Set).values!=="function"||!(new Set).values().next){e.Set=n({has:c,add:d,delete:o,clear:h,keys:M,values:M,entries:g,forEach:A})}function n(e,t){function i(e){if(!this||this.constructor!==i)return new i(e);this._keys=[];this._values=[];this._itp=[];this.objectOnly=t;if(e)a.call(this,e)}if(!t){r(e,"size",{get:y})}e.constructor=i;i.prototype=e;return i}function a(e){var t;if(this.add)e.forEach(this.add,this);else e.forEach(function(e){this.set(e[0],e[1])},this)}function o(e){if(this.has(e)){this._keys.splice(t,1);this._values.splice(t,1);this._itp.forEach(function(e){if(t<e[0])e[0]--})}return-1<t}function s(e){return this.has(e)?this._values[t]:undefined}function u(e,r){if(this.objectOnly&&r!==Object(r))throw new TypeError("Invalid value used as weak collection key");if(r!=r||r===0)for(t=e.length;t--&&!i(e[t],r);){}else t=e.indexOf(r);return-1<t}function c(e){return u.call(this,this._values,e)}function f(e){return u.call(this,this._keys,e)}function l(e,r){this.has(e)?this._values[t]=r:this._values[this._keys.push(e)-1]=r;return this}function d(e){if(!this.has(e))this._values.push(e);return this}function h(){(this._keys||0).length=this._values.length=0}function v(){return w(this._itp,this._keys)}function M(){return w(this._itp,this._values)}function p(){return w(this._itp,this._keys,this._values)}function g(){return w(this._itp,this._values,this._values)}function w(e,t,r){var i=[0],n=false;e.push(i);return{next:function a(){var o,s=i[0];if(!n&&s<t.length){o=r?[t[s],r[s]]:t[s];i[0]++}else{n=true;e.splice(e.indexOf(i),1)}return{done:n,value:o}}}}function y(){return this._values.length}function A(e,t){var r=this.entries();for(;;){var i=r.next();if(i.done)break;e.call(t,i.value[1],i.value[0],this)}}})(t.PLATFORM.global);var r=Object.freeze({});var i="__metadata__";var n=Function.prototype.bind;if(typeof t.PLATFORM.global.Reflect==="undefined"){t.PLATFORM.global.Reflect={}}if(typeof Reflect.getOwnMetadata!=="function"){Reflect.getOwnMetadata=function(e,t,n){return((t[i]||r)[n]||r)[e]}}if(typeof Reflect.defineMetadata!=="function"){Reflect.defineMetadata=function(e,t,r,n){var a=r.hasOwnProperty(i)?r[i]:r[i]={};var o=a[n]||(a[n]={});o[e]=t}}if(typeof Reflect.metadata!=="function"){Reflect.metadata=function(e,t){return function(r,i){Reflect.defineMetadata(e,t,r,i)}}}if(typeof Reflect.construct!=="function"){Reflect.construct=function(e,t){if(t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}}var r=[null];r.push.apply(r,t);return new(n.apply(e,r))}}})})();(function(){var t=e.amdDefine;(function(e){var n=typeof r=="object"&&r&&!r.nodeType&&r;var a=typeof i=="object"&&i&&!i.nodeType&&i;var o=typeof global=="object"&&global;if(o.global===o||o.window===o||o.self===o){e=o}var s,u=2147483647,c=36,f=1,l=26,d=38,h=700,v=72,M=128,p="-",g=/^xn--/,w=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=c-f,D=Math.floor,N=String.fromCharCode,E;function I(e){throw new RangeError(A[e])}function T(e,t){var r=e.length;var i=[];while(r--){i[r]=t(e[r])}return i}function L(e,t){var r=e.split("@");var i="";if(r.length>1){i=r[0]+"@";e=r[1]}e=e.replace(y,".");var n=e.split(".");var a=T(n,t).join(".");return i+a}function j(e){var t=[],r=0,i=e.length,n,a;while(r<i){n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){a=e.charCodeAt(r++);if((a&64512)==56320){t.push(((n&1023)<<10)+(a&1023)+65536)}else{t.push(n);r--}}else{t.push(n)}}return t}function x(e){return T(e,function(e){var t="";if(e>65535){e-=65536;t+=N(e>>>10&1023|55296);e=56320|e&1023}t+=N(e);return t}).join("")}function S(e){if(e-48<10){return e-22}if(e-65<26){return e-65}if(e-97<26){return e-97}return c}function O(e,t){return e+22+75*(e<26)-((t!=0)<<5)}function C(e,t,r){var i=0;e=r?D(e/h):e>>1;e+=D(e/t);for(;e>m*l>>1;i+=c){e=D(e/m)}return D(i+(m+1)*e/(e+d))}function z(e){var t=[],r=e.length,i,n=0,a=M,o=v,s,d,h,g,w,y,A,m,N;s=e.lastIndexOf(p);if(s<0){s=0}for(d=0;d<s;++d){if(e.charCodeAt(d)>=128){I("not-basic")}t.push(e.charCodeAt(d))}for(h=s>0?s+1:0;h<r;){for(g=n,w=1,y=c;;y+=c){if(h>=r){I("invalid-input")}A=S(e.charCodeAt(h++));if(A>=c||A>D((u-n)/w)){I("overflow")}n+=A*w;m=y<=o?f:y>=o+l?l:y-o;if(A<m){break}N=c-m;if(w>D(u/N)){I("overflow")}w*=N}i=t.length+1;o=C(n-g,i,g==0);if(D(n/i)>u-a){I("overflow")}a+=D(n/i);n%=i;t.splice(n++,0,a)}return x(t)}function _(e){var t,r,i,n,a,o,s,d,h,g,w,y=[],A,m,E,T;e=j(e);A=e.length;t=M;r=0;a=v;for(o=0;o<A;++o){w=e[o];if(w<128){y.push(N(w))}}i=n=y.length;if(n){y.push(p)}while(i<A){for(s=u,o=0;o<A;++o){w=e[o];if(w>=t&&w<s){s=w}}m=i+1;if(s-t>D((u-r)/m)){I("overflow")}r+=(s-t)*m;t=s;for(o=0;o<A;++o){w=e[o];if(w<t&&++r>u){I("overflow")}if(w==t){for(d=r,h=c;;h+=c){g=h<=a?f:h>=a+l?l:h-a;if(d<g){break}T=d-g;E=c-g;y.push(N(O(g+T%E,0)));d=D(T/E)}y.push(N(O(d,0)));a=C(r,m,i==n);r=0;++i}}++r;++t}return y.join("")}function b(e){return L(e,function(e){return g.test(e)?z(e.slice(4).toLowerCase()):e})}function k(e){return L(e,function(e){return w.test(e)?"xn--"+_(e):e})}s={version:"1.3.2",ucs2:{decode:j,encode:x},decode:z,encode:_,toASCII:k,toUnicode:b};if(typeof t=="function"&&typeof t.amd=="object"&&t.amd){t("5",[],function(){return s})&&t("punycode",["5"],function(e){return e})}else if(n&&a){if(i.exports==n){a.exports=s}else{for(E in s){s.hasOwnProperty(E)&&(n[E]=s[E])}}}else{e.punycode=s}})(this)})();(function(){var t=e.amdDefine;(function(e,n){"use strict";if(typeof r==="object"){i.exports=n()}else if(typeof t==="function"&&t.amd){t("6",[],n)}else{e.IPv6=n(e)}})(this,function(e){"use strict";var t=e&&e.IPv6;function r(e){var t=e.toLowerCase();var r=t.split(":");var i=r.length;var n=8;if(r[0]===""&&r[1]===""&&r[2]===""){r.shift();r.shift()}else if(r[0]===""&&r[1]===""){r.shift()}else if(r[i-1]===""&&r[i-2]===""){r.pop()}i=r.length;if(r[i-1].indexOf(".")!==-1){n=7}var a;for(a=0;a<i;a++){if(r[a]===""){break}}if(a<n){r.splice(a,1,"0000");while(r.length<n){r.splice(a,0,"0000")}}var o;for(var s=0;s<n;s++){o=r[s].split("");for(var u=0;u<3;u++){if(o[0]==="0"&&o.length>1){o.splice(0,1)}else{break}}r[s]=o.join("")}var c=-1;var f=0;var l=0;var d=-1;var h=false;for(s=0;s<n;s++){if(h){if(r[s]==="0"){l+=1}else{h=false;if(l>f){c=d;f=l}}}else{if(r[s]==="0"){h=true;d=s;l=1}}}if(l>f){c=d;f=l}if(f>1){r.splice(c,f,"")}i=r.length;var v="";if(r[0]===""){v=":"}for(s=0;s<i;s++){v+=r[s];if(s===i-1){break}v+=":"}if(r[i-1]===""){v+=":"}return v}function i(){if(e.IPv6===this){e.IPv6=t}return this}return{best:r,noConflict:i}})})();(function(){var t=e.amdDefine;(function(e,n){"use strict";if(typeof r==="object"){i.exports=n()}else if(typeof t==="function"&&t.amd){t("7",[],n)}else{e.SecondLevelDomains=n(e)}})(this,function(e){"use strict";var t=e&&e.SecondLevelDomains;var r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1){return false}var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1){return false}var n=r.list[e.slice(t+1)];if(!n){return false}return n.indexOf(" "+e.slice(i+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1){return false}var i=e.lastIndexOf(".",t-1);if(i>=0){return false}var n=r.list[e.slice(t+1)];if(!n){return false}return n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1){return null}var i=e.lastIndexOf(".",t-1);if(i<=0||i>=t-1){return null}var n=r.list[e.slice(t+1)];if(!n){return null}if(n.indexOf(" "+e.slice(i+1,t)+" ")<0){return null}return e.slice(i+1)},noConflict:function(){if(e.SecondLevelDomains===this){e.SecondLevelDomains=t}return this}};return r})})();(function(){var n=e.amdDefine;(function(e,a){"use strict";if(typeof r==="object"){i.exports=a(t("./punycode"),t("./IPv6"),t("./SecondLevelDomains"))}else if(typeof n==="function"&&n.amd){n("8",["5","6","7"],a)}else{e.URI=a(e.punycode,e.IPv6,e.SecondLevelDomains,e)}})(this,function(e,t,r,i){"use strict";var n=i&&i.URI;function a(e,t){var r=arguments.length>=1;var i=arguments.length>=2;if(!(this instanceof a)){if(r){if(i){return new a(e,t)}return new a(e)}return new a}if(e===undefined){if(r){throw new TypeError("undefined is not a valid argument for URI")}if(typeof location!=="undefined"){e=location.href+""}else{e=""}}this.href(e);if(t!==undefined){return this.absoluteTo(t)}return this}a.version="1.18.1";var o=a.prototype;var s=Object.prototype.hasOwnProperty;function u(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(e){if(e===undefined){return"Undefined"}return String(Object.prototype.toString.call(e)).slice(8,-1)}function f(e){return c(e)==="Array"}function l(e,t){var r={};var i,n;if(c(t)==="RegExp"){r=null}else if(f(t)){for(i=0,n=t.length;i<n;i++){r[t[i]]=true}}else{r[t]=true}for(i=0,n=e.length;i<n;i++){var a=r&&r[e[i]]!==undefined||!r&&t.test(e[i]);if(a){e.splice(i,1);n--;i--}}return e}function d(e,t){var r,i;if(f(t)){for(r=0,i=t.length;r<i;r++){if(!d(e,t[r])){return false}}return true}var n=c(t);for(r=0,i=e.length;r<i;r++){if(n==="RegExp"){if(typeof e[r]==="string"&&e[r].match(t)){return true}}else if(e[r]===t){return true}}return false}function h(e,t){if(!f(e)||!f(t)){return false}if(e.length!==t.length){return false}e.sort();t.sort();for(var r=0,i=e.length;r<i;r++){if(e[r]!==t[r]){return false}}return true}function v(e){var t=/^\/+|\/+$/g;return e.replace(t,"")}a._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:a.duplicateQueryParameters,escapeQuerySpace:a.escapeQuerySpace}};a.duplicateQueryParameters=false;a.escapeQuerySpace=true;a.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;a.idn_expression=/[^a-z0-9\.-]/i;a.punycode_expression=/(xn--)/i;a.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;a.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;a.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/gi;a.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/};a.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};a.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;a.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};a.getDomAttribute=function(e){if(!e||!e.nodeName){return undefined}var t=e.nodeName.toLowerCase();if(t==="input"&&e.type!=="image"){return undefined}return a.domAttributes[t]};function M(e){return escape(e)}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,M).replace(/\*/g,"%2A")}a.encode=p;a.decode=decodeURIComponent;a.iso8859=function(){a.encode=escape;a.decode=unescape};a.unicode=function(){a.encode=p;a.decode=decodeURIComponent};a.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}};a.encodeQuery=function(e,t){var r=a.encode(e+"");if(t===undefined){t=a.escapeQuerySpace}return t?r.replace(/%20/g,"+"):r};a.decodeQuery=function(e,t){e+="";if(t===undefined){t=a.escapeQuerySpace}try{return a.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var g={encode:"encode",decode:"decode"};var w;var y=function(e,t){return function(r){try{return a[t](r+"").replace(a.characters[e][t].expression,function(r){return a.characters[e][t].map[r]})}catch(e){return r}}};for(w in g){a[w+"PathSegment"]=y("pathname",g[w]);a[w+"UrnPathSegment"]=y("urnpath",g[w])}var A=function(e,t,r){return function(i){var n;if(!r){n=a[t]}else{n=function(e){return a[t](a[r](e))}}var o=(i+"").split(e);for(var s=0,u=o.length;s<u;s++){o[s]=n(o[s])}return o.join(e)}};a.decodePath=A("/","decodePathSegment");a.decodeUrnPath=A(":","decodeUrnPathSegment");a.recodePath=A("/","encodePathSegment","decode");a.recodeUrnPath=A(":","encodeUrnPathSegment","decode");a.encodeReserved=y("reserved","encode");a.parse=function(e,t){var r;if(!t){t={}}r=e.indexOf("#");if(r>-1){t.fragment=e.substring(r+1)||null;e=e.substring(0,r)}r=e.indexOf("?");if(r>-1){t.query=e.substring(r+1)||null;e=e.substring(0,r)}if(e.substring(0,2)==="//"){t.protocol=null;e=e.substring(2);e=a.parseAuthority(e,t)}else{r=e.indexOf(":");if(r>-1){t.protocol=e.substring(0,r)||null;if(t.protocol&&!t.protocol.match(a.protocol_expression)){t.protocol=undefined}else if(e.substring(r+1,r+3)==="//"){e=e.substring(r+3);e=a.parseAuthority(e,t)}else{e=e.substring(r+1);t.urn=true}}}t.path=e;return t};a.parseHost=function(e,t){e=e.replace(/\\/g,"/");var r=e.indexOf("/");var i;var n;if(r===-1){r=e.length}if(e.charAt(0)==="["){i=e.indexOf("]");t.hostname=e.substring(1,i)||null;t.port=e.substring(i+2,r)||null;if(t.port==="/"){t.port=null}}else{var a=e.indexOf(":");var o=e.indexOf("/");var s=e.indexOf(":",a+1);if(s!==-1&&(o===-1||s<o)){t.hostname=e.substring(0,r)||null;t.port=null}else{n=e.substring(0,r).split(":");t.hostname=n[0]||null;t.port=n[1]||null}}if(t.hostname&&e.substring(r).charAt(0)!=="/"){r++;e="/"+e}return e.substring(r)||"/"};a.parseAuthority=function(e,t){e=a.parseUserinfo(e,t);return a.parseHost(e,t)};a.parseUserinfo=function(e,t){var r=e.indexOf("/");var i=e.lastIndexOf("@",r>-1?r:e.length-1);var n;if(i>-1&&(r===-1||i<r)){n=e.substring(0,i).split(":");t.username=n[0]?a.decode(n[0]):null;n.shift();t.password=n[0]?a.decode(n.join(":")):null;e=e.substring(i+1)}else{t.username=null;t.password=null}return e};a.parseQuery=function(e,t){if(!e){return{}}e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!e){return{}}var r={};var i=e.split("&");var n=i.length;var o,u,c;for(var f=0;f<n;f++){o=i[f].split("=");u=a.decodeQuery(o.shift(),t);c=o.length?a.decodeQuery(o.join("="),t):null;if(s.call(r,u)){if(typeof r[u]==="string"||r[u]===null){r[u]=[r[u]]}r[u].push(c)}else{r[u]=c}}return r};a.build=function(e){var t="";if(e.protocol){t+=e.protocol+":"}if(!e.urn&&(t||e.hostname)){t+="//"}t+=a.buildAuthority(e)||"";if(typeof e.path==="string"){if(e.path.charAt(0)!=="/"&&typeof e.hostname==="string"){t+="/"}t+=e.path}if(typeof e.query==="string"&&e.query){t+="?"+e.query}if(typeof e.fragment==="string"&&e.fragment){t+="#"+e.fragment}return t};a.buildHost=function(e){var t="";if(!e.hostname){return""}else if(a.ip6_expression.test(e.hostname)){t+="["+e.hostname+"]"}else{t+=e.hostname}if(e.port){t+=":"+e.port}return t};a.buildAuthority=function(e){return a.buildUserinfo(e)+a.buildHost(e)};a.buildUserinfo=function(e){var t="";if(e.username){t+=a.encode(e.username)}if(e.password){t+=":"+a.encode(e.password)}if(t){t+="@"}return t};a.buildQuery=function(e,t,r){var i="";var n,o,u,c;for(o in e){if(s.call(e,o)&&o){if(f(e[o])){n={};for(u=0,c=e[o].length;u<c;u++){if(e[o][u]!==undefined&&n[e[o][u]+""]===undefined){i+="&"+a.buildQueryParameter(o,e[o][u],r);if(t!==true){n[e[o][u]+""]=true}}}}else if(e[o]!==undefined){i+="&"+a.buildQueryParameter(o,e[o],r)}}}return i.substring(1)};a.buildQueryParameter=function(e,t,r){return a.encodeQuery(e,r)+(t!==null?"="+a.encodeQuery(t,r):"")};a.addQuery=function(e,t,r){if(typeof t==="object"){for(var i in t){if(s.call(t,i)){a.addQuery(e,i,t[i])}}}else if(typeof t==="string"){if(e[t]===undefined){e[t]=r;return}else if(typeof e[t]==="string"){e[t]=[e[t]]}if(!f(r)){r=[r]}e[t]=(e[t]||[]).concat(r)}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}};a.removeQuery=function(e,t,r){var i,n,o;if(f(t)){for(i=0,n=t.length;i<n;i++){e[t[i]]=undefined}}else if(c(t)==="RegExp"){for(o in e){if(t.test(o)){e[o]=undefined}}}else if(typeof t==="object"){for(o in t){if(s.call(t,o)){a.removeQuery(e,o,t[o])}}}else if(typeof t==="string"){if(r!==undefined){if(c(r)==="RegExp"){if(!f(e[t])&&r.test(e[t])){e[t]=undefined}else{e[t]=l(e[t],r)}}else if(e[t]===String(r)&&(!f(r)||r.length===1)){e[t]=undefined}else if(f(e[t])){e[t]=l(e[t],r)}}else{e[t]=undefined}}else{throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")}};a.hasQuery=function(e,t,r,i){switch(c(t)){case"String":break;case"RegExp":for(var n in e){if(s.call(e,n)){if(t.test(n)&&(r===undefined||a.hasQuery(e,n,r))){return true}}}return false;case"Object":for(var o in t){if(s.call(t,o)){if(!a.hasQuery(e,o,t[o])){return false}}}return true;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(r)){case"Undefined":return t in e;case"Boolean":var u=Boolean(f(e[t])?e[t].length:e[t]);return r===u;case"Function":return!!r(e[t],t,e);case"Array":if(!f(e[t])){return false}var l=i?d:h;return l(e[t],r);case"RegExp":if(!f(e[t])){return Boolean(e[t]&&e[t].match(r))}if(!i){return false}return d(e[t],r);case"Number":r=String(r);case"String":if(!f(e[t])){return e[t]===r}if(!i){return false}return d(e[t],r);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}};a.joinPaths=function(){var e=[];var t=[];var r=0;for(var i=0;i<arguments.length;i++){var n=new a(arguments[i]);e.push(n);var o=n.segment();for(var s=0;s<o.length;s++){if(typeof o[s]==="string"){t.push(o[s])}if(o[s]){r++}}}if(!t.length||!r){return new a("")}var u=new a("").segment(t);if(e[0].path()===""||e[0].path().slice(0,1)==="/"){u.path("/"+u.path())}return u.normalize()};a.commonPath=function(e,t){var r=Math.min(e.length,t.length);var i;for(i=0;i<r;i++){if(e.charAt(i)!==t.charAt(i)){i--;break}}if(i<1){return e.charAt(0)===t.charAt(0)&&e.charAt(0)==="/"?"/":""}if(e.charAt(i)!=="/"||t.charAt(i)!=="/"){i=e.substring(0,i).lastIndexOf("/")}return e.substring(0,i+1)};a.withinString=function(e,t,r){r||(r={});var i=r.start||a.findUri.start;var n=r.end||a.findUri.end;var o=r.trim||a.findUri.trim;var s=/[a-z0-9-]=["']?$/i;i.lastIndex=0;while(true){var u=i.exec(e);if(!u){break}var c=u.index;if(r.ignoreHtml){var f=e.slice(Math.max(c-3,0),c);if(f&&s.test(f)){continue}}var l=c+e.slice(c).search(n);var d=e.slice(c,l).replace(o,"");if(r.ignore&&r.ignore.test(d)){continue}l=c+d.length;var h=t(d,c,l,e);e=e.slice(0,c)+h+e.slice(l);i.lastIndex=c+h.length}i.lastIndex=0;return e};a.ensureValidHostname=function(t){if(t.match(a.invalid_hostname_characters)){if(!e){throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available')}if(e.toASCII(t).match(a.invalid_hostname_characters)){throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]')}}};a.noConflict=function(e){if(e){var t={URI:this.noConflict()};if(i.URITemplate&&typeof i.URITemplate.noConflict==="function"){t.URITemplate=i.URITemplate.noConflict()}if(i.IPv6&&typeof i.IPv6.noConflict==="function"){t.IPv6=i.IPv6.noConflict()}if(i.SecondLevelDomains&&typeof i.SecondLevelDomains.noConflict==="function"){t.SecondLevelDomains=i.SecondLevelDomains.noConflict()}return t}else if(i.URI===this){i.URI=n}return this};o.build=function(e){if(e===true){this._deferred_build=true}else if(e===undefined||this._deferred_build){this._string=a.build(this._parts);this._deferred_build=false}return this};o.clone=function(){return new a(this)};o.valueOf=o.toString=function(){return this.build(false)._string};function m(e){return function(t,r){if(t===undefined){return this._parts[e]||""}else{this._parts[e]=t||null;this.build(!r);return this}}}function D(e,t){return function(r,i){if(r===undefined){return this._parts[e]||""}else{if(r!==null){r=r+"";if(r.charAt(0)===t){r=r.substring(1)}}this._parts[e]=r;this.build(!i);return this}}}o.protocol=m("protocol");o.username=m("username");o.password=m("password");o.hostname=m("hostname");o.port=m("port");o.query=D("query","?");o.fragment=D("fragment","#");o.search=function(e,t){var r=this.query(e,t);return typeof r==="string"&&r.length?"?"+r:r};o.hash=function(e,t){var r=this.fragment(e,t);return typeof r==="string"&&r.length?"#"+r:r};o.pathname=function(e,t){if(e===undefined||e===true){var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?a.decodeUrnPath:a.decodePath)(r):r}else{if(this._parts.urn){this._parts.path=e?a.recodeUrnPath(e):""}else{this._parts.path=e?a.recodePath(e):"/"}this.build(!t);return this}};o.path=o.pathname;o.href=function(e,t){var r;if(e===undefined){return this.toString()}this._string="";this._parts=a._parts();var i=e instanceof a;var n=typeof e==="object"&&(e.hostname||e.path||e.pathname);if(e.nodeName){var o=a.getDomAttribute(e);e=e[o]||"";n=false}if(!i&&n&&e.pathname!==undefined){e=e.toString()}if(typeof e==="string"||e instanceof String){this._parts=a.parse(String(e),this._parts)}else if(i||n){var u=i?e._parts:e;for(r in u){if(s.call(this._parts,r)){this._parts[r]=u[r]}}}else{throw new TypeError("invalid input")}this.build(!t);return this};o.is=function(e){var t=false;var i=false;var n=false;var o=false;var s=false;var u=false;var c=false;var f=!this._parts.urn;if(this._parts.hostname){f=false;i=a.ip4_expression.test(this._parts.hostname);n=a.ip6_expression.test(this._parts.hostname);t=i||n;o=!t;s=o&&r&&r.has(this._parts.hostname);u=o&&a.idn_expression.test(this._parts.hostname);c=o&&a.punycode_expression.test(this._parts.hostname)}switch(e.toLowerCase()){case"relative":return f;case"absolute":return!f;case"domain":case"name":return o;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return n;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var N=o.protocol;var E=o.port;var I=o.hostname;o.protocol=function(e,t){if(e!==undefined){if(e){e=e.replace(/:(\/\/)?$/,"");if(!e.match(a.protocol_expression)){throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]")}}}return N.call(this,e,t)};o.scheme=o.protocol;o.port=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e!==undefined){if(e===0){e=null}if(e){e+="";if(e.charAt(0)===":"){e=e.substring(1)}if(e.match(/[^0-9]/)){throw new TypeError('Port "'+e+'" contains characters other than [0-9]')}}}return E.call(this,e,t)};o.hostname=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e!==undefined){var r={};var i=a.parseHost(e,r);if(i!=="/"){throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}e=r.hostname}return I.call(this,e,t)};o.origin=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){var r=this.protocol();var i=this.authority();if(!i){return""}return(r?r+"://":"")+this.authority()}else{var n=a(e);this.protocol(n.protocol()).authority(n.authority()).build(!t);return this}};o.host=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){return this._parts.hostname?a.buildHost(this._parts):""}else{var r=a.parseHost(e,this._parts);
if(r!=="/"){throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}this.build(!t);return this}};o.authority=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){return this._parts.hostname?a.buildAuthority(this._parts):""}else{var r=a.parseAuthority(e,this._parts);if(r!=="/"){throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]')}this.build(!t);return this}};o.userinfo=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){var r=a.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}else{if(e[e.length-1]!=="@"){e+="@"}a.parseUserinfo(e,this._parts);this.build(!t);return this}};o.resource=function(e,t){var r;if(e===undefined){return this.path()+this.search()+this.hash()}r=a.parse(e);this._parts.path=r.path;this._parts.query=r.query;this._parts.fragment=r.fragment;this.build(!t);return this};o.subdomain=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined){if(!this._parts.hostname||this.is("IP")){return""}var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}else{var i=this._parts.hostname.length-this.domain().length;var n=this._parts.hostname.substring(0,i);var o=new RegExp("^"+u(n));if(e&&e.charAt(e.length-1)!=="."){e+="."}if(e){a.ensureValidHostname(e)}this._parts.hostname=this._parts.hostname.replace(o,e);this.build(!t);return this}};o.domain=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(typeof e==="boolean"){t=e;e=undefined}if(e===undefined){if(!this._parts.hostname||this.is("IP")){return""}var r=this._parts.hostname.match(/\./g);if(r&&r.length<2){return this._parts.hostname}var i=this._parts.hostname.length-this.tld(t).length-1;i=this._parts.hostname.lastIndexOf(".",i-1)+1;return this._parts.hostname.substring(i)||""}else{if(!e){throw new TypeError("cannot set domain empty")}a.ensureValidHostname(e);if(!this._parts.hostname||this.is("IP")){this._parts.hostname=e}else{var n=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(n,e)}this.build(!t);return this}};o.tld=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(typeof e==="boolean"){t=e;e=undefined}if(e===undefined){if(!this._parts.hostname||this.is("IP")){return""}var i=this._parts.hostname.lastIndexOf(".");var n=this._parts.hostname.substring(i+1);if(t!==true&&r&&r.list[n.toLowerCase()]){return r.get(this._parts.hostname)||n}return n}else{var a;if(!e){throw new TypeError("cannot set TLD empty")}else if(e.match(/[^a-zA-Z0-9-]/)){if(r&&r.is(e)){a=new RegExp(u(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}else{throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]')}}else if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host")}else{a=new RegExp(u(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}this.build(!t);return this}};o.directory=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined||e===true){if(!this._parts.path&&!this._parts.hostname){return""}if(this._parts.path==="/"){return"/"}var r=this._parts.path.length-this.filename().length-1;var i=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?a.decodePath(i):i}else{var n=this._parts.path.length-this.filename().length;var o=this._parts.path.substring(0,n);var s=new RegExp("^"+u(o));if(!this.is("relative")){if(!e){e="/"}if(e.charAt(0)!=="/"){e="/"+e}}if(e&&e.charAt(e.length-1)!=="/"){e+="/"}e=a.recodePath(e);this._parts.path=this._parts.path.replace(s,e);this.build(!t);return this}};o.filename=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined||e===true){if(!this._parts.path||this._parts.path==="/"){return""}var r=this._parts.path.lastIndexOf("/");var i=this._parts.path.substring(r+1);return e?a.decodePathSegment(i):i}else{var n=false;if(e.charAt(0)==="/"){e=e.substring(1)}if(e.match(/\.?\//)){n=true}var o=new RegExp(u(this.filename())+"$");e=a.recodePath(e);this._parts.path=this._parts.path.replace(o,e);if(n){this.normalizePath(t)}else{this.build(!t)}return this}};o.suffix=function(e,t){if(this._parts.urn){return e===undefined?"":this}if(e===undefined||e===true){if(!this._parts.path||this._parts.path==="/"){return""}var r=this.filename();var i=r.lastIndexOf(".");var n,o;if(i===-1){return""}n=r.substring(i+1);o=/^[a-z0-9%]+$/i.test(n)?n:"";return e?a.decodePathSegment(o):o}else{if(e.charAt(0)==="."){e=e.substring(1)}var s=this.suffix();var c;if(!s){if(!e){return this}this._parts.path+="."+a.recodePath(e)}else if(!e){c=new RegExp(u("."+s)+"$")}else{c=new RegExp(u(s)+"$")}if(c){e=a.recodePath(e);this._parts.path=this._parts.path.replace(c,e)}this.build(!t);return this}};o.segment=function(e,t,r){var i=this._parts.urn?":":"/";var n=this.path();var a=n.substring(0,1)==="/";var o=n.split(i);if(e!==undefined&&typeof e!=="number"){r=t;t=e;e=undefined}if(e!==undefined&&typeof e!=="number"){throw new Error('Bad segment "'+e+'", must be 0-based integer')}if(a){o.shift()}if(e<0){e=Math.max(o.length+e,0)}if(t===undefined){return e===undefined?o:o[e]}else if(e===null||o[e]===undefined){if(f(t)){o=[];for(var s=0,u=t.length;s<u;s++){if(!t[s].length&&(!o.length||!o[o.length-1].length)){continue}if(o.length&&!o[o.length-1].length){o.pop()}o.push(v(t[s]))}}else if(t||typeof t==="string"){t=v(t);if(o[o.length-1]===""){o[o.length-1]=t}else{o.push(t)}}}else{if(t){o[e]=v(t)}else{o.splice(e,1)}}if(a){o.unshift("")}return this.path(o.join(i),r)};o.segmentCoded=function(e,t,r){var i,n,o;if(typeof e!=="number"){r=t;t=e;e=undefined}if(t===undefined){i=this.segment(e,t,r);if(!f(i)){i=i!==undefined?a.decode(i):undefined}else{for(n=0,o=i.length;n<o;n++){i[n]=a.decode(i[n])}}return i}if(!f(t)){t=typeof t==="string"||t instanceof String?a.encode(t):t}else{for(n=0,o=t.length;n<o;n++){t[n]=a.encode(t[n])}}return this.segment(e,t,r)};var T=o.query;o.query=function(e,t){if(e===true){return a.parseQuery(this._parts.query,this._parts.escapeQuerySpace)}else if(typeof e==="function"){var r=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);var i=e.call(this,r);this._parts.query=a.buildQuery(i||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!t);return this}else if(e!==undefined&&typeof e!=="string"){this._parts.query=a.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!t);return this}else{return T.call(this,e,t)}};o.setQuery=function(e,t,r){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof e==="string"||e instanceof String){i[e]=t!==undefined?t:null}else if(typeof e==="object"){for(var n in e){if(s.call(e,n)){i[n]=e[n]}}}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")}this._parts.query=a.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof e!=="string"){r=t}this.build(!r);return this};o.addQuery=function(e,t,r){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);a.addQuery(i,e,t===undefined?null:t);this._parts.query=a.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof e!=="string"){r=t}this.build(!r);return this};o.removeQuery=function(e,t,r){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);a.removeQuery(i,e,t);this._parts.query=a.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);if(typeof e!=="string"){r=t}this.build(!r);return this};o.hasQuery=function(e,t,r){var i=a.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return a.hasQuery(i,e,t,r)};o.setSearch=o.setQuery;o.addSearch=o.addQuery;o.removeSearch=o.removeQuery;o.hasSearch=o.hasQuery;o.normalize=function(){if(this._parts.urn){return this.normalizeProtocol(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()}return this.normalizeProtocol(false).normalizeHostname(false).normalizePort(false).normalizePath(false).normalizeQuery(false).normalizeFragment(false).build()};o.normalizeProtocol=function(e){if(typeof this._parts.protocol==="string"){this._parts.protocol=this._parts.protocol.toLowerCase();this.build(!e)}return this};o.normalizeHostname=function(r){if(this._parts.hostname){if(this.is("IDN")&&e){this._parts.hostname=e.toASCII(this._parts.hostname)}else if(this.is("IPv6")&&t){this._parts.hostname=t.best(this._parts.hostname)}this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!r)}return this};o.normalizePort=function(e){if(typeof this._parts.protocol==="string"&&this._parts.port===a.defaultPorts[this._parts.protocol]){this._parts.port=null;this.build(!e)}return this};o.normalizePath=function(e){var t=this._parts.path;if(!t){return this}if(this._parts.urn){this._parts.path=a.recodeUrnPath(this._parts.path);this.build(!e);return this}if(this._parts.path==="/"){return this}t=a.recodePath(t);var r;var i="";var n,o;if(t.charAt(0)!=="/"){r=true;t="/"+t}if(t.slice(-3)==="/.."||t.slice(-2)==="/."){t+="/"}t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");if(r){i=t.substring(1).match(/^(\.\.\/)+/)||"";if(i){i=i[0]}}while(true){n=t.search(/\/\.\.(\/|$)/);if(n===-1){break}else if(n===0){t=t.substring(3);continue}o=t.substring(0,n).lastIndexOf("/");if(o===-1){o=n}t=t.substring(0,o)+t.substring(n+3)}if(r&&this.is("relative")){t=i+t.substring(1)}this._parts.path=t;this.build(!e);return this};o.normalizePathname=o.normalizePath;o.normalizeQuery=function(e){if(typeof this._parts.query==="string"){if(!this._parts.query.length){this._parts.query=null}else{this.query(a.parseQuery(this._parts.query,this._parts.escapeQuerySpace))}this.build(!e)}return this};o.normalizeFragment=function(e){if(!this._parts.fragment){this._parts.fragment=null;this.build(!e)}return this};o.normalizeSearch=o.normalizeQuery;o.normalizeHash=o.normalizeFragment;o.iso8859=function(){var e=a.encode;var t=a.decode;a.encode=escape;a.decode=decodeURIComponent;try{this.normalize()}finally{a.encode=e;a.decode=t}return this};o.unicode=function(){var e=a.encode;var t=a.decode;a.encode=p;a.decode=unescape;try{this.normalize()}finally{a.encode=e;a.decode=t}return this};o.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol){r+=t._parts.protocol+"://"}if(t._parts.hostname){if(t.is("punycode")&&e){r+=e.toUnicode(t._parts.hostname);if(t._parts.port){r+=":"+t._parts.port}}else{r+=t.host()}}if(t._parts.hostname&&t._parts.path&&t._parts.path.charAt(0)!=="/"){r+="/"}r+=t.path(true);if(t._parts.query){var i="";for(var n=0,o=t._parts.query.split("&"),s=o.length;n<s;n++){var u=(o[n]||"").split("=");i+="&"+a.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");if(u[1]!==undefined){i+="="+a.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26")}}r+="?"+i.substring(1)}r+=a.decodeQuery(t.hash(),true);return r};o.absoluteTo=function(e){var t=this.clone();var r=["protocol","username","password","hostname","port"];var i,n,o;if(this._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}if(!(e instanceof a)){e=new a(e)}if(!t._parts.protocol){t._parts.protocol=e._parts.protocol}if(this._parts.hostname){return t}for(n=0;o=r[n];n++){t._parts[o]=e._parts[o]}if(!t._parts.path){t._parts.path=e._parts.path;if(!t._parts.query){t._parts.query=e._parts.query}}else if(t._parts.path.substring(-2)===".."){t._parts.path+="/"}if(t.path().charAt(0)!=="/"){i=e.directory();i=i?i:e.path().indexOf("/")===0?"/":"";t._parts.path=(i?i+"/":"")+t._parts.path;t.normalizePath()}t.build();return t};o.relativeTo=function(e){var t=this.clone().normalize();var r,i,n,o,s;if(t._parts.urn){throw new Error("URNs do not have any generally defined hierarchical components")}e=new a(e).normalize();r=t._parts;i=e._parts;o=t.path();s=e.path();if(o.charAt(0)!=="/"){throw new Error("URI is already relative")}if(s.charAt(0)!=="/"){throw new Error("Cannot calculate a URI relative to another relative URI")}if(r.protocol===i.protocol){r.protocol=null}if(r.username!==i.username||r.password!==i.password){return t.build()}if(r.protocol!==null||r.username!==null||r.password!==null){return t.build()}if(r.hostname===i.hostname&&r.port===i.port){r.hostname=null;r.port=null}else{return t.build()}if(o===s){r.path="";return t.build()}n=a.commonPath(o,s);if(!n){return t.build()}var u=i.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");r.path=u+r.path.substring(n.length)||"./";return t.build()};o.equals=function(e){var t=this.clone();var r=new a(e);var i={};var n={};var o={};var u,c,l;t.normalize();r.normalize();if(t.toString()===r.toString()){return true}u=t.query();c=r.query();t.query("");r.query("");if(t.toString()!==r.toString()){return false}if(u.length!==c.length){return false}i=a.parseQuery(u,this._parts.escapeQuerySpace);n=a.parseQuery(c,this._parts.escapeQuerySpace);for(l in i){if(s.call(i,l)){if(!f(i[l])){if(i[l]!==n[l]){return false}}else if(!h(i[l],n[l])){return false}o[l]=true}}for(l in n){if(s.call(n,l)){if(!o[l]){return false}}}return true};o.duplicateQueryParameters=function(e){this._parts.duplicateQueryParameters=!!e;return this};o.escapeQuerySpace=function(e){this._parts.escapeQuerySpace=!!e;return this};return a})})();e.register("9",["d","a","b","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var n,a,o,s;var u,c,f,l,d;return{setters:[function(e){n=e},function(e){a=e},function(e){o=e},function(e){s=e}],execute:function(){u="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='768' height='768'%3E%3Cpath fill='white' d='M448.5 96H672v223.5h-64.5v-114L294 519l-45-45 313.5-313.5h-114V96zm159 511.5V384H672v223.5c0 34.5-30 64.5-64.5 64.5h-447c-36 0-64.5-30-64.5-64.5v-447C96 126 124.5 96 160.5 96H384v64.5H160.5v447h447z'/%3E%3C/svg%3E\")";c="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512'%3E%3Cpath fill='white' d='M256 96C144.34 96 47.56 161.02 0 256c47.56 94.98 144.34 160 256 160 111.656 0 208.438-65.02 256-160-47.558-94.98-144.344-160-256-160zm126.225 84.852c30.08 19.187 55.57 44.887 74.717 75.148-19.146 30.26-44.637 55.96-74.718 75.148C344.427 355.258 300.78 368 256 368s-88.43-12.743-126.226-36.852c-30.08-19.186-55.57-44.886-74.716-75.148 19.146-30.262 44.637-55.962 74.717-75.148 1.96-1.25 3.938-2.46 5.93-3.65C130.725 190.866 128 205.612 128 221c0 70.69 57.308 128 128 128s128-57.31 128-128c0-15.387-2.726-30.134-7.704-43.8 1.99 1.19 3.97 2.402 5.93 3.652zM256 208c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48z'/%3E%3C/svg%3E\")";f="url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E)";l="url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBYRXhpZgAATU0AKgAAAAgABAExAAIAAAARAAAAPlEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAABBZG9iZSBJbWFnZVJlYWR5AAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCACQAJADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9ObW1tTbW5NrbDMEJwtvCo5jU8KqBVHoFAAHAAFT/AGS1/wCfW3/78x//ABNFp/x6Wv8A17w/+i1qxX/ILOVXnl71T4n1l3/4C+4/1nUNF7vRfZ8vQr/ZLX/n1t/+/Mf/AMTR9ktf+fW3/wC/Mf8A8TViip5qv81T75f10X3D5P7v/kv/AACv9ktf+fW3/wC/Mf8A8TR9ktf+fW3/AO/Mf/xNWKKOar/NU++X9dF9wcn93/yX/gFf7Ja/8+tv/wB+Y/8A4mj7Ja/8+tv/AN+Y/wD4mrFFHNV/mqffL+ui+4OT+7/5L/wCv9ktf+fW3/78x/8AxNH2S1/59bf/AL8x/wDxNWKKOar/ADVPvl/XRfcHJ/d/8l/4BX+yWv8Az62//fmP/wCJo+yWv/Prb/8AfmP/AOJqxRRzVf5qn3y/rovuDk/u/wDkv/AK/wBktf8An1t/+/Mf/wATR9ktf+fW3/78x/8AxNWKKOar/NU++X9dF9wcn93/AMl/4BX+yWv/AD62/wD35j/+Jo+yWv8Az62//fmP/wCJqxRRzVf5qn3y/rovuDk/u/8Akv8AwCv9ktf+fW3/AO/Mf/xNQXVrai2uCLW2OIJjhreFhxGx5VkKsPUMCCOCCKv1Xu/+PS6/695v/RbVVOVT2kNZ/HHrLuv8kJw0fu9H9ny9BLP/AI87T/r2g/8ARS1ZqtZ/8edp/wBe0H/opas1pP45f4pfmzVT0Wj2X5L/AIP9PQoooqR8/k/6/p/09CiiigOfyf8AX9P+noUUUUBz+T/r+n/T0KKKKA5/J/1/T/p6FFFFAc/k/wCv6f8AT0KKKKA5/J/1/T/p6FFFFAc/k/6/p/09Cq15/wAed3/17T/+imqzVa8/487v/r2n/wDRTVdP+JT/AMcf/SkJz0ej2f5f8P8A09Cz/wCPO0/69oP/AEUtWarWf/Hnaf8AXtB/6KWrNKfxy/xS/NmS2XovyCiiipGFfpT8AP2E/C3xX+E3hT4ieLPF/jLQdT8VRX+o2+l6Kuix2cGkLqV3a6RN/wATHSr25eW/sLeDUHczCPbdIqRqFy35v2WmX2t3+naHpkck2pa5qOn6Jp0USl5JL/V7yHTrRUUZLN59zGcAdAT2r+ofwn4dsfCHhfw54U0xdmneGtC0nQbEYx/oukWMFhAWHPztHArOSSWcliSSSf8ARL9nx4C8H+L3E3H+eeIPDuF4l4Y4YyXLctwuX4+WKpYWWf57jZYmji4SwtbD1KtXA5fk+NpSp+1dOnHMqc6lNylQlH8B8e+O834RyvIcHw/mFTLs0zTHYnEVMRRjSnVjgMvoRhUpONanVhGOIxOOoTjLlUm8JNRklzp/n7/w7R+F/wD0Ub4kf99eFv8A5n6/N/8Aac+FFj+z98ZIvhnBqN/qGk614T0nxX4R1fV3tDe6tFNc3+ma3p90bO3tLWK907U9PZ7aNIE8+xvLb70wJf8ApCr8h/8Agrd8Pjf+AfhZ8VLSGJZ/B/i278JavcorLd/2T41tI5dObzFGfJtPEOhWEceXBil1IvGMu5H9ifSo+iB4N5Z4KcU594fcB5bwxxHw7PLs4p5hldTMqmIll9HGUsLmlGpTxWNxFGph6eBxVXHVoOClJYJKFSlO1SP5D4X+LvGOK4zyzAcQZ5XzPLsxjiMG8PiYYWEFiZ0ZVMLOEqNCnONWdejDDwfM1+/1jJaP8x6K4Xwp4r/tPy9M1SQDU1G22uWwqamqjhHPCpqCgHjhbsDcuJQwPdV/hvmOXYrK8VPCYunyVIaxkrunWpttRrUZNLnpzs7OylGSlCcYVIThH+1cPiKWKpRrUZc0Xo09JQkt4TWtpK+q1TTUotxcZMooorhNwooooAKKKKACq15/x53f/XtP/wCimqzVa8/487v/AK9p/wD0U1XT/iU/8cf/AEpCez9H+QWf/Hnaf9e0H/opas1nWf8Ax52n/XtB/wCilqzSn8cv8UvzY42stXsunl6liiq9FSPTu/u/4J9X/sWeCf8AhNv2jfA4mglm0/wdHqfju/aMHbDJoduttojTNghVPiDUtMkUNjeYCFII4/oJr8r/APgmb4JEel/E74lXEDeZqOp6Z4I0i4OQrWejW/8AbGsbB0fzL/VrGF3HAewMf3lYD9TmZUVndlREUszMQqqqjLMzHACqASSSAAMmv+hT9nrwH/qd9HXKM4xFFUsfx9neb8WV3ONq0cFGpDJMqpSl/wA+ZYPKFmFCN3GKzGc9JVJpfwN9IHPP7W8QsTgqc3PD5BgMFlULP3XXnGWYYuVk3apGvjXhqnW+Gin8KOZ8MeMdA8Yf8JD/AGBei9/4RbxRq3g7Wtox9l1/RPs/9pWR5OWtzdQgk7SS3TGCfH/2s/hw/wAWP2cvi74JtoY5tUvvB2o6loIkjDlfEPh0J4h0IxEqzRSvqel20KyphlErc7SwPyN/wTW+LH/CyJ/2qvMlXffftAeIPiRYwMVEn9j/ABBEsVlKqDpF/wAUw0fykojDHG4Fv1AIBBBAIIwQRkEHqCD1Br+jOD88y3xr8Jfr+JWHqZXxtlPEuS4tYW1Si8LPGZtw9ieRTlNc3s6E21KTtUuuh+dZxgcTwXxZ9XpuaxWS4vLMbSc/iVVUcJmNO7SWilUitFsfxZW8wuIILhN6CaOKePqkib1WRDkYKSISDkEFWHHIr2Pwr4tGohNN1WVE1JFxb3TkImpIi/dkY4VL9FXLZIW6UFlxKGDH7QPw9f4UfHT4t/D3yDb2nh7x1rT6NGQFB8N69KviTw2yKOFjXRNYsoFVflUwsikha8V1MkadfsCVZbO6ZWBIZWWF2VlI5DKwDKw5BAI5Ff8APXxlwjKljs34bzin7DM8izPMMrrVIxvVwmYZdiquCxUUnZyp+3w8oVqMuVTjFfw6sKdSn/fWTZqpU8HmGElz4TH0MNiYRv7tbDYmnCtSldXSl7OopQmtYtu6cXKMvteH4cfEm4hiuLb4bfEK5t540mguLfwT4lnt54ZVDxTQTRaY0c0MqMrxSxsySIyujFSDVXUvA3jrRbOXUtb8C+NdF023MYuNS1jwpr2mafbmaVIYRPe3thBbQmaaSOGLzJV8yaSOJMu6qf6RfhFJJL8J/hhLK7SSy/DzwVJJI5LPJI/hvTGd2Y8lmYlmJ5JJNZ3xv+GNv8ZvhJ8QPhdc6g+kf8Jp4bvdItNZiRpZdF1Rgtxo+tRRLJEZpdH1WCy1KKHzEWWS1WN2CsTX951v2YWS1+Equb5P4nZ3is9rcOzzLK8tr8P5dSweJzaplv1rBYGtiP7SjOnhq2MdOhUr2UoUpupZONj8Qp/SXxEM2hhMZwzhKOBjmMcNisVDMcROtSwkcSqVfEQpfVbTqQoqdSNO9pSXLfVW/nk8B/Cb4m/FFrz/AIV54G1/xZDp0ogv77T4IINLs7ll3i1n1bUbiy00Xez5jaJdPcopDPCqspOT4x8C+NPh5q40Dx34X1fwprL263kNhrECRPdWTSyQLfWU0Ms9re2bTwzQC5tZ5ovOhliZhIjKP6VfAHgbw78NfB3h/wAD+FbKOx0Tw7p0FhaoiIsty8a5utQvXRV+0ajqV0Zr7UbtwZbq9uJp5CXkJr8Qf+Cqer3mjftDfC66tGyD8IZkuLWRmFvdw/8ACaaqTFKBna4I3QzqN8L4IypZT+Z+Nf0Csl8IPAyPHFTjHN828QMHXyShmmCjSwNLhWeJzSvCjisHgIvDLM4xwk6jpYfMMRjHHF+yVapgcJGs6dD6Tgzx1xPF3GzyOGTYXCZBVp46phcTKdeebKnhaUqlOtiLVvqn75R5qmHp0b0VL2ccRXlT9pV+PaKyNM1O01e0S9snLRk7JYnwJrWcDLW9wo+669VYfJKmJIyVJAv1/mhVpVaFWpRrU5UqtKThUpzXLOE47xkujX47rQ/o2EoTjGcJ80JJSjKNmmmrppqRYqtef8ed3/17T/8AopqWq15/x53f/XtP/wCimpU/4lP/ABx/9KQ3az1ez6eXqFn/AMedp/17Qf8Aopas1Ws/+PO0/wCvaD/0UtWaU/jl/il+bEtl6L8gprusaPI5wkas7n0VQWY/gATTq7X4aeD3+IXxH8BeBFEmzxZ4u0PR7to1LNHpct5HPrM3AYqsOjwX0rNg7QhbtXo5LlWNz7OMqyPLaLxGYZxmWCyvA0FdOtjMfiaWFw1JNKTTnWqwjdRbV9nsY4nE0cFhsRjMTP2eGwlCtisRU/590MPTlWrT/wC3KcJS+R++/wCyX4GPw+/Z7+GeizQGDUdQ0GPxTrCsCJP7U8WSyeILlJVIBWS2XUIrMoQGjW2VGyyknof2kPGh+HnwC+MfjRJDFcaB8OfFl3YyAgFNTk0e6tdKIzwT/aNxa8dW+6OSK9oiijgijhhRY4oUSKKNFCpHHGoRERRwqqoCqBwAABXmvxi+E3hf44fDzXfhj40m1uHwx4kOnDVl8P6pJo2o3EOmanZ6tDbC+ijldLaa6sYFu4guLi33wMdjtX/VDQ4RxXC/hRT4F4P9isdkPAK4W4bnWqPCUHjsvyD+y8rr16yhVlRjPE06NavW5Ks43nUaqT3/AMwJ5vSzTiyWe5z7T6vj+IP7VzNU4+1qKhiMw+tYuFKDlBTlGlOcKcHKEXaMbxW34X/8EnfFH/COfH3xL4LlkJh8afCyXyQWPzan4K1ewu4WI6OX0/WtWZj97MYI431/Q7XxJ8I/2AfgL8EviHoPxP8AA0vxBh8T+HY9VhsTqvjO61TTZrfWdMudKv7e9sJrVY7mGS2uWdFLKY7mK3nUh4Vr7br89+jH4dcZeFfhjDgvjWWWzx2X59muIy15VjZY7DLKswWFxcYyqTw2FlCssxq5k5U/ZySjKE1N87hD3/EviHJ+KeJXnOS/WvY4jAYWnivrdCOHqfW8O6tFtQjWrJw+rQwyUuZXkpLl0u/5/v8Agq78PD4f+NXgT4k2tqsVj8RfBU2h6hcKwzP4k8C3o2mRAAVebw9r2nxI7E+ZHpbKpxDhfyq1P/kG6h/143f/AKTyV/R7/wAFQfh9/wAJd+zNd+K7a2hk1L4V+K9C8Yi4Yf6RDoV1LJ4a8SJAe6fYNaS+uI+Ny6aj5zGAf5wtU/5Buo/9eN3/AOk8lf5h/TI4O/1S8duJMRSpOngeLsLl/FuD91pOpmFKWDzR83wylPOsvzGu0rOMa8FJN+/P+lfCDN/7V4JyqMpc1bKq1bKK2t3bDTjWwul21GOBxOFpq+7pytoj+xD4Pf8AJJPhb/2TnwR/6jOmV6NXnPwe/wCSSfC3/snPgj/1GdMr0av9qOG/+SdyD/sS5X/6g0D+Ncx/5GGO/wCwzE/+npn5d/tIf8FMfDPwe8f6x8Nfh/4Db4k614Vuzp3i7W7vxCvh7w3pWtRBWu/D9hLDpmr3usanp29YtWljgtbHTr0PYGe5u4bmK2/KT9rf9pO0/ak8aeCfHMPhC+8E3nh3wTP4U1XSLvVbXWrea7bXrvVo73TNRtreyeW0eG52Ol5Y2dxFKNgSVB5rfMmrXE93rfiK7uZXnubvxN4mu7maQlpJrm61/Ubi4mdjks8s0jyOSSSzEmqNf4b+LH0lPE/xTXEOR53m9CnwdmWaQxOD4YoZXlVOjltLL8Z7fLo08xjglm1avSUIrEVa+PqRxE5VG6cIeyp0v7Y4X8O+GeF3gMbgcHOWb4bCypVczqYrFSqYmdeh7PEynh3WeEhCpeTpwp0IuklFKcpc8p6ekatd6LeC7tCG3AJc2zkiC8gBz5UuPuuvWCcDfC+CMoWU+36bqVpq1ol7ZOWjY7JI3wJraYDLW9wg+7IvVWHySpiSMlScfPtaek6td6NeLd2hDbgEubZyRDeQA58qXH3XXkwTgb4X5GULKf5Q4k4bpZxSeIw6jSzGlG0Jv3YYmEdqNZ7KVtKVV/B8E702nD9Ry3MpYOSp1G5Yab1WrdJtq84K+388OvxR974vfarXn/Hnd/8AXtP/AOimqLTdStNWtEvbJy0THZJG+BNbTAZe3uFH3ZF6hh8kqYkjJU8S3n/Hnd/9e0//AKKavx90qtDE+xrU5UqtKqoVKc1yzhOMleMl0a/HdaH2CnGdNThJShKPNGUXdNNXTTQlmR9jteR/x7Qf+ilqzuHqPzrPszm0tT/07Qf+ilqzROC55av4pfn/AMP/AFvUdl6L8ifcPUfnX3n/AME7fBY8RfHPUvFs6SG0+HnhC9uoJFTdD/bfiqU6JZo7kbVcaRHr7oAd+dpA27iPgWv23/4JweCf7C+C+teM54pI7z4g+L9QuYXcYV9E8MD/AIR/TjHxlka/g1q4DZKn7R8oGCW/rv6C/AP+vH0keCJVqXtsBwd9d45x9483s3kFODyirbZcvEWKyf3n8N7r31G/5R4255/YfhznrhPkxGbqhkWG1tzPMZv63Du+bLKOP/Dbc/QmvnX4zftW/Av4Aa5ovhv4qeMJfD2s+INJuNb0uzg8P+ItaM2mW14LCS5kl0XS7+G3Bui0UcdxJHLKY5WjRljZh9FV/NL/AMFJvFknif8Aa08V6eLr7TZeBvCfgzwlaIG3R2txLp83inVIUHRXNz4jjE46+ZFg/dFf7YfSZ8X838FvDinxRw/h8pxWeY/iHLMiy6hnVHE4nAOWJoY7HYqdTD4PG5fiKjhgcuxPs+TFU4xqyhKfNH3X/F/htwlhOMuIZ5ZmFTFUsFh8uxOOxE8HUp0q9qdShh6UYVK1DEU1eviaTknSbcFJRadmv1tl/wCClH7HcEUk0vxPvVjhjeWRv+EE8ettSNSzHavhsscKCcKCT2BNfb2lapYa3pem61pVwl5pmr2Fnqmm3cYdY7qwv7eO7s7lFkVHCT28scqh0VwGAZVOQP4w5EWVHjcZSRGRh6q4KsPxBNf1T/sT+MZvHX7KvwQ1y6kSS9g8E2Xhu+KNuIu/B09z4Tl8zkkSv/YolcNzmTPIIJ/IPoq/Sc4x8auKeJeGeM8Dwxg6+XZBTzzKnw9gMywM6tOhmGHwGYxxKzDOc29qoSzDAOl7JUXDmnzud1y/WeJ/htlHB2V5dmWT1syrQr4+WBxax9fDV1GVTDzr4d0lQweFcW/q+IU3JzT9xJJpuXuXxF8G2HxE8A+NPAeqRwyWHjHwtrvhq5FxGJIkTWdMubATMpVvmt3nWeNgC6SRo6YdVI/jf1rT9Q0i213RtWRotW0T+2dD1aNxho9V0aS70vUkPTOy+tJ1Bx8wAYda/tSr+WX/AIKC/D0/Dj9pr4wWkNuYNK8ZwW/xK0fCLHFJH4s06X+2/JVeAF8V6dr7SY6tIJCAZMD439oRwd9a4c4E48oUr1MozXG8M5hUhFOTwuc4f+0MvnVfK5RpYbFZVi6UHzxiquYqLUpThy+14AZv7PMs6yKpL3cVh8NmeHTeiq4OssNiIwXWdWli6U3a75MLfZNn9Knwe/5JJ8Lf+yc+CP8A1GdMr0avOfg9/wAkk+Fv/ZOfBH/qM6ZXo1f37w3/AMk7kH/Ylyv/ANQaB+C5j/yMMd/2GYn/ANPTP4v73/kJ6z/2Hte/9PN9VerF7/yE9Z/7D2vf+nm+qvX/ADb4j/eK/wD1+q/+lyP9EofBH/DH8kFFFFYlGnpOrXmjXYu7Rg2QEubZyRBeQg5MUuPuuvWCcDfC+CMqWU+yxanZ6tpE97ZOWja3nSSJ8Ce2nELFre4UfdkXnaw+SVcSRkg4Hg9W7TVrvRjcXVqwIa2lS5t3J8m7gEbZjlAyQ6/egmUb4nwRlSVr5jiDhylm6jiKCjSzGly8k9o4iEWrUaz/AJklalVesPgl+7acPUy7Mp4NulUvPDTbvHVulJ7zguz+3D7Wso+9pL3Sz/487T/r2g/9FLVmq1n/AMedp/17Qf8Aopas1+QT+OX+KX5s+zWy9F+QV7bZ/tpftQfCvwroXhnwJ4k8H2fgnw3p1rpGm2E/gHTb280q2t12Iby8a7je9W4fdLNqEkayyXUsrXXzSbz4lSEAhlZVZWVkdHUMjoww6OjZV0cEhlIwRX3PAHiVxp4ZZrXzfgviLOOHcVjsMsBmNTJ8wxGW1sbgPbU67wtSvhpwqcirUqdaGriqtOEpRnFOEvEz7h3KOJcJDB5xgMJj6VGr9Yw8cZhqWJp0cQoSpqrGnWjKHNyTnBuylyTkoyi2mvZP+HlP7YH/AEOfgj/w3Ol//J1fG/jHxbr3j7xd4m8deKrqK+8T+L9YuNe1+8t7ZbO2uNSuljjka2so2eOzt0ihhigto2ZYo41UMetXfE3hk6WXv7BWbTHb97Fks+mu5wFP8T2TscQynJh4il4CuePr93znxX438R8swceJONuJOKMuw9d4nDYTO84xuYU8HjPZulUl7DE16sKOKhTqSpykld053hOVKpGU/gsLwvk/DuJrf2fkuW5ZiKlNUqlXA4KhhpV6POpxXtKVOEqlJzipJN2542klODSK+oPhL+2V+0L8DvBtv4A+G/ifw9p/hW01HVNUtbLWfCVjrt1Bd6zdvf6iI764uYZfs8t5LNPFAVIgMrqjFcAfL9FcvDXFfE3B2YSzbhTPs24czOeGqYOePybHYjL8XPCVp0qlXDSr4apTqSoVKlGjOdJtwlOlTk1zQi1eYZZl2bYdYXNMDhMwwyqRrLD4zD08TRVWClGFRU6sZRVSMZzjGaXMlOSTtJ3+6/8Ah5T+2B/0Ofgj/wANzpf/AMnV84/Gz46fEj9ojVtJ134sXuhatq+iaNeeH7C90Pw/a+HZTo99ci8ms7w2s05vBDc+ZNZPIR9ja6vfLB+1SV5FRX0XEHix4m8WZZWyXibj3izP8or1KNWtlubZ5j8dgqtTD1Y1qFSeHxFedOU6VWEalOTjeMldM4cBwxw5lWJhjcsyPKsBi6anGGJwmAw2HrxjUi4TjGrSpxmlOLcZK9pJtPQ+2NF/4KI/tY+HtG0nQNK8X+DIdL0PTLDR9Nil+H2mTyxWGmWsVlZxyzG9UzSJbwRq8pVTIwLlRnFaf/Dyn9sD/oc/BH/hudL/APk6vhSivWpeO/jRQpUqFHxT48pUaNOFKlShxNmsYU6dOKhThCKxNoxhFKMUtEkkjklwTwfOUpz4YyGU5ycpSllWDblKTvKTbo3bbbbfVj5HaWaed8GW5ubm7mIG1Wnu55LmdlUcIrTSuVQcIpCDhRTKKK/KG222222223dtt6ttvdt7s+nCiiikAVXu/wDj1uf+veb/ANFtViq93/x63P8A17zf+i2qofHH/FH80B9DWZH2O15H/HtB/wCilqzuHqPzqhaf8ett/wBe8P8A6LWrFfzvP45f4pfmz9Hi7xi+6X5E+4eo/OjcPUfnUFFSMnJUghtjKysjK4DI6MMMjqeHRwcMp4IryfxL4a/ssvqGnqX0tmHmxAl3012PCsSSWsnbiGU5MJIhlONjH1Gl4wQyq6spR0dQySIwwyOjZVkYcMpBBFevk+cYnJ8T7aj79Gdo4nDSbUK8E+9nyVYXbpVUm4NtNTpyqU58eNwVLG0uSfuzjd06qV5Ql+sZWSnG+q1TUlGS+fqK6/xL4aOmFtQ09WfS3b97Fyz6bI7cIerNZMTiKU8wnEUpxsauQr9lwGPw2ZYani8LPnpT0aek6c0k5UqsbvkqQurq7TTjODlCUZS+JxGHq4arKlWjyyjr3jKL2lF9Yvo+jTTSkmkUUUV2GIUUUUAFFFFABRRRQAVXu/8Aj1uf+veb/wBFtViq93/x63P/AF7zf+i2qofHH/FH80B9AWn/AB623/XvD/6LWrFULW6tRbW4N1bHEEIytxCwOI1HDK5Vh6MpII5BIqf7Xa/8/Nv/AN/o/wD4qv56nCfPL3J/E/svv6ea+8/RYSXLHVfDHquy/wA0WKKr/a7X/n5t/wDv9H/8VR9rtf8An5t/+/0f/wAVU8k/5J/+Av8Ay8195XNH+Zfev66r7yxRVf7Xa/8APzb/APf6P/4qj7Xa/wDPzb/9/o//AIqjkn/JP/wF/wCXmvvDmj/MvvX9dV95ZzwQQrKysjo4DI6MMMjqeGRgSGU8EV5Z4l8N/wBmFr/T1ZtLZv3sPLPprtjCsTy9m7HEUpyYSRFKcFGr0r7Xa/8APzb/APf6P/4qj7XaEMrXFq6spV0eWJkdGGGR1LEMrDhlIIIr1smzXGZPiVWoxnOjPljicO1JQr00+9nyVYXbpVUm4NtNSpznCfFjcJQxtLkm4xmrunUVnKEnb/wKL0Uo3SkrbSUZR8HorpvEmjW2ms19YTwvpzsPMhE0bSWEjE/Kfmy1mx4ikPMJxHIcbWrkftdr/wA/Nv8A9/o//iq/ZcDjKOY4anisK5Tp1FqnG06c1bmpVY68tSF1dXaacZQcoSjKXxdehUw1WVGqkpR1TTvGcX8M4P7UZdHve8WlJNKxRVf7Xa/8/Nv/AN/o/wD4qj7Xa/8APzb/APf6P/4quzll/LL7n/XVfeY3/r+vVfeWKKr/AGu1/wCfm3/7/R//ABVH2u1/5+bf/v8AR/8AxVHLL+WX3P8ArqvvC/8AX9eq+8sUVX+12v8Az82//f6P/wCKo+12v/Pzb/8Af6P/AOKo5Zfyy+5/11X3hf8Ar+vVfeWKr3f/AB63P/XvN/6Laj7Xa/8APzb/APf6P/4qoLq6tWtrhRc22WglAzPCoyY2AyzOFUepJAHUkCnCMuaPuv4o9H3X+aFdd1/X/Do//9k=)";d=function(){function e(e,t){this.menuItems=[];this.menuOpen=true;var r=t.configuration.defaultUI||{};if(document&&!r.disable){var i=document.createElement("style");i.type="text/css";document.head.insertBefore(i,document.head.firstChild);var n=i.sheet;n.insertRule("\n                .argon-button {\n                    background-image: "+l+";\n                    width: 144px;\n                    height: 144px;\n                }\n            ",0);this.element=document.createElement("div");this.element.className="argon-ui";this.element.style.bottom="0";this.element.style.right="0";this.element.style["userSelect"]="none";this.element.style.webkitUserSelect="none";this.element.style.zIndex="10";s.blockAllUIEventBubbling(this.element);e.element.appendChild(this.element);this.background=document.createElement("div");this.background.style.position="absolute";this.background.style.bottom="-150px";this.background.style.right="-150px";this.background.style.width="300px";this.background.style.height="300px";this.background.style.opacity="0";this.background.style.transform="scale(0.1)";this.background.style.transition="transform 0.3s, opacity 0.3s";this.background.style.borderRadius="150px";this.background.style.backgroundColor="#eeb211";this.background.style.zIndex="-1";this.element.appendChild(this.background);var a=document.createElement("div");this.element.appendChild(a);a.className="argon-button";a.style.position="absolute";a.style.bottom="0";a.style.right="0";a.style.transform="scale(0.36)";a.style.transformOrigin="110% 110%";a.style.borderRadius="72px";a.style.cursor="pointer";a.style.pointerEvents="auto";a.style.zIndex="1";this.addMenuItem();if(s.isIOS){this.addMenuItem(u,"Open in Argon",function(){s.openInArgonApp()})}this.addMenuItem(f,"Toggle VR",function(){});this.addMenuItem(c,"Select Reality Viewer...",function(){});this.addMenuItem();this.onSelect(a,this.toggleMenu.bind(this));this.toggleMenu()}}e.prototype.addMenuItem=function(e,t,r){if(!e||!t)return this.menuItems.push(null);if(this.element){var i=document.createElement("div");i.style.position="absolute";i.style.bottom="-20px";i.style.right="-20px";i.style.textAlign="left";i.style.width="40px";i.style.height="40px";i.style.fontFamily="Arial Black";i.style.color="black";i.style.cursor="default";i.style.textShadow="-1px -1px 0px #545454, 1px -1px 0px #545454, -1px 1px 0px #545454, 1px 1px 0px #545454";i.style.transition="transform 0.3s ease 0.1s, opacity 0.3s ease 0.1s";i.style.opacity="0";i.style.pointerEvents="none";i.style.transformOrigin="50% 50%";i.style.backgroundImage=e;i.style.backgroundSize="100% 100%";i.style.backgroundRepeat="no-repeat";this.element.appendChild(i);this.menuItems.push(i);i.title=t;if(r)this.onSelect(i,r);i.addEventListener("mouseenter",function(){i.style.color="#eeb211"});i.addEventListener("mouseleave",function(){i.style.color="white"})}};e.prototype.onSelect=function(e,t){e.addEventListener("touchend",function(e){e.preventDefault();e.stopPropagation();t()});e.addEventListener("click",function(e){e.stopPropagation();t()})};e.prototype.toggleMenu=function(){if(this.element){if(this.menuOpen){this.menuItems.forEach(function(e,t){if(!e)return;e.style.transform="scale(0.2)";e.style.opacity="0";e.style.pointerEvents="none"});this.background.style.opacity="0";this.background.style.transform="scale(0.1)";this.menuOpen=false}else{var e=this.menuItems.length;this.menuItems.forEach(function(t,r){if(!t)return;var i=r/(e-1)*(Math.PI/2+Math.PI/8)-Math.PI/16;var n=100;var a=n*Math.cos(i);var o=n*Math.sin(i);t.style.transform="scale(1) translateX("+-a+"px) translateY("+-o+"px)";t.style.opacity="1";t.style.pointerEvents="auto"});this.background.style.opacity="0.7";this.background.style.transform="scale(1)";this.menuOpen=true}}};e=i([n.inject(a.ViewService,o.SessionService)],e);return e}();e("DefaultUIService",d)}}});e.register("e",["d","f","10","b","11","12","c","a"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)};var n=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;
return n>3&&a&&Object.defineProperty(t,r,a),a};var a,o,s,u,c,f,l,d;var h;return{setters:[function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){f=e},function(e){l=e},function(e){d=e}],execute:function(){h=function(e){i(t,e);function t(t,r,i){e.call(this);this.sessionService=t;this.deviceService=r;this.viewService=i;this.type="empty"}t.prototype.load=function(e,t){var r=this;var i=this.sessionService.addManagedSessionPort(e.uri);var n=this.sessionService.createSessionPort();n.on["ar.device.state"]=function(){};n.on["ar.view.uievent"]=function(){};n.on["ar.context.update"]=function(){};n.connectEvent.addEventListener(function(){var e=r.viewService.element;var t=new o.CameraEventAggregator(e);var i={moveForward:false,moveBackward:false,moveUp:false,moveDown:false,moveLeft:false,moveRight:false};function a(e){switch(e){case"W".charCodeAt(0):return"moveForward";case"S".charCodeAt(0):return"moveBackward";case"R".charCodeAt(0):return"moveUp";case"F".charCodeAt(0):return"moveDown";case"D".charCodeAt(0):return"moveRight";case"A".charCodeAt(0):return"moveLeft";default:return undefined}}var s=function(e){var t=a(e.keyCode);if(typeof t!=="undefined"){i[t]=true}};var u=function(e){var t=a(e.keyCode);if(typeof t!=="undefined"){i[t]=false}};document.addEventListener("keydown",s,false);document.addEventListener("keyup",u,false);n.closeEvent.addEventListener(function(){t.destroy();document.removeEventListener("keydown",s);document.removeEventListener("keyup",u)});var c=0;var f=0;var d=new o.Cartesian3;var h=new o.Cartesian3;var v=new o.Quaternion;var M=new o.Matrix3;var p=new o.Cartesian3;var g=new o.Cartesian3;var w=new o.Cartesian3;var y=1.77;var A=new o.Cartesian3(0,0,-1);var m=o.Quaternion.fromAxisAngle(o.Cartesian3.UNIT_X,o.CesiumMath.PI_OVER_TWO);var D=new o.ConstantPositionProperty(new o.Cartesian3(0,0,y),r.deviceService.stage);var N=new o.ConstantProperty(m);o.Matrix3.fromQuaternion(v,M);o.Matrix3.multiplyByVector(M,o.Cartesian3.UNIT_Y,p);o.Matrix3.multiplyByVector(M,o.Cartesian3.UNIT_X,g);o.Matrix3.multiplyByVector(M,A,w);var E=new o.Entity({position:D,orientation:N});var I=r.deviceService;var T=function(a){if(n.isConnected)I.requestFrame(T);var s=l.getSerializedEntityPose(r.deviceService.eye,a);if(!s){if(t.isMoving(o.CameraEventType.LEFT_DRAG)){var u=e.clientWidth;var y=e.clientHeight;var m=t.getMovement(o.CameraEventType.LEFT_DRAG);var L=(m.endPosition.x-m.startPosition.x)/u;var j=-(m.endPosition.y-m.startPosition.y)/y;var x=.05;c-=L*x;f-=j*x;f=Math.max(-o.CesiumMath.PI_OVER_TWO,Math.min(o.CesiumMath.PI_OVER_TWO,f));o.Quaternion.fromHeadingPitchRoll(c,f,0,v);o.Matrix3.fromQuaternion(v,M);o.Matrix3.multiplyByVector(M,o.Cartesian3.UNIT_Y,p);o.Matrix3.multiplyByVector(M,o.Cartesian3.UNIT_X,g);o.Matrix3.multiplyByVector(M,A,w);N.setValue(v)}var S=D.getValue(a,d);var O=.02;if(i.moveForward){o.Cartesian3.multiplyByScalar(w,O,h);o.Cartesian3.add(S,h,S)}if(i.moveBackward){o.Cartesian3.multiplyByScalar(w,-O,h);o.Cartesian3.add(S,h,S)}if(i.moveUp){o.Cartesian3.multiplyByScalar(p,O,h);o.Cartesian3.add(S,h,S)}if(i.moveDown){o.Cartesian3.multiplyByScalar(p,-O,h);o.Cartesian3.add(S,h,S)}if(i.moveLeft){o.Cartesian3.multiplyByScalar(g,-O,h);o.Cartesian3.add(S,h,S)}if(i.moveRight){o.Cartesian3.multiplyByScalar(g,O,h);o.Cartesian3.add(S,h,S)}s=l.getSerializedEntityPose(E,a)}t.reset();var C={time:a,pose:s,geolocationAccuracy:I.geolocationAccuracy,altitudeAccuracy:I.altitudeAccuracy,compassAccuracy:I.compassAccuracy,viewport:I.viewport,subviews:I.subviews};n.send("ar.reality.viewState",C)};I.requestFrame(T)});t(i);var a=this.sessionService.createSynchronousMessageChannel();i.open(a.port1,this.sessionService.configuration);n.open(a.port2,{role:s.Role.REALITY_VIEWER})};t=n([a.inject(u.SessionService,c.DeviceService,d.ViewService)],t);return t}(f.RealityLoader);e("EmptyRealityLoader",h)}}});e.register("11",["d","f","10","13","a","b","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var n,a,o,s,u,c,f;var l,d,h,v,M,p,g,w,y;function A(){var e=p.currentTime.secondsOfDay;p.tick();var t=p.currentTime.secondsOfDay;var r=a.JulianDate.now(g);var i=a.JulianDate.secondsDifference(p.currentTime,r);if(i>.033){var n=(t-e)/2;p.currentTime.secondsOfDay-=n}else if(i<.5){a.JulianDate.clone(r,p.currentTime)}}return{setters:[function(e){n=e},function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){f=e}],execute:function(){l=new a.Cartesian3;d=new a.Quaternion;h=new a.Quaternion;v=new a.Matrix3;M=new a.Matrix4;p=new a.Clock;g=new a.JulianDate(0,0);w=1.77;y=function(){function e(e,t,r){var i=this;this.sessionService=e;this.viewService=t;this.contextService=r;this.stage=this.contextService.entities.add(new a.Entity({id:"ar.device.stage",name:"Device Stage",position:new a.ConstantPositionProperty(undefined,a.ReferenceFrame.FIXED),orientation:new a.ConstantProperty(undefined)}));this.eye=this.contextService.entities.add(new a.Entity({id:"ar.device.eye",name:"Device Eye",position:new a.ConstantPositionProperty(undefined,undefined),orientation:new a.ConstantProperty(undefined)}));this.eyeEastNorthUp=this.contextService.entities.add(new a.Entity({id:"ar.device.eyeEastNorthUp",name:"Device Eye - ENU",position:new a.ConstantPositionProperty(undefined,undefined),orientation:new a.ConstantProperty(undefined)}));this.geolocationSubscribers=new Set;this._state={viewport:{x:0,y:0,width:1,height:1},subviews:[{type:o.SubviewType.SINGULAR,projectionMatrix:new a.Matrix4}],geolocationAccuracy:undefined,altitudeAccuracy:undefined};this._frustum=new a.PerspectiveFrustum;this.sessionService.manager.on["ar.device.state"]=function(e){i._state=e};this.sessionService.connectEvent.addEventListener(function(e){if(e.info.needsGeopose){i.geolocationSubscribers.add(e);i.startDeviceLocationUpdates();e.closeEvent.addEventListener(function(){i.geolocationSubscribers.delete(e);if(i.geolocationSubscribers.size===0)i.stopDeviceLocationUpdates()})}});if(this.sessionService.isRealityManager||this.sessionService.isRealityViewer){this.startDeviceOrientationUpdates()}var n=this._frustum;n.near=.01;n.far=5e8;n.fov=Math.PI/3;n.aspectRatio=1;a.Matrix4.clone(n.projectionMatrix,this.subviews[0].projectionMatrix);if(this.sessionService.isRealityManager){this.viewService.containingElementPromise.then(function(){i.publishDeviceState();setInterval(i.publishDeviceState.bind(i),500);window.addEventListener("resize",i.publishDeviceState.bind(i))})}}Object.defineProperty(e.prototype,"eyeCartographicPosition",{get:function(){return this._eyeCartographicPosition},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"geolocationAccuracy",{get:function(){return this._state.geolocationAccuracy},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"altitudeAccuracy",{get:function(){return this._state.altitudeAccuracy},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"compassAccuracy",{get:function(){return this._compassAccuracy},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"viewport",{get:function(){return this._state.viewport},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"subviews",{get:function(){return this._state.subviews},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"strictSubviewPose",{get:function(){return this._state.strictSubviewPose},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"strictSubviewProjectionMatrix",{get:function(){return this._state.strictSubviewProjectionMatrix},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"strictSubviewViewport",{get:function(){return this._state.strictSubviewViewport},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"strictViewport",{get:function(){return this._state.strictViewport},enumerable:true,configurable:true});e.prototype.getSubviewEntity=function(e){var t=this.contextService.entities.getOrCreateEntity("ar.device.view_"+e);if(!t.position){t.position=new a.ConstantPositionProperty}if(!t.orientation){t.orientation=new a.ConstantProperty}return t};e.prototype.update=function(){this.sessionService.ensureNotRealityAugmenter();if(this.sessionService.isRealityManager){this.updateViewport();this.updateState()}else{this.setEyePoseFromDeviceOrientation()}var e=f.getEntityPositionInReferenceFrame(this.eye,p.currentTime,a.ReferenceFrame.FIXED,l);this._eyeCartographicPosition=e?a.Cartographic.fromCartesian(e,undefined,this._eyeCartographicPosition):e};e.prototype.updateState=function(){if(typeof navigator!=="undefined"&&navigator.activeVRDisplays&&navigator.activeVRDisplays.length){this.updateStateFromWebVR()}else{this.updateStateMonocular()}};e.prototype.updateStateFromWebVR=function(){var e=navigator.activeVRDisplays[0];var t=this._vrFrameData=this._vrFrameData||new VRFrameData;if(!e.getFrameData(t))return;var r=this._state;var i=r.subviews;var n=i[0];var o=i[1]=i[1]||{};var s=n.viewport||{};s.x=0;s.y=0;s.width=r.viewport.width*.5;s.height=r.viewport.height;var u=o.viewport||{};u.x=s.width;u.y=0;u.width=s.width;u.height=r.viewport.height;n.projectionMatrix=a.Matrix4.fromColumnMajorArray(t.leftProjectionMatrix,n.projectionMatrix);o.projectionMatrix=a.Matrix4.clone(t.rightProjectionMatrix,o.projectionMatrix);var c=a.Matrix4.inverseTransformation(e.stageParameters.sittingToStandingTransform,M);var f=a.Matrix4.getRotation(c,v);var p=a.Quaternion.fromRotationMatrix(f,d);var g=a.Matrix4.multiplyTransformation(t.leftViewMatrix,c,M);var w=a.Matrix4.multiplyTransformation(t.rightViewMatrix,c,M);this.setStagePoseFromGeolocation();if(!e.displayName.match(/polyfill/g)){var y=a.Cartesian3.unpack(t.pose.position,0,l);var A=a.Matrix4.multiplyByPoint(c,y,l);var m=a.Quaternion.unpack(t.pose.orientation,0,h);var D=a.Quaternion.multiply(p,m,d);var N=this.eye;N.position.setValue(A,this.stage);N.orientation.setValue(D);var E=this.getSubviewEntity(0);var I=a.Matrix4.getTranslation(g,l);E.position.setValue(I,this.stage);var T=this.getSubviewEntity(1);var L=a.Matrix4.getTranslation(w,l);T.position.setValue(L,this.stage)}else{this.setEyePoseFromDeviceOrientation()}};e.prototype.updateStateMonocular=function(){this.setStagePoseFromGeolocation();this.setEyePoseFromDeviceOrientation();var e=this._state;e.subviews.length=1;e.subviews[0].viewport=undefined;a.Matrix4.clone(this._frustum.projectionMatrix,e.subviews[0].projectionMatrix)};e.prototype.setEyePoseFromDeviceOrientation=function(){var e=a.Cartesian3.fromElements(0,0,w,l);this.eye.position.setValue(e,this.stage);this.eye.orientation.setValue(this._deviceOrientation)};e.prototype.setStagePoseFromGeolocation=function(){var e=this._state.cartographicPosition;if(e){var t=e.longitude;var r=e.latitude;var i=e.height-w;var n=a.Cartesian3.fromDegrees(t,r,i,undefined,l);var o=a.Transforms.headingPitchRollQuaternion(n,0,0,0,undefined,d);this.stage.position.setValue(n,a.ReferenceFrame.FIXED);this.stage.orientation.setValue(o)}else{this.stage.position.setValue(undefined,a.ReferenceFrame.FIXED);this.stage.orientation.setValue(undefined)}};e.prototype.updateViewport=function(){this._frustum.aspectRatio=this._state.viewport.width/this._state.viewport.height;if(this.viewService.containingElement){this.viewport.x=0;this.viewport.y=0;var e=this.viewService.containingElement.clientWidth;var t=this.viewService.containingElement.clientHeight;this.viewport.width=e;this.viewport.height=t}};e.prototype.requestFrame=function(e){var t=this;var r=function(){A();t.update();e(p.currentTime)};if(this.vrDisplay){return this.vrDisplay.requestAnimationFrame(r)}else{return f.requestAnimationFrame(r)}};e.prototype.publishDeviceState=function(){var e=this;this.sessionService.ensureIsRealityManager();if(this.sessionService.isRealityManager){this.update();this.sessionService.managedSessions.forEach(function(t){if(o.Role.isRealityViewer(t.info.role))t.send("ar.device.state",e._state)})}};e.prototype.getMaximumViewport=function(){if(typeof document!=="undefined"&&document.documentElement){return{x:0,y:0,width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}throw new Error("Not implemeneted for the current platform")};e.prototype.startDeviceLocationUpdates=function(){var e=this;if(typeof navigator=="undefined")return;if(!a.defined(this._geolocationWatchId)){this._geolocationWatchId=navigator.geolocation.watchPosition(function(t){var r=e._state.cartographicPosition=e._state.cartographicPosition||new a.Cartographic;r.latitude=t.coords.latitude;r.longitude=t.coords.longitude;r.height=t.coords.altitude||0;e._state.geolocationAccuracy=t.coords.accuracy>0?t.coords.accuracy:undefined;e._state.altitudeAccuracy=t.coords.altitudeAccuracy||undefined;e.publishDeviceState()},function(e){console.error(e)},{enableHighAccuracy:true})}};e.prototype.stopDeviceLocationUpdates=function(){if(typeof navigator!=="undefined"&&a.defined(this._geolocationWatchId)){navigator.geolocation.clearWatch(this._geolocationWatchId);this._geolocationWatchId=undefined}this._state.cartographicPosition=undefined;this._state.geolocationAccuracy=undefined;this._state.altitudeAccuracy=undefined;this.publishDeviceState()};e.prototype.startDeviceOrientationUpdates=function(){var e=this;if(typeof window=="undefined"||!window.addEventListener)return;if(!a.defined(this._deviceorientationListener)){var t=0;var r=undefined;this._deviceorientationListener=function(i){var n=i.alpha;var o=i["webkitCompassHeading"];var s=+i["webkitCompassAccuracy"];if(!a.defined(n)){return}if(i.absolute){r=0}if((!a.defined(r)||Math.abs(t)>5)&&a.defined(o)&&s>=0&&s<50&&o>=0){if(!a.defined(r)){r=-o}else{r-=t}e._compassAccuracy=s>0?s:undefined}var u=a.CesiumMath.RADIANS_PER_DEGREE*(i.alpha+r||-o||0);var c=a.CesiumMath.RADIANS_PER_DEGREE*i.beta;var f=a.CesiumMath.RADIANS_PER_DEGREE*i.gamma;var l=a.Quaternion.fromAxisAngle(a.Cartesian3.UNIT_Z,u,d);var v=a.Quaternion.fromAxisAngle(a.Cartesian3.UNIT_X,c,h);var M=a.Quaternion.multiply(l,v,d);var p=a.Quaternion.fromAxisAngle(a.Cartesian3.UNIT_Y,f,h);var g=a.Quaternion.multiply(M,p,d);var w=screen["orientation"]&&screen["orientation"].angle||window.orientation||0;var y=a.Quaternion.fromAxisAngle(a.Cartesian3.UNIT_Z,-w*a.CesiumMath.RADIANS_PER_DEGREE,h);e._deviceOrientation=a.Quaternion.multiply(g,y,e._deviceOrientation||new a.Quaternion)};if("ondeviceorientationabsolute"in window){window.addEventListener("deviceorientationabsolute",this._deviceorientationListener)}else if("ondeviceorientation"in window){window.addEventListener("deviceorientation",this._deviceorientationListener)}}};e.prototype.stopDeviceOrientationUpdates=function(){if(typeof window=="undefined"||!window.removeEventListener)return;this._deviceOrientation=undefined;this._compassAccuracy=undefined;if(this._deviceorientationListener){if("ondeviceorientationabsolute"in window){window.removeEventListener("deviceorientationabsolute",this._deviceorientationListener)}else if("ondeviceorientation"in window){window.removeEventListener("deviceorientation",this._deviceorientationListener)}this._deviceorientationListener=undefined}};e=i([n.inject(c.SessionService,u.ViewService,s.ContextService)],e);return e}();e("DeviceService",y)}}});e.register("14",["d","15","b","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)};var n=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var a,o,s,u;var c,f,l,d,h,v,M,p,g;return{setters:[function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e}],execute:function(){(function(e){e[e["SUCCESS"]=100]="SUCCESS";e[e["INIT_ERROR"]=-1]="INIT_ERROR";e[e["INIT_DEVICE_NOT_SUPPORTED"]=-2]="INIT_DEVICE_NOT_SUPPORTED";e[e["INIT_NO_CAMERA_ACCESS"]=-3]="INIT_NO_CAMERA_ACCESS";e[e["INIT_LICENSE_ERROR_MISSING_KEY"]=-4]="INIT_LICENSE_ERROR_MISSING_KEY";e[e["INIT_LICENSE_ERROR_INVALID_KEY"]=-5]="INIT_LICENSE_ERROR_INVALID_KEY";e[e["INIT_LICENSE_ERROR_NO_NETWORK_PERMANENT"]=-6]="INIT_LICENSE_ERROR_NO_NETWORK_PERMANENT";e[e["INIT_LICENSE_ERROR_NO_NETWORK_TRANSIENT"]=-7]="INIT_LICENSE_ERROR_NO_NETWORK_TRANSIENT";e[e["INIT_LICENSE_ERROR_CANCELED_KEY"]=-8]="INIT_LICENSE_ERROR_CANCELED_KEY";e[e["INIT_LICENSE_ERROR_PRODUCT_TYPE_MISMATCH"]=-9]="INIT_LICENSE_ERROR_PRODUCT_TYPE_MISMATCH";e[e["INIT_EXTERNAL_DEVICE_NOT_DETECTED"]=-10]="INIT_EXTERNAL_DEVICE_NOT_DETECTED"})(c||(c={}));e("VuforiaInitResult",c);(function(e){e[e["MaxSimultaneousImageTargets"]=0]="MaxSimultaneousImageTargets";e[e["MaxSimultaneousObjectTargets"]=1]="MaxSimultaneousObjectTargets";e[e["DelayedLoadingObjectDatasets"]=2]="DelayedLoadingObjectDatasets"})(f||(f={}));e("VuforiaHint",f);l=function(){function e(){this.stateUpdateEvent=new u.Event}return e}();e("VuforiaServiceDelegateBase",l);d=function(e){i(t,e);function t(){e.apply(this,arguments)}t.prototype.isAvailable=function(){return false};t.prototype.setHint=function(e,t){return true};t.prototype.decryptLicenseKey=function(e,t){return Promise.resolve(undefined)};t.prototype.init=function(e){return Promise.resolve(c.SUCCESS)};t.prototype.deinit=function(){};t.prototype.cameraDeviceInitAndStart=function(){return true};t.prototype.cameraDeviceSetFlashTorchMode=function(e){return true};t.prototype.objectTrackerInit=function(){return true};t.prototype.objectTrackerCreateDataSet=function(e){return""};t.prototype.objectTrackerDestroyDataSet=function(e){return true};t.prototype.objectTrackerActivateDataSet=function(e){return true};t.prototype.objectTrackerDeactivateDataSet=function(e){return true};t.prototype.dataSetFetch=function(e){return Promise.resolve(undefined)};t.prototype.dataSetLoad=function(e){return Promise.resolve()};return t}(l);e("VuforiaServiceDelegate",d);h=function(){function e(e,t,r){var i=this;this.sessionService=e;this.focusService=t;this.delegate=r;this._sessionSwitcherCommandQueue=new u.CommandQueue;this._sessionCommandQueue=new WeakMap;this._sessionInitOptions=new WeakMap;this._sessionInitPromise=new WeakMap;this._sessionIsInitialized=new WeakMap;this._sessionCreatedDataSets=new WeakMap;this._sessionActivatedDataSets=new WeakMap;if(e.isRealityManager){this._sessionSwitcherCommandQueue.errorEvent.addEventListener(function(e){i.sessionService.errorEvent.raiseEvent(e)});e.connectEvent.addEventListener(function(e){var t=new u.CommandQueue;t.errorEvent.addEventListener(function(t){i.sessionService.errorEvent.raiseEvent(t);e.sendError(t)});i._sessionCommandQueue.set(e,t);var n=new Set;i._sessionCreatedDataSets.set(e,n);var a=new Set;i._sessionActivatedDataSets.set(e,a);e.on["ar.vuforia.isAvailable"]=function(){return Promise.resolve({available:r.isAvailable()})};e.on["ar.vuforia.init"]=function(n){if(!r.isAvailable())throw new Error("Vuforia is not supported");if(i._sessionIsInitialized.get(e))throw new Error("Vuforia has already been initialized");if(!n.key&&!n.encryptedLicenseData)throw new Error("Expected `encryptedLicenseData` field. You can encrypt your Vuforia license key at http://docs.argonjs.io/start/vuforia-pgp-encryptor");var a=n.key?Promise.resolve(n.key):r.decryptLicenseKey(n.encryptedLicenseData,e);return a.then(function(r){i._sessionInitOptions.set(e,{key:r});var n=t.push(function(){return i._init(e).then(function(){i._sessionIsInitialized.set(e,true)})},i._controllingSession===e);if(i.focusService.getSession()===e){i._setControllingSession(e)}i._sessionInitPromise.set(e,n);return n})};e.on["ar.vuforia.objectTrackerCreateDataSet"]=function(a){var o=a.url;return t.push(function(){var e=r.objectTrackerCreateDataSet(o);if(e){n.add(e);return Promise.resolve({id:e})}throw new Error("Unable to create DataSet")},i._controllingSession===e)};e.on["ar.vuforia.objectTrackerActivateDataSet"]=function(n){var o=n.id;return t.push(function(){if(r.objectTrackerActivateDataSet(o)){a.add(o);e.send("ar.vuforia.objectTrackerActivateDataSetEvent",{id:o});return}throw new Error("Unable to activate DataSet ("+o+")")},i._controllingSession===e)};e.on["ar.vuforia.objectTrackerDeactivateDataSet"]=function(n){var o=n.id;return t.push(function(){if(r.objectTrackerDeactivateDataSet(o)){a.delete(o);e.send("ar.vuforia.objectTrackerDeactivateDataSetEvent",{id:o});return}throw new Error("Unable to deactivate DataSet ("+o+")")},i._controllingSession===e)};e.on["ar.vuforia.dataSetFetch"]=function(n){var a=n.id;return t.push(function(){return r.dataSetFetch(a)},i._controllingSession===e)};e.on["ar.vuforia.dataSetLoad"]=function(n){var a=n.id;return t.push(function(){return r.dataSetLoad(a)},i._controllingSession===e)};e.closeEvent.addEventListener(function(){if(i._controllingSession===e){t.clear();t.push(function(){i._cleanupSession(e);setTimeout(function(){i._ensureActiveSession()},2e3)},true)}else{i._cleanupSession(e)}})});t.sessionFocusEvent.addEventListener(function(e){var t=e.current;if(t&&i._sessionInitOptions.get(t)){i._setControllingSession(t)}})}}e.prototype.isAvailable=function(){return this.sessionService.manager.request("ar.vuforia.isAvailable").then(function(e){return e.available})};e.prototype.initWithUnencryptedKey=function(e,t){var r=this;if(!t)this.sessionService.ensureIsRealityManager();return this.sessionService.manager.request("ar.vuforia.init",e).then(function(){return new v(r.sessionService.manager)})};e.prototype.init=function(e){var t=this;if(!e.encryptedLicenseData||typeof e.encryptedLicenseData!=="string")throw new Error("options.encryptedLicenseData is required.");return this.sessionService.manager.request("ar.vuforia.init",e).then(function(){return new v(t.sessionService.manager)})};e.prototype._ensureActiveSession=function(){console.log("VuforiaService: Ensuring an active session is in control.");if(this._controllingSession&&this._controllingSession.isConnected)return;this._selectControllingSession()};e.prototype._selectControllingSession=function(){var e=this.focusService.getSession();if(e&&this._sessionInitOptions.get(e)){this._setControllingSession(e);return}for(var t=0,r=this.sessionService.managedSessions;t<r.length;t++){var i=r[t];if(this._sessionInitOptions.get(i)){this._setControllingSession(i);return}}if(this._sessionInitOptions.get(this.sessionService.manager))this._setControllingSession(this.sessionService.manager)};e.prototype._setControllingSession=function(e){var t=this;if(this._controllingSession===e)return;console.log("VuforiaService: Setting controlling session to "+e.uri);this._sessionSwitcherCommandQueue.clear();this._sessionSwitcherCommandQueue.push(function(){return t._pauseSession().then(function(){return t._resumeSession(e)})},true)};e.prototype._resumeSession=function(e){if(this._controllingSession)throw new Error("Attempted to resume a session while a session is still in control");if(e)console.log("VuforiaService: Resuming session "+e.uri);var t=this._sessionInitOptions.get(e);if(!t){throw new Error("Attempted to resume a session without initialization options")}this._controllingSession=e;var r=this._sessionCommandQueue.get(e);if(this._sessionIsInitialized.get(e)){return this._init(e).then(function(){r.execute()}).catch(function(t){e.sendError(t)})}else{r.execute();return this._sessionInitPromise.get(e)}};e.prototype._pauseSession=function(){var e=this;var t=this._controllingSession;if(!t)return Promise.resolve(undefined);console.log("VuforiaService: Pausing session "+t.uri);var r=this._sessionCommandQueue.get(t);return r.push(function(){r.pause();e._controllingSession=undefined;return e._deinit(t)},true)};e.prototype._cleanupSession=function(e){var t=this;if(!this._sessionInitOptions.has(e))return;this._sessionInitOptions.delete(e);var r=this._sessionCreatedDataSets.get(e);console.log("VuforiaService: Deactivating datasets for session "+e.uri);this._sessionActivatedDataSets.get(e).forEach(function(e){t.delegate.objectTrackerDeactivateDataSet(e)});this._sessionActivatedDataSets.delete(e);console.log("VuforiaService: Destroying objects for session "+e.uri);r.forEach(function(e){t.delegate.objectTrackerDestroyDataSet(e)});this._sessionCreatedDataSets.delete(e)};e.prototype._init=function(e){var t=this;console.log("Attempting to initialize vuforia for "+e.uri);var r=this._sessionInitOptions.get(e);return this.delegate.init(r).then(function(r){if(r!==c.SUCCESS){throw new Error("Vuforia init failed: "+c[r])}if(!t.delegate.objectTrackerInit()){throw new Error("Vuforia init failed: Unable to initialize ObjectTracker")}var i=true;t._sessionActivatedDataSets.get(e).forEach(function(r){i=i&&t.delegate.objectTrackerActivateDataSet(r);if(i){e.send("ar.vuforia.objectTrackerActivateDataSetEvent",{id:r})}});if(!i){throw new Error("Vuforia init failed: Unable to restore active datasets")}if(!t.delegate.cameraDeviceInitAndStart()){throw new Error("Vuforia init failed: Unable to complete initialization")}console.log("Vuforia init success")}).catch(function(r){console.log("Vuforia init fail: "+r.message);t._sessionInitOptions.delete(e);t._sessionIsInitialized.set(e,false);t._deinit(e);t._ensureActiveSession();throw r})};e.prototype._deinit=function(e){var t=this;var r=this._sessionActivatedDataSets.get(e);if(r){r.forEach(function(r){t.delegate.objectTrackerDeactivateDataSet(r);e.send("ar.vuforia.objectTrackerDeactivateDataSetEvent",{id:r})})}this.delegate.deinit()};e=n([a.inject(s.SessionService,o.FocusService,d)],e);return e}();e("VuforiaService",h);v=function(){function e(e){this.objectTracker=new p(e)}return e}();e("VuforiaAPI",v);M=function(){function e(){}return e}();e("VuforiaTracker",M);p=function(e){i(t,e);function t(t){var r=this;e.call(this);this.manager=t;this._dataSetMap=new Map;this.dataSetActivateEvent=new u.Event;this.dataSetDeactivateEvent=new u.Event;t.on["ar.vuforia.objectTrackerActivateDataSetEvent"]=function(e){var t=e.id;var i=r._dataSetMap.get(t);i._onActivate();r.dataSetActivateEvent.raiseEvent(i)};t.on["ar.vuforia.objectTrackerDeactivateDataSetEvent"]=function(e){var t=e.id;var i=r._dataSetMap.get(t);i._onDeactivate();r.dataSetDeactivateEvent.raiseEvent(i)}}t.prototype.createDataSet=function(e){var t=this;if(e&&window.document){e=u.resolveURL(e)}return this.manager.request("ar.vuforia.objectTrackerCreateDataSet",{url:e}).then(function(e){var r=new g(e.id,t.manager);t._dataSetMap.set(e.id,r);return r})};t.prototype.activateDataSet=function(e){return this.manager.request("ar.vuforia.objectTrackerActivateDataSet",{id:e.id})};t.prototype.deactivateDataSet=function(e){return this.manager.request("ar.vuforia.objectTrackerDeactivateDataSet",{id:e.id})};return t}(M);e("VuforiaObjectTracker",p);g=function(){function e(e,t){this.id=e;this.manager=t;this._isActive=false}e.prototype._onActivate=function(){this._isActive=true};e.prototype._onDeactivate=function(){this._isActive=false};e.prototype.fetch=function(){return this.manager.request("ar.vuforia.dataSetFetch",{id:this.id}).then(function(){})};e.prototype.load=function(){var e=this;return this.manager.request("ar.vuforia.dataSetLoad",{id:this.id}).then(function(t){e._trackables=t;return t})};e.prototype.isActive=function(){return this._isActive};e.prototype.getTrackables=function(){return this._trackables};return e}();e("VuforiaDataSet",g)}}});e.register("16",["d","10","b","11","12","a","14","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)};var n=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var a,o,s,u,c,f,l,d;var h;return{setters:[function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){f=e},function(e){l=e},function(e){d=e}],execute:function(){h=function(e){i(t,e);function t(t,r,i,n){var a=this;e.call(this);this.sessionService=t;this.vuforiaDelegate=r;this.viewService=i;this.deviceService=n;this.type="live-video";if(typeof document!=="undefined"){this.fovSlider=document.createElement("input");this.fovSlider.type="range";this.fovSlider.min="0";this.fovSlider.max="179";this.fovSlider.value="90";this.fovSlider.step="1";this.fovSlider.style.position="absolute;";this.fovSlider.addEventListener("change",function(e){a.videoFov=Number.parseInt(a.fovSlider.value)*Math.PI/180});this.videoFov=Number.parseInt(this.fovSlider.value)*Math.PI/180;this.viewService.containingElementPromise.then(function(e){e.insertBefore(a.fovSlider,e.firstChild)});this.videoElement=document.createElement("video");this.videoElement.style.width="100%";this.videoElement.style.height="height:100%";this.videoElement.controls=false;this.videoElement.autoplay=true;this.viewService.containingElementPromise.then(function(e){e.insertBefore(a.videoElement,e.firstChild)});this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d")}}t.prototype.load=function(e,t){var r=this;var i=this.sessionService.addManagedSessionPort(e.uri);var n=this.sessionService.createSessionPort();n.on["ar.context.update"]=function(){};n.connectEvent.addEventListener(function(){if(r.videoElement){var e=r.videoElement;var t=navigator.mediaDevices;var a=(t.getUserMedia||t["mozGetUserMedia"]||t["msGetUserMedia"]||t["webkitGetUserMedia"]).bind(t);a({audio:false,video:true}).then(function(t){e.src=window.URL.createObjectURL(t)}).catch(function(e){n.errorEvent.raiseEvent(e)});var o=r.deviceService;var s=-1;var u=function(t){if(i.isConnected)r.deviceService.requestFrame(u);if(e.currentTime!=s){s=e.currentTime;var a={time:t,pose:d.getSerializedEntityPose(o.eye,t),geolocationAccuracy:o.geolocationAccuracy,altitudeAccuracy:o.altitudeAccuracy,compassAccuracy:o.compassAccuracy,viewport:o.viewport,subviews:o.subviews};n.send("ar.reality.viewState",a)}};r.deviceService.requestFrame(u)}r.vuforiaDelegate.videoEnabled=true;r.vuforiaDelegate.trackingEnabled=true;var c=r.vuforiaDelegate.stateUpdateEvent.addEventListener(function(e){n.send("ar.reality.viewState",e)});n.closeEvent.addEventListener(function(){c();r.vuforiaDelegate.videoEnabled=false;r.vuforiaDelegate.trackingEnabled=false})});t(i);var a=this.sessionService.createSynchronousMessageChannel();i.open(a.port1,this.sessionService.configuration);n.open(a.port2,{role:o.Role.REALITY_VIEWER})};t.isAvailable=function(){if(typeof navigator!=="undefined"&&navigator.mediaDevices){var e=navigator.mediaDevices;return!!(e.getUserMedia||e["mozGetUserMedia"]||e["msGetUserMedia"]||e["webkitGetUserMedia"])}else{return false}};t.prototype.getVideoFrame=function(e,t,r,i){this.canvas.width=this.videoElement.videoWidth;this.canvas.height=this.videoElement.videoHeight;this.context.drawImage(this.videoElement,0,0,this.canvas.width,this.canvas.height);return this.context.getImageData(e,t,r,i)};t=n([a.inject(s.SessionService,l.VuforiaServiceDelegate,f.ViewService,u.DeviceService)],t);return t}(c.RealityLoader);e("LiveVideoRealityLoader",h)}}});e.register("13",["d","f","10","b","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;
return n>3&&a&&Object.defineProperty(t,r,a),a};var n,a,o,s,u;var c,f,l,d,h;function v(e){var t=e;return a.defined(t.id)?t.id:""+t}return{setters:[function(e){n=e},function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e}],execute:function(){(function(e){e[e["KNOWN"]=1]="KNOWN";e[e["FOUND"]=2]="FOUND";e[e["LOST"]=4]="LOST"})(c||(c={}));e("PoseStatus",c);f=new a.Cartesian3(0,0);l=new a.Quaternion(0,0);d=new a.Cartesian3(0,0);h=function(){function e(e){var t=this;this.sessionService=e;this.updateEvent=new u.Event;this.renderEvent=new u.Event;this.localOriginChangeEvent=new u.Event;this.timestamp=-1;this.deltaTime=0;this.maxDeltaTime=1/3*1e3;this.time=new a.JulianDate(0,0);this.entities=new a.EntityCollection;this.user=this.entities.add(new a.Entity({id:"ar.user",name:"user",position:new a.ConstantPositionProperty(undefined,a.ReferenceFrame.FIXED),orientation:new a.ConstantProperty(a.Quaternion.IDENTITY)}));this.localOriginEastNorthUp=this.entities.add(new a.Entity({id:"ar.localENU",name:"localOriginENU",position:new a.ConstantPositionProperty(undefined,a.ReferenceFrame.FIXED),orientation:new a.ConstantProperty(a.Quaternion.IDENTITY)}));this.localOriginEastUpSouth=this.entities.add(new a.Entity({id:"ar.localEUS",name:"localOriginEUS",position:new a.ConstantPositionProperty(a.Cartesian3.ZERO,this.localOriginEastNorthUp),orientation:new a.ConstantProperty(a.Quaternion.fromAxisAngle(a.Cartesian3.UNIT_X,Math.PI/2))}));this.defaultReferenceFrame=this.localOriginEastNorthUp;this._entityPoseCache={};this._entityPoseMap=new Map;this._subscribedEntities=new WeakMap;this._updatingEntities=new Set;this._knownEntities=new Set;this._sessionEntities={};if(this.sessionService.isRealityManager||this.sessionService.isRealityViewer){this.sessionService.connectEvent.addEventListener(function(e){t._subscribedEntities.set(e,new Set);e.on["ar.context.subscribe"]=function(r){var i=r.id;var n=t._subscribedEntities.get(e);if(n)n.add(i)}})}else{this.sessionService.manager.on["ar.context.update"]=function(e){t._update(e)}}}Object.defineProperty(e.prototype,"serializedFrameState",{get:function(){return this._serializedState},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"systemTime",{get:function(){var e=this;console.warn("systemTime property is deprecated. Use timestamp property");Object.defineProperty(this,"systemTime",{get:function(){return e.timestamp}});return this.systemTime},enumerable:true,configurable:true});e.prototype.getTime=function(){var e=this;console.warn("getTime function is deprecated. Use the ContextService.time property instead.");this.getTime=function(){return e.time};return this.getTime()};e.prototype.setDefaultReferenceFrame=function(e){var t=this;console.warn("setDefaultReferenceFrame is deprecated. Use the ContextService.defaultReferenceFrame property directly.");this.setDefaultReferenceFrame=function(e){return t.defaultReferenceFrame=e};this.setDefaultReferenceFrame(e)};e.prototype.getDefaultReferenceFrame=function(){var e=this;console.warn("getDefaultReferenceFrame is deprecated. Use the ContextService.defaultReferenceFrame property directly.");this.getDefaultReferenceFrame=function(){return e.defaultReferenceFrame};return this.getDefaultReferenceFrame()};e.prototype.subscribeToEntityById=function(e){this.sessionService.manager.send("ar.context.subscribe",{id:e});return this.entities.getOrCreateEntity(e)};e.prototype.getEntityPose=function(e,t){if(t===void 0){t=this.defaultReferenceFrame}var r=this.time;var i=e.id+"@"+v(t);var n=this._entityPoseMap.get(i);if(!a.defined(n)){n={position:new a.Cartesian3,orientation:new a.Quaternion,referenceFrame:t,poseStatus:0};this._entityPoseMap.set(i,n)}var o=u.getEntityPositionInReferenceFrame(e,r,t,n.position);var s=u.getEntityOrientationInReferenceFrame(e,r,t,n.orientation);var f=o&&s;var l=0;var d=n.poseStatus;if(f){l|=c.KNOWN}if(f&&!(d&c.KNOWN)){l|=c.FOUND}else if(!f&&d&c.KNOWN){l|=c.LOST}n.poseStatus=l;return n};e.prototype._update=function(e){if(this.sessionService.isRealityManager){this._entityPoseCache={};for(var t=0,r=this.sessionService.managedSessions;t<r.length;t++){var i=r[t];if(o.Role.isRealityAugmenter(i.info.role))this._sendUpdateForSession(e,i)}}this.updateEntityFromSerializedPose(this.user.id,e.view.pose);this._knownEntities.clear();if(e.entities){for(var n in e.entities){this.updateEntityFromSerializedPose(n,e.entities[n]);this._updatingEntities.add(n);this._knownEntities.add(n)}}for(var s=0,u=this._updatingEntities;s<u.length;s++){var n=u[s];if(!this._knownEntities.has(n)){var c=this.entities.getById(n);if(c){c.position=undefined;c.orientation=undefined}this._updatingEntities.delete(n)}}this._updateLocalOrigin(e);var f=performance.now();this.deltaTime=Math.min(f-this.timestamp,this.maxDeltaTime);this.timestamp=f;a.JulianDate.clone(e.view.time,this.time);this._serializedState=e;this.updateEvent.raiseEvent(this);this.renderEvent.raiseEvent(this)};e.prototype.updateEntityFromSerializedPose=function(e,t){var r=this.entities.getOrCreateEntity(e);if(!t){r.position=undefined;r.orientation=undefined;return r}var i=t.p;var n=t.o;var o=typeof t.r==="number"?t.r:this.entities.getOrCreateEntity(t.r);var s=r.position;var u=r.orientation;if(s instanceof a.ConstantPositionProperty&&s.referenceFrame===o){s.setValue(i,o)}else{r.position=new a.ConstantPositionProperty(i,o)}if(u instanceof a.ConstantProperty){u.setValue(n)}else{r.orientation=new a.ConstantProperty(n)}return r};e.prototype.publishEntityState=function(e,t){};e.prototype._updateLocalOrigin=function(e){var t=e.view.pose;var r=t?typeof t.r==="number"?t.r:this.entities.getOrCreateEntity(t.r):this.user;var i=this.user.position&&this.user.position.getValueInReferenceFrame(e.view.time,r,f);var n=this.localOriginEastNorthUp.position&&this.localOriginEastNorthUp.position.referenceFrame;var o=this.localOriginEastNorthUp.position&&n&&this.localOriginEastNorthUp.position.getValueInReferenceFrame(e.view.time,n,d);if(!i||!o||n!==r||a.Cartesian3.magnitudeSquared(a.Cartesian3.subtract(i,o,d))>25e6){var s=this.localOriginEastNorthUp.position;var u=this.localOriginEastNorthUp.orientation;if(i){s.setValue(i,r);if(r===a.ReferenceFrame.FIXED){var c=a.Transforms.headingPitchRollQuaternion(i,0,0,0,undefined,l);u.setValue(c)}else{u.setValue(a.Quaternion.IDENTITY)}}else{s.setValue(a.Cartesian3.ZERO,this.user);u.setValue(a.Quaternion.IDENTITY)}this.localOriginChangeEvent.raiseEvent(undefined)}};e.prototype._sendUpdateForSession=function(e,t){var r=this._sessionEntities;for(var i in r){delete r[i]}if(e.entities){for(var i in e.entities){r[i]=e.entities[i]}}for(var n=0,o=this._subscribedEntities.get(t);n<o.length;n++){var s=o[n];r[s]=this._getSerializedEntityPose(s,e.view.time)}var u=e.entities;e.entities=r;e["time"]=e.view.time;e.sendTime=a.JulianDate.now(e.sendTime);t.send("ar.context.update",e);e.entities=u};e.prototype._getSerializedEntityPose=function(e,t){if(!a.defined(this._entityPoseCache[e])){var r=this.entities.getById(e);if(!r)return undefined;this._entityPoseCache[e]=u.getSerializedEntityPose(r,t)}return this._entityPoseCache[e]};e=i([n.inject(s.SessionService)],e);return e}();e("ContextService",h)}}});e.register("15",["d","b","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var n,a,o;var s;return{setters:[function(e){n=e},function(e){a=e},function(e){o=e}],execute:function(){s=function(){function e(e){var t=this;this.sessionService=e;this.focusEvent=new o.Event;this.blurEvent=new o.Event;this._hasFocus=false;this._sessionFocusEvent=new o.Event;e.manager.on["ar.focus.state"]=function(e){t._setFocus(e.state)};if(e.isRealityManager){e.manager.connectEvent.addEventListener(function(){setTimeout(function(){if(!t._session)t.setSession(t.sessionService.manager)})})}}Object.defineProperty(e.prototype,"hasFocus",{get:function(){return this._hasFocus},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"sessionFocusEvent",{get:function(){this.sessionService.ensureIsRealityManager();return this._sessionFocusEvent},enumerable:true,configurable:true});e.prototype.getSession=function(){this.sessionService.ensureIsRealityManager();return this._session};e.prototype.setSession=function(e){this.sessionService.ensureIsRealityManager();if(e&&!e.isConnected)throw new Error("Only a connected session can be granted focus");var t=this._session;if(t!==e){if(t)t.send("ar.focus.state",{state:false});if(e)e.send("ar.focus.state",{state:true});this._session=e;this.sessionFocusEvent.raiseEvent({previous:t,current:e})}};e.prototype.whenSessionHasFocus=function(e){var t=this;this.sessionService.ensureIsRealityManager();return new Promise(function(r){var i=t.sessionFocusEvent.addEventListener(function(t){var n=t.current;if(n===e){i();r()}})})};e.prototype._setFocus=function(e){if(this._hasFocus!==e){this._hasFocus=e;if(e){this.focusEvent.raiseEvent(undefined)}else{this.blurEvent.raiseEvent(undefined)}}};e=i([n.inject(a.SessionService)],e);return e}();e("FocusService",s)}}});(function(){var t=e.amdDefine;t("17",["exports","4"],function(e,t){"use strict";e.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){e[i]=r[i]}}}return e};e.decorators=u;e.deprecated=c;e.mixin=f;e.protocol=p;function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var n={resource:"aurelia:resource",paramTypes:"design:paramtypes",properties:"design:properties",get:function e(t,r,i){if(!r){return undefined}var a=n.getOwn(t,r,i);return a===undefined?n.get(t,Object.getPrototypeOf(r),i):a},getOwn:function e(t,r,i){if(!r){return undefined}return Reflect.getOwnMetadata(t,r,i)},define:function e(t,r,i,n){Reflect.defineMetadata(t,r,i,n)},getOrCreateOwn:function e(t,r,i,a){var o=n.getOwn(t,i,a);if(o===undefined){o=new r;Reflect.defineMetadata(t,o,i,a)}return o}};e.metadata=n;var a=new Map;var o=Object.freeze({moduleId:undefined,moduleMember:undefined});var s=function(){function e(t,r){i(this,e);this.moduleId=t;this.moduleMember=r}e.get=function r(i){var n=a.get(i);if(n===undefined){t.PLATFORM.eachModule(function(t,r){for(var o in r){var s=r[o];if(s===i){a.set(i,n=new e(t,o));return true}}if(r===i){a.set(i,n=new e(t,"default"));return true}})}return n||o};e.set=function e(t,r){a.set(t,r)};return e}();e.Origin=s;function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}var i=function e(r,i,n){var a=t.length;if(i){n=n||{value:r[i],writable:true,configurable:true,enumerable:true};while(a--){n=t[a](r,i,n)||n}Object.defineProperty(r,i,n)}else{while(a--){r=t[a](r)||r}}return r};i.on=i;return i}function c(e,t,i){function n(i,n,a){var o=i.constructor.name+"#"+n;var s=t?{}:e||{};var u="DEPRECATION - "+o;if(typeof a.value!=="function"){throw new SyntaxError("Only methods can be marked as deprecated.")}if(s.message){u+=" - "+s.message}return r({},a,{value:function e(){if(s.error){throw new Error(u)}else{console.warn(u)}return a.value.apply(this,arguments)}})}return t?n(e,t,i):n}function f(e){var t=Object.keys(e);function r(r){var i=function r(i){var n=typeof i==="function"?i.prototype:i;for(var a=t,o=Array.isArray(a),s=0,a=o?a:a[Symbol.iterator]();;){var u;if(o){if(s>=a.length)break;u=a[s++]}else{s=a.next();if(s.done)break;u=s.value}var c=u;Object.defineProperty(n,c,{value:e[c],writable:true})}};return r?i(r):i}return r}function l(){return true}function d(){}function h(e){if(e===undefined){e={}}else if(typeof e==="function"){e={validate:e}}if(!e.validate){e.validate=l}if(!e.compose){e.compose=d}return e}function v(e){return function(t){var r=e(t);return r===true}}function M(e,t){return function(r){var i=t(r);if(i!==true){throw new Error(i||e+" was not correctly implemented.")}}}function p(e,t){t=h(t);var r=function r(i){var n=typeof i==="function"?i.prototype:i;t.compose(n);r.assert(n);Object.defineProperty(n,"protocol:"+e,{enumerable:false,configurable:false,writable:false,value:true})};r.validate=v(t.validate);r.assert=M(e,t.validate);return r}p.create=function(e,t){t=h(t);var r="protocol:"+e;var i=function r(i){var n=p(e,t);return i?n(i):n};i.decorates=function(e){return e[r]===true};i.validate=v(t.validate);i.assert=M(e,t.validate);return i}})})();(function(){var t=e.amdDefine;t("4",["exports"],function(e){"use strict";e.__esModule=true;e.AggregateError=t;e.initializePAL=a;function t(e,t,r){if(t){if(t.innerError&&r){return t}if(t.stack){e+="\n------------------------------------------------\ninner error: "+t.stack}}var i=new Error(e);if(t){i.innerError=t}return i}var r={};e.FEATURE=r;var i={noop:function e(){},eachModule:function e(){}};e.PLATFORM=i;i.global=function(){if(typeof self!=="undefined"){return self}if(typeof global!=="undefined"){return global}return new Function("return this")()}();var n={};e.DOM=n;function a(e){if(typeof Object.getPropertyDescriptor!=="function"){Object.getPropertyDescriptor=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);var i=Object.getPrototypeOf(e);while(typeof r==="undefined"&&i!==null){r=Object.getOwnPropertyDescriptor(i,t);i=Object.getPrototypeOf(i)}return r}}e(i,r,n)}})})();(function(){var t=e.amdDefine;t("d",["exports","17","4"],function(e,t,r){"use strict";e.__esModule=true;var i;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(t,r,i){if(r)e(t.prototype,r);if(i)e(t,i);return t}}();e.invoker=d;e.factory=h;e.registration=M;e.transient=p;e.singleton=g;e.autoinject=L;e.inject=j;function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var o=t.protocol.create("aurelia:resolver",function(e){if(!(typeof e.get==="function")){return"Resolvers must implement: get(container: Container, key: any): any"}return true});e.resolver=o;var s=function(){function e(e){a(this,t);this._key=e}e.prototype.get=function e(t){var r=this;return function(){return t.get(r._key)}};e.of=function t(r){return new e(r)};var t=e;e=o()(e)||e;return e}();e.Lazy=s;var u=function(){function e(e){a(this,t);this._key=e}e.prototype.get=function e(t){return t.getAll(this._key)};e.of=function t(r){return new e(r)};var t=e;e=o()(e)||e;return e}();e.All=u;var c=function(){function e(e){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];a(this,t);this._key=e;this._checkParent=r}e.prototype.get=function e(t){if(t.hasResolver(this._key,this._checkParent)){return t.get(this._key)}return null};e.of=function t(r){var i=arguments.length<=1||arguments[1]===undefined?false:arguments[1];return new e(r,i)};var t=e;e=o()(e)||e;return e}();e.Optional=c;var f=function(){function e(e){a(this,t);this._key=e}e.prototype.get=function e(t){return t.parent?t.parent.get(this._key):null};e.of=function t(r){return new e(r)};var t=e;e=o()(e)||e;return e}();e.Parent=f;var l=function(){function e(e,r){a(this,t);this.strategy=e;this.state=r}e.prototype.get=function e(t,r){switch(this.strategy){case 0:return this.state;case 1:var i=t.invoke(this.state);this.state=i;this.strategy=0;return i;case 2:return t.invoke(this.state);case 3:return this.state(t,r,this);case 4:return this.state[0].get(t,r);case 5:return t.get(this.state);default:throw new Error("Invalid strategy: "+this.strategy)}};var t=e;e=o()(e)||e;return e}();e.StrategyResolver=l;function d(e){return function(r){t.metadata.define(t.metadata.invoker,e,r)}}function h(e){var r=function e(r){t.metadata.define(t.metadata.invoker,v.instance,r)};return e?r(e):r}var v=function(){function e(){a(this,e)}e.prototype.invoke=function e(t,r,i){var n=i.length;var a=new Array(n);while(n--){a[n]=t.get(i[n])}return r.apply(undefined,a)};e.prototype.invokeWithDynamicDependencies=function e(t,r,i,n){var a=i.length;var o=new Array(a);while(a--){o[a]=t.get(i[a])}if(n!==undefined){o=o.concat(n)}return r.apply(undefined,o)};n(e,null,[{key:"instance",value:new e,enumerable:true}]);return e}();e.FactoryInvoker=v;function M(e){return function(r){t.metadata.define(t.metadata.registration,e,r)}}function p(e){return M(new w(e))}function g(e){var t=arguments.length<=1||arguments[1]===undefined?false:arguments[1];return M(new y(e,t))}var w=function(){function e(t){a(this,e);this._key=t}e.prototype.registerResolver=function e(t,r,i){var n=new l(2,i);t.registerResolver(this._key||r,n);return n};return e}();e.TransientRegistration=w;var y=function(){function e(t){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];a(this,e);if(typeof t==="boolean"){this._registerInChild=t}else{this._key=t;this._registerInChild=r}}e.prototype.registerResolver=function e(t,r,i){var n=new l(1,i);if(this._registerInChild){t.registerResolver(this._key||r,n)}else{t.root.registerResolver(this._key||r,n)}return n};return e}();e.SingletonRegistration=y;var A="key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?";var m=Object.freeze([]);e._emptyParameters=m;t.metadata.registration="aurelia:registration";t.metadata.invoker="aurelia:invoker";var D=o.decorates;var N=function(){function e(t,r,i){a(this,e);this.fn=t;this.invoker=r;this.dependencies=i}e.prototype.invoke=function e(t,r){return r!==undefined?this.invoker.invokeWithDynamicDependencies(t,this.fn,this.dependencies,r):this.invoker.invoke(t,this.fn,this.dependencies)};return e}();e.InvocationHandler=N;function E(e,t,r,i){var n=r.length;var a=new Array(n);while(n--){a[n]=e.get(r[n])}if(i!==undefined){a=a.concat(i)}return Reflect.construct(t,a)}var I=(i={},i[0]={invoke:function e(t,r){return new r},invokeWithDynamicDependencies:E},i[1]={invoke:function e(t,r,i){return new r(t.get(i[0]))},invokeWithDynamicDependencies:E},i[2]={invoke:function e(t,r,i){return new r(t.get(i[0]),t.get(i[1]))},invokeWithDynamicDependencies:E},i[3]={invoke:function e(t,r,i){return new r(t.get(i[0]),t.get(i[1]),t.get(i[2]))},invokeWithDynamicDependencies:E},i[4]={invoke:function e(t,r,i){return new r(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3]))},invokeWithDynamicDependencies:E},i[5]={invoke:function e(t,r,i){return new r(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3]),t.get(i[4]))},invokeWithDynamicDependencies:E},i.fallback={invoke:E,invokeWithDynamicDependencies:E},i);var T=function(){function e(t){a(this,e);if(t===undefined){t={}}this._configuration=t;this._onHandlerCreated=t.onHandlerCreated;this._handlers=t.handlers||(t.handlers=new Map);this._resolvers=new Map;this.root=this;this.parent=null}e.prototype.makeGlobal=function t(){e.instance=this;return this};e.prototype.setHandlerCreatedCallback=function e(t){this._onHandlerCreated=t;this._configuration.onHandlerCreated=t};e.prototype.registerInstance=function e(t,r){this.registerResolver(t,new l(0,r===undefined?t:r))};e.prototype.registerSingleton=function e(t,r){this.registerResolver(t,new l(1,r===undefined?t:r))};e.prototype.registerTransient=function e(t,r){this.registerResolver(t,new l(2,r===undefined?t:r))};e.prototype.registerHandler=function e(t,r){this.registerResolver(t,new l(3,r))};e.prototype.registerAlias=function e(t,r){this.registerResolver(r,new l(5,t))};e.prototype.registerResolver=function e(t,r){if(t===null||t===undefined){throw new Error(A)}var i=this._resolvers;var n=i.get(t);if(n===undefined){i.set(t,r)}else if(n.strategy===4){n.state.push(r)}else{i.set(t,new l(4,[n,r]))}};e.prototype.autoRegister=function e(r,i){var n=undefined;if(typeof r==="function"){var a=t.metadata.get(t.metadata.registration,r);if(a===undefined){n=new l(1,r);this.registerResolver(i===undefined?r:i,n)}else{n=a.registerResolver(this,i===undefined?r:i,r)}}else{n=new l(0,r);this.registerResolver(i===undefined?r:i,n)}return n};e.prototype.autoRegisterAll=function e(t){var r=t.length;while(r--){this.autoRegister(t[r])}};e.prototype.unregister=function e(t){this._resolvers["delete"](t)};e.prototype.hasResolver=function e(t){var r=arguments.length<=1||arguments[1]===undefined?false:arguments[1];if(t===null||t===undefined){throw new Error(A)}return this._resolvers.has(t)||r&&this.parent!==null&&this.parent.hasResolver(t,r)};e.prototype.get=function t(r){if(r===null||r===undefined){throw new Error(A)}if(r===e){return this}if(D(r)){return r.get(this,r)}var i=this._resolvers.get(r);if(i===undefined){if(this.parent===null){return this.autoRegister(r).get(this,r)}return this.parent._get(r)}return i.get(this,r)};e.prototype._get=function e(t){var r=this._resolvers.get(t);if(r===undefined){if(this.parent===null){return this.autoRegister(t).get(this,t)}return this.parent._get(t)}return r.get(this,t)};e.prototype.getAll=function e(t){if(t===null||t===undefined){throw new Error(A)}var r=this._resolvers.get(t);if(r===undefined){if(this.parent===null){return m}return this.parent.getAll(t)}if(r.strategy===4){var i=r.state;var n=i.length;var a=new Array(n);while(n--){a[n]=i[n].get(this,t)}return a}return[r.get(this,t)]};e.prototype.createChild=function t(){var r=new e(this._configuration);r.root=this.root;r.parent=this;return r};e.prototype.invoke=function e(t,i){try{var n=this._handlers.get(t);if(n===undefined){n=this._createInvocationHandler(t);this._handlers.set(t,n)}return n.invoke(this,i)}catch(e){throw new r.AggregateError("Error invoking "+t.name+". Check the inner error for details.",e,true)}};e.prototype._createInvocationHandler=function e(r){var i=undefined;if(typeof r.inject==="function"){i=r.inject()}else if(r.inject===undefined){i=t.metadata.getOwn(t.metadata.paramTypes,r)||m}else{i=r.inject}var n=t.metadata.getOwn(t.metadata.invoker,r)||I[i.length]||I.fallback;var a=new N(r,n,i);return this._onHandlerCreated!==undefined?this._onHandlerCreated(a):a};return e}();e.Container=T;function L(e){var r=function e(r){r.inject=t.metadata.getOwn(t.metadata.paramTypes,r)||m};return e?r(e):r}function j(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++){t[r]=arguments[r]}return function(e,r,i){if(i){var n=i.value;n.inject=t}else{e.inject=t}}}})})();e.register("10",[],function(e,t){"use strict";var r=t&&t.id;var i,n,a,o;return{setters:[],execute:function(){(function(e){e[e["REALITY_AUGMENTER"]="RealityAugmenter"]="REALITY_AUGMENTER";e[e["REALITY_VIEWER"]="RealityViewer"]="REALITY_VIEWER";e[e["REALITY_MANAGER"]="RealityManager"]="REALITY_MANAGER";e[e["APPLICATION"]="Application"]="APPLICATION";e[e["MANAGER"]="Manager"]="MANAGER";e[e["REALITY_VIEW"]="RealityView"]="REALITY_VIEW"})(i||(i={}));e("Role",i);(function(e){function t(t){return t===e.REALITY_VIEWER||t===e.REALITY_VIEW}e.isRealityViewer=t;function r(t){return t===e.REALITY_AUGMENTER||t===e.APPLICATION}e.isRealityAugmenter=r;function i(t){return t===e.REALITY_MANAGER||t===e.MANAGER}e.isRealityManager=i})(i=i||(i={}));e("Role",i);(function(e){function t(e,t){if(t===void 0){t={}}if(!e)return undefined;t.x=e.x;t.y=e.y;t.width=e.width;t.height=e.height;return t}e.clone=t})(n=n||(n={}));e("Viewport",n);(function(e){e[e["SINGULAR"]="Singular"]="SINGULAR";e[e["LEFTEYE"]="LeftEye"]="LEFTEYE";e[e["RIGHTEYE"]="RightEye"]="RIGHTEYE";e[e["OTHER"]="Other"]="OTHER"})(a||(a={}));e("SubviewType",a);o=function(){function e(){}e.getType=function(e){if(e===undefined)return undefined;var t=e.uri;var r=t.split(":");if(r[0]==="reality"){return r[1]}return"hosted"};e.EMPTY={uri:"reality:empty",title:"Empty Reality"};e.LIVE_VIDEO={uri:"reality:live-video",title:"Live Video Reality"};return e}();e("RealityViewer",o)}}});e.register("b",["f","d","10","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)};var n=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var a,o,s,u;var c,f,l,d,h,v,M,p;return{setters:[function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e}],execute:function(){c=function(){function e(t){var r=this;this.uri=t;this._connectEvent=new u.Event;this.closeEvent=new u.Event;this.errorEvent=new u.Event;this.on={};this._isOpened=false;this._isConnected=false;this._isClosed=false;this.on[e.OPEN]=function(e){if(!e)throw new Error("Session did not provide a configuration");if(r._isConnected)throw new Error("Session has already connected!");r.info=e;r._isConnected=true;r._connectEvent.raiseEvent(undefined)};this.on[e.CLOSE]=function(){r._isClosed=true;r._isConnected=false;if(r.messagePort&&r.messagePort.close)r.messagePort.close();r.closeEvent.raiseEvent(undefined)};this.on[e.ERROR]=function(e){var t=new Error("Session Error: "+e.message);if(e.stack)t["stack"]=e.stack;r.errorEvent.raiseEvent(t)};this.errorEvent.addEventListener(function(e){if(r.errorEvent.numberOfListeners===1)console.error(e)})}Object.defineProperty(e.prototype,"connectEvent",{get:function(){if(this._isConnected)throw new Error("The connectEvent only fires once and the session is already connected.");return this._connectEvent},enumerable:true,configurable:true});e.prototype.supportsProtocol=function(e,t){if(!this._isConnected)throw new Error("Session has not yet connected");var r=this.info.protocols;if(!r)return false;var i=false;var n=new Set;r.forEach(function(t){if(t.indexOf(e)!==-1){var r=+t.split("@v")[1]||0;n.add(r)}});if(t){if(Array.isArray(t)){t.forEach(function(e){if(n.has(e)){i=true}})}else{if(n.has(t)){i=true}}}else if(!t){i=true}return i};e.prototype.open=function(t,r){var i=this;if(this._isClosed)return;if(this._isOpened)throw new Error("Session can only be opened once");if(!r)throw new Error("Session options must be provided");this.messagePort=t;this._isOpened=true;this.messagePort.onmessage=function(e){if(i._isClosed)return;var t=e.data[0];var r=e.data[1];var n=e.data[2]||{};var a=e.data[3];var o=i.on[r];if(o&&!a){try{var s=o(n,e);if(s)console.warn("Handler for "+r+" returned an unexpected response")}catch(e){i.sendError(e);i.errorEvent.raiseEvent(e)}}else if(o){var s=new Promise(function(t){return t(o(n,e))});Promise.resolve(s).then(function(e){if(i._isClosed)return;i.send(r+":resolve:"+t,e)}).catch(function(e){if(i._isClosed)return;var n;if(typeof e==="string")n=e;else if(typeof e.message==="string")n=e.message;i.send(r+":reject:"+t,{reason:n})})}else{var u="Unable to handle message "+r;if(a){i.send(r+":reject:"+t,{reason:u})}else{i.sendError({message:u})}i.errorEvent.raiseEvent(new Error("No handlers are available for topic "+r))}};this.send(e.OPEN,r)};e.prototype.send=function(e,t){if(!this._isOpened)throw new Error("Session must be open to send messages");if(this._isClosed)return false;var r=a.createGuid();this.messagePort.postMessage([r,e,t]);return true};e.prototype.sendError=function(t){var r=t;if(r instanceof Error){r={message:r.message,stack:r["stack"]}}return this.send(e.ERROR,r)};e.prototype.request=function(e,t){var r=this;if(!this._isOpened||this._isClosed)throw new Error("Session must be open to make requests");var i=a.createGuid();var n=e+":resolve:"+i;var o=e+":reject:"+i;var s=new Promise(function(t,i){r.on[n]=function(e){delete r.on[n];delete r.on[o];t(e)};r.on[o]=function(t){delete r.on[n];delete r.on[o];console.warn("Request '"+e+"' rejected with reason:\n"+t.reason);i(new Error(t.reason))}});this.messagePort.postMessage([i,e,t||{},true]);return s};e.prototype.close=function(){if(this._isClosed)return;if(this._isOpened){this.send(e.CLOSE)}this._isClosed=true;this._isConnected=false;if(this.messagePort&&this.messagePort.close)this.messagePort.close();this.closeEvent.raiseEvent(undefined)};Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:true,configurable:true});e.OPEN="ar.session.open";e.CLOSE="ar.session.close";e.ERROR="ar.session.error";return e}();e("SessionPort",c);f=function(){function e(){}e.prototype.create=function(e){return new c(e)};return e}();e("SessionPortFactory",f);l=function(){function e(){}return e}();e("ConnectService",l);d=function(){function e(e,t,r,i){var n=this;this.configuration=e;this.connectService=t;this.sessionPortFactory=r;this.messageChannelFactory=i;this.manager=this.createSessionPort("argon:manager");this.errorEvent=new u.Event;this._connectEvent=new u.Event;this._managedSessions=[];this.errorEvent.addEventListener(function(e){if(n.errorEvent.numberOfListeners===1)console.error(e)});this.manager.errorEvent.addEventListener(function(e){n.errorEvent.raiseEvent(e)});Object.freeze(this)}Object.defineProperty(e.prototype,"connectEvent",{get:function(){return this._connectEvent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"managedSessions",{get:function(){this.ensureIsRealityManager();return this._managedSessions},enumerable:true,configurable:true});e.prototype.connect=function(){if(this.connectService&&this.connectService.connect){this.connectService.connect(this)}else{console.warn("Argon: Unable to connect to a manager session; a connect service is not available")}};e.prototype.addManagedSessionPort=function(e){var t=this;this.ensureIsRealityManager();var r=this.sessionPortFactory.create(e);r.errorEvent.addEventListener(function(e){t.errorEvent.raiseEvent(e)});r.connectEvent.addEventListener(function(){t.managedSessions.push(r);t.connectEvent.raiseEvent(r)});r.closeEvent.addEventListener(function(){var e=t.managedSessions.indexOf(r);if(e>-1)t.managedSessions.splice(e,1)});return r};e.prototype.createSessionPort=function(e){return this.sessionPortFactory.create(e)};e.prototype.createMessageChannel=function(){return this.messageChannelFactory.create()};e.prototype.createSynchronousMessageChannel=function(){return this.messageChannelFactory.createSynchronous()};Object.defineProperty(e.prototype,"isRealityManager",{get:function(){return s.Role.isRealityManager(this.configuration.role)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"isRealityAugmenter",{get:function(){return s.Role.isRealityAugmenter(this.configuration.role)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"isRealityViewer",{get:function(){return s.Role.isRealityViewer(this.configuration.role)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"isManager",{get:function(){console.warn("Deprecated. Use isRealityManager");return this.isManager},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"isApplication",{get:function(){console.warn("Deprecated. Use isRealityAugmenter");return this.isRealityAugmenter},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"isRealityView",{get:function(){console.warn("Deprecated. Use isRealityViewer");return this.isRealityViewer},enumerable:true,configurable:true});e.prototype.ensureIsRealityManager=function(){if(!this.isRealityManager)throw new Error("An reality-manager only API was accessed from a non reality-manager.")};e.prototype.ensureIsRealityViewer=function(){if(!this.isRealityViewer)throw new Error("An reality-viewer only API was accessed from a non reality-viewer.")};e.prototype.ensureNotRealityViewer=function(){if(this.isRealityViewer)throw new Error("An non-permitted API was accessed from a reality-viewer.")};e.prototype.ensureNotRealityAugmenter=function(){if(this.isRealityAugmenter)throw new Error("An non-permitted API was accessed from a reality-viewer.")};e=n([o.inject("config",l,f,u.MessageChannelFactory)],e);return e}();e("SessionService",d);h=function(e){i(t,e);function t(){e.apply(this,arguments)}t.prototype.connect=function(e){var t=e.createSynchronousMessageChannel();
var r=t.port1;t.port2.onmessage=function(e){t.port2.postMessage(e.data)};e.manager.connectEvent.addEventListener(function(){e.connectEvent.raiseEvent(e.manager)});e.manager.open(r,e.configuration)};return t}(l);e("LoopbackConnectService",h);v=function(e){i(t,e);function t(){e.apply(this,arguments)}t.isAvailable=function(){return typeof window!=="undefined"&&typeof window.parent!=="undefined"};t.prototype.connect=function(e){var t=e.createMessageChannel();window.parent.postMessage({type:"ARGON_SESSION"},"*",[t.port1]);e.manager.open(t.port2,e.configuration)};return t}(l);e("DOMConnectService",v);M=function(e){i(t,e);function t(){e.apply(this,arguments)}t.isAvailable=function(){return typeof window!=="undefined"&&!!window["__ARGON_DEBUG_PORT__"]};t.prototype.connect=function(e){var t=e.manager,r=e.configuration;t.open(window["__ARGON_DEBUG_PORT__"],r)};return t}(l);e("DebugConnectService",M);p=function(e){i(t,e);function t(){e.apply(this,arguments)}t.isAvailable=function(){return typeof window!=="undefined"&&window["webkit"]&&window["webkit"].messageHandlers};t.prototype.connect=function(e){var t=e.createSynchronousMessageChannel();t.port2.onmessage=function(e){webkit.messageHandlers.argon.postMessage(JSON.stringify(e.data))};window["__ARGON_PORT__"]=t.port2;e.manager.open(t.port1,e.configuration);window.addEventListener("beforeunload",function(){e.manager.close()})};return t}(l);e("WKWebViewConnectService",p)}}});e.register("12",["d","f","10","15","b","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var n,a,o,s,u,c;var f,l;return{setters:[function(e){n=e},function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e},function(e){c=e}],execute:function(){f=function(){function e(){}return e}();e("RealityLoader",f);l=function(){function e(e,t){var r=this;this.sessionService=e;this.focusService=t;this.realities=new Array;this.connectEvent=new c.Event;this._changeEvent=new c.Event;this._viewStateEvent=new c.Event;this.desiredRealityMap=new WeakMap;this.desiredRealityMapInverse=new WeakMap;this.sessionDesiredRealityChangeEvent=new c.Event;this._loaders=[];this._loadID=-1;if(e.isRealityManager){e.manager.connectEvent.addEventListener(function(){setTimeout(function(){if(r._loadID===-1)r._setNextReality(r.onSelectReality())})})}e.connectEvent.addEventListener(function(e){if(!o.Role.isRealityViewer(e.info.role)){e.on["ar.reality.desired"]=function(t){var i=t.reality;var n=r.desiredRealityMap.get(e);console.log("Session set desired reality: "+JSON.stringify(i));if(i){if(i["type"]){var a=i["type"];i.uri=i.uri||"reality:"+a;if(a==="hosted")i.uri=i["url"];if(!i.title&&i["name"])i.title=i["name"]}if(r.isSupported(i)){r.desiredRealityMap.set(e,i);r.desiredRealityMapInverse.set(i,e)}else{e.sendError({message:'Reality of type "'+i.uri+'" is not available on this platform'});return}}else{r.desiredRealityMap.delete(e)}r._setNextReality(r.onSelectReality());r.sessionDesiredRealityChangeEvent.raiseEvent({session:e,previous:n,current:i})}}});e.manager.on["ar.reality.connect"]=function(e){var t=e.id;var i=r.sessionService.createSessionPort();var n=r.sessionService.createSynchronousMessageChannel();var a="ar.reality.message.route."+t;var o="ar.reality.message.send."+t;var s="ar.reality.close."+t;n.port1.onmessage=function(e){r.sessionService.manager.send(a,e.data)};r.sessionService.manager.on[o]=function(e){n.port1.postMessage(e)};r.sessionService.manager.on[s]=function(){i.close()};i.connectEvent.addEventListener(function(){r.connectEvent.raiseEvent(i)});r.sessionService.manager.closeEvent.addEventListener(function(){i.close();delete r.sessionService.manager.on[o];delete r.sessionService.manager.on[s]});i.open(n.port2,r.sessionService.configuration)}}Object.defineProperty(e.prototype,"changeEvent",{get:function(){this.sessionService.ensureIsRealityManager();return this._changeEvent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"viewStateEvent",{get:function(){this.sessionService.ensureNotRealityAugmenter();return this._viewStateEvent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"session",{get:function(){return this._session},enumerable:true,configurable:true});e.prototype.setDefault=function(e){this._default=e};e.prototype.registerLoader=function(e){this.sessionService.ensureIsRealityManager();this._loaders.push(e)};e.prototype.getCurrent=function(){this.sessionService.ensureNotRealityAugmenter();return this._current};e.prototype.isSupported=function(e){this.sessionService.ensureIsRealityManager();return!!this._getLoader(e)};e.prototype.publishFrame=function(e){console.warn("publishFrame is deprecated. Use publishViewState()");this.sessionService.ensureIsRealityViewer();if(this.sessionService.manager.isConnected){this.sessionService.manager.send("ar.reality.frameState",e)}};e.prototype.publishViewState=function(e){this.sessionService.ensureIsRealityViewer();if(this.sessionService.manager.isConnected){this.sessionService.manager.send("ar.reality.viewState",e);this.viewStateEvent.raiseEvent(e)}};e.prototype.setDesired=function(e){this.sessionService.ensureNotRealityViewer();this._desired=e;if(this.sessionService.isRealityManager){this._setNextReality(e,true)}else{this.sessionService.manager.send("ar.reality.desired",{reality:e})}};e.prototype.getDesired=function(){return this._desired};e.prototype.setOptionalReferenceFrames=function(e){};e.prototype.setRequiredReferenceFrames=function(e){};e.prototype.onSelectReality=function(){this.sessionService.ensureIsRealityManager();var e=this.desiredRealityMap.get(this.sessionService.manager);if(!e){var t=this.focusService.getSession();if(t&&t.isConnected){e=this.desiredRealityMap.get(t)}}if(!e){for(var r=0,i=this.sessionService.managedSessions;r<i.length;r++){var n=i[r];if(!n.isConnected)continue;var a=this.desiredRealityMap.get(n);if(a&&this.isSupported(a)){e=a;break}}}return e};e.prototype._setNextReality=function(e,t){var r=this;if(t===void 0){t=false}if(this._current&&e&&this._current===e&&!t)return;if(this._current&&!e&&this._session)return;if(!this._current&&!a.defined(e)){e=this._default}if(a.defined(e)){if(!this.isSupported(e)){this.sessionService.errorEvent.raiseEvent(new Error('Reality of type "'+e.uri+'" is not available on this platform'));return}var i=++this._loadID;this._executeRealityLoader(e,function(t){if(t.isConnected)throw new Error("Expected an unconnected session");if(i!==r._loadID){t.close();return}var n=r._session;r._session=t;r._setCurrent(e);t.on["ar.reality.viewState"]=function(e){r.viewStateEvent.raiseEvent(e)};t.on["ar.reality.frameState"]=function(e){};t.closeEvent.addEventListener(function(){console.log("Reality session closed: "+JSON.stringify(e));if(r._loadID===i){r._session=undefined;r._current=undefined;r._setNextReality(r.onSelectReality())}});t.connectEvent.addEventListener(function(){if(!o.Role.isRealityViewer(t.info.role)){t.sendError({message:"Expected a reality viewer"});t.close();throw new Error('The application "'+t.uri+'" does not support being loaded as a reality viewer')}if(n){n.close()}if(t.info["reality.supportsControlPort"]){var i=r.desiredRealityMapInverse.get(e)||r.sessionService.manager;var s=a.createGuid();var u="ar.reality.message.route."+s;var c="ar.reality.message.send."+s;var f="ar.reality.close."+s;t.on[u]=function(e){i.send(c,e)};i.on[u]=function(e){t.send(c,e)};t.send("ar.reality.connect",{id:s});i.send("ar.reality.connect",{id:s});t.closeEvent.addEventListener(function(){i.send(f)});i.closeEvent.addEventListener(function(){t.send(f);t.close()})}})})}};e.prototype._getLoader=function(e){var t;for(var r=0,i=this._loaders;r<i.length;r++){var n=i[r];if(n.type===o.RealityViewer.getType(e)){t=n;break}}return t};e.prototype._setCurrent=function(e){if(this._current===undefined||this._current!==e){var t=this._current;this._current=e;this.changeEvent.raiseEvent({previous:t,current:e});console.log("Reality changed to: "+JSON.stringify(e))}};e.prototype._executeRealityLoader=function(e,t){this.sessionService.ensureIsRealityManager();var r=this._getLoader(e);if(!r)throw new Error("Unable to setup unsupported reality type: "+e.uri);r.load(e,t)};e=i([n.inject(u.SessionService,s.FocusService)],e);return e}();e("RealityService",l)}}});e.register("a",["d","f","10","b","13","c","15","12"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var n,a,o,s,u,c,f,l;var d,h,v,M;return{setters:[function(e){n=e},function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e},function(e){c=e},function(e){f=e},function(e){l=e}],execute:function(){if(typeof document!=="undefined"&&document.createElement){var t=document.querySelector("meta[name=viewport]");if(!t)t=document.createElement("meta");t.name="viewport";t.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0";document.head.appendChild(t);var r=document.querySelector("meta[name=argon]");if(!r)r=document.createElement("meta");r.name="argon";document.head.appendChild(r);h=new Promise(function(e){var t=function(){var t=document.querySelector("#argon");if(!t)t=document.createElement("div");t.id="argon";t.classList.add("argon-view");document.body.appendChild(t);d=t;d.addEventListener("touchmove",function(e){e.preventDefault()},true);e(t)};if(document.readyState=="loading"){document.addEventListener("DOMContentLoaded",t)}else{t()}});var p=document.createElement("style");p.type="text/css";document.head.insertBefore(p,document.head.firstChild);var g=p.sheet;g.insertRule("\n        #argon {\n            position: fixed;\n            left: 0px;\n            bottom: 0px;\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            border: 0;\n            padding: 0;\n        }\n    ",g.cssRules.length);g.insertRule("\n        .argon-view {\n            overflow: hidden;\n            -webkit-tap-highlight-color: initial;\n            -webkit-user-select: none;\n            -webkit-tap-highlight-color: transparent;\n            user-select: none;\n        }\n    ",g.cssRules.length);g.insertRule("\n        .argon-view > * {\n            position: absolute;\n        }\n    ",g.cssRules.length);g.insertRule("\n        .argon-view > * > * {\n            -webkit-tap-highlight-color: initial;\n        }\n    ",g.cssRules.length)}v={p:a.Cartesian3.ZERO,o:a.Quaternion.IDENTITY,r:"ar.user"};M=function(){function e(e,t,r,i,n){var a=this;this.sessionService=t;this.focusService=r;this.realityService=i;this.contextService=n;this.uiEvent=new c.Event;this.viewportChangeEvent=new c.Event;this.acquireEvent=new c.Event;this.releaseEvent=new c.Event;this.desiredViewportMap=new WeakMap;this._subviews=[];this._frustums=[];if(typeof document!=="undefined"&&document.createElement){var o=this.element=document.createElement("div");o.style.width="100%";o.style.height="100%";o.classList.add("argon-view");this.containingElementPromise=new Promise(function(t){if(e&&e instanceof HTMLElement){e.insertBefore(o,e.firstChild);t(e)}else{d=document.querySelector("#argon");if(d){d.insertBefore(o,d.firstChild);t(d)}else{h.then(function(e){e.insertBefore(o,e.firstChild);t(e)})}a.focusService.focusEvent.addEventListener(function(){h.then(function(e){e.classList.remove("argon-no-focus");e.classList.add("argon-focus")})});a.focusService.blurEvent.addEventListener(function(){h.then(function(e){e.classList.remove("argon-focus");e.classList.add("argon-no-focus")})})}});this.containingElementPromise.then(function(e){a.containingElement=e});if(this.sessionService.isRealityViewer){this._setupEventSynthesizing()}else{this._setupEventForwarding()}}if(this.sessionService.isRealityManager){this.sessionService.connectEvent.addEventListener(function(e){e.on["ar.viewport.desired"]=function(t){a.desiredViewportMap.set(e,t)};e.on["ar.view.uievent"]=function(e){if(a.realityService.session&&a.realityService.session.isConnected){a.realityService.session.send("ar.view.uievent",e)}}})}this.contextService.renderEvent.addEventListener(function(){var e=a.contextService.serializedFrameState;e.view.subviews.forEach(function(e,t){var r="ar.view_"+t;var i=e.pose||v;a.contextService.updateEntityFromSerializedPose(r,i)});a._update()})}e.prototype.getSubviews=function(e){var t=this;this._update();var r=this._subviews;var i=this.contextService.serializedFrameState.view;r.length=i.subviews.length;i.subviews.forEach(function(n,o){var s="ar.view_"+o;var u=t.contextService.entities.getById(s);var f=r[o]=r[o]||{};f.index=o;f.type=n.type;f.pose=t.contextService.getEntityPose(u,e);f.viewport=n.viewport||{x:0,y:0,width:i.viewport.width,height:i.viewport.height};f.frustum=t._frustums[o]=t._frustums[o]||new a.PerspectiveFrustum;c.decomposePerspectiveProjectionMatrix(n.projectionMatrix,f.frustum);f["projectionMatrix"]=n.projectionMatrix});return r};e.prototype.getViewport=function(){return this.contextService.serializedFrameState.view.viewport};e.prototype.requestFullscreen=function(){return this.containingElementPromise.then(function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen)return e.webkitRequestFullscreen()})};e.prototype.onUIEvent=function(e){};e.prototype.setDesiredViewport=function(e){this.sessionService.manager.send("ar.view.desiredViewport",e)};e.prototype.requestOwnership=function(){};e.prototype.releaseOwnership=function(){};e.prototype.isOwner=function(){};e.prototype._update=function(){var e=this;var t=this.contextService.serializedFrameState;if(!t)throw new Error("Expected state to be defined");var r=t.view;var i=JSON.stringify(r.viewport);var n=this._currentViewport;if(!this._currentViewportJSON||this._currentViewportJSON!==i){this._currentViewportJSON=i;if(this.element){requestAnimationFrame(function(){var t=r.viewport;e.element.style.left=t.x+"px";e.element.style.bottom=t.y+"px";e.element.style.width=t.width+"px";e.element.style.height=t.height+"px"})}this.viewportChangeEvent.raiseEvent({previous:n})}this._currentViewport=o.Viewport.clone(r.viewport,this._currentViewport)};e.prototype._setupEventForwarding=function(){var e=this;this.realityService.connectEvent.addEventListener(function(t){e._currentRealitySession=t;t.closeEvent.addEventListener(function(){e._currentRealitySession=undefined})});var t=function(e,t){return{identifier:e.identifier,clientX:e.clientX-t.left,clientY:e.clientY-t.top,screenX:e.screenX,screenY:e.screenY}};var r=function(e,r){if(!e)return undefined;var i=[];for(var n=0;n<e.length;n++){var a=e.item(n);i[n]=t(a,r)}return i};var i=function(t){e.uiEvent.raiseEvent(t)};var n=function(t){t.preventDefault();if(e._currentRealitySession){var i=e.element.getBoundingClientRect();var n=r(t.touches,i);var a=r(t.changedTouches,i);var o=r(t.targetTouches,i);e.sessionService.manager.send("ar.view.uievent",{type:t.type,bubbles:t.bubbles,cancelable:t.cancelable,detail:t.detail,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,clientX:t.clientX-i.left,clientY:t.clientY-i.top,screenX:t.screenX,screenY:t.screenY,movementX:t.movementX,movementY:t.movementY,deltaX:t.deltaX,deltaY:t.deltaY,deltaZ:t.deltaZ,deltaMode:t.deltaMode,wheelDelta:t.wheelDelta,wheelDeltaX:t.wheelDeltaX,wheelDeltaY:t.wheelDeltaY,which:t.which,timeStamp:t.timeStamp,touches:n,changedTouches:a,targetTouches:o})}};["wheel","click","dblclick","contextmenu","mouseover","mouseout","mousemove","mousedown","mouseup","touchstart","touchend","touchmove","touchcancel"].forEach(function(t){e.element.addEventListener(t,i,false);e.element.addEventListener(t,n,false)})};e.prototype._setupEventSynthesizing=function(){var e;var t=function(e,t,r){if(!e)return;var i={view:r.view,clientX:r.clientX,clientY:r.clientY,screenX:r.screenX,screenY:r.screenY,relatedTarget:t};i.bubbles=true;e.dispatchEvent(new MouseEvent("mouseout",i));i.bubbles=false;var n=e;do{n.dispatchEvent(new MouseEvent("mouseleave",i));n=n["parentElement"]}while(n)};var r=function(e,t,r){var i={view:r.view,clientX:r.clientX,clientY:r.clientY,screenX:r.screenX,screenY:r.screenY,relatedTarget:t};i.bubbles=true;e.dispatchEvent(new MouseEvent("mouseover",i));i.bubbles=false;var n=e;do{n.dispatchEvent(new MouseEvent("mouseenter",i));n=n["parentElement"]}while(n)};var i=function(e,t,r){e.forEach(function(i,n){e[n]=document.createTouch(r.view,t,i.identifier,i.clientX,i.clientY,i.screenX,i.screenY)});return e};var n={};this.sessionService.manager.on["ar.view.uievent"]=function(a){a.view=window;var o;switch(a.type){case"wheel":o=document.elementFromPoint(a.clientX,a.clientY)||window;o.dispatchEvent(new WheelEvent(a.type,a));break;case"mouseout":o=document.elementFromPoint(a.clientX,a.clientY)||window;t(e,undefined,a);e=undefined;break;case"mouseover":o=document.elementFromPoint(a.clientX,a.clientY)||window;r(o,undefined,a);e=o;break;case"mousemove":o=document.elementFromPoint(a.clientX,a.clientY)||window;if(o!==e){t(e,o,a);r(o,e,a);e=o}o.dispatchEvent(new MouseEvent(a.type,a));break;case"touchstart":var s=0,u=0,c=a.changedTouches.length;for(var f=0,l=a.changedTouches;f<l.length;f++){var d=l[f];s+=d.clientX;u+=d.clientY}s/=c;u/=c;o=document.elementFromPoint(s,u);for(var h=0,v=a.changedTouches;h<v.length;h++){var d=v[h];n[d.identifier]=o}case"touchmove":case"touchend":case"touchcancel":o=n[a.changedTouches[0].identifier];var M=document.createEvent("TouchEvent");var p=document.createTouchList.apply(document,i(a.touches,o,a));var g=document.createTouchList.apply(document,i(a.targetTouches,o,a));var w=document.createTouchList.apply(document,i(a.changedTouches,o,a));if(typeof M["initTouchEvent"]==="function"){M["initTouchEvent"](a.type,a.bubbles,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,p,g,w,1,0)}else{M.initUIEvent(a.type,a.bubbles,a.cancelable,a.view,a.detail);M.touches=p;M.targetTouches=g;M.changedTouches=w}o.dispatchEvent(M);if(a.type==="touchend"||a.type=="touchcancel"){for(var y=0,A=a.changedTouches;y<A.length;y++){var d=A[y];delete n[d.identifier]}}break;default:o=document.elementFromPoint(a.clientX,a.clientY)||window;o.dispatchEvent(new MouseEvent(a.type,a))}}};e=i([n.inject("containerElement",s.SessionService,f.FocusService,l.RealityService,u.ContextService)],e);return e}();e("ViewService",M)}}});e.register("18",["d","b","12","a"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)};var n=this&&this.__decorate||function(e,t,r,i){var n=arguments.length,a=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)if(o=e[s])a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a;return n>3&&a&&Object.defineProperty(t,r,a),a};var a,o,s,u;var c;return{setters:[function(e){a=e},function(e){o=e},function(e){s=e},function(e){u=e}],execute:function(){c=function(e){i(t,e);function t(t,r){var i=this;e.call(this);this.sessionService=t;this.viewService=r;this.type="hosted";this.iframeElement=document.createElement("iframe");this.iframeElement.setAttribute("allowvr","");this.iframeElement.style.border="0";this.iframeElement.width="100%";this.iframeElement.height="100%";r.containingElementPromise.then(function(e){e.insertBefore(i.iframeElement,e.firstChild)})}t.prototype.load=function(e,t){var r=this;this.viewService.containingElementPromise.then(function(i){var n=function(i){if(i.data.type!=="ARGON_SESSION")return;var a=i.ports&&i.ports[0];if(!a)throw new Error("Received an ARGON_SESSION message without a MessagePort object");var o=0;var s;while(o<window.frames.length&&!s){if(window.frames[o]==i.source)s=document.getElementsByTagName("iframe")[o]}if(s!==r.iframeElement)return;window.removeEventListener("message",n);var u=r.sessionService.addManagedSessionPort(e.uri);t(u);u.open(a,r.sessionService.configuration)};window.addEventListener("message",n);r.iframeElement.src="";r.iframeElement.src=e.uri})};t=n([a.inject(o.SessionService,u.ViewService)],t);return t}(s.RealityLoader);e("HostedRealityLoader",c)}}});(function(){var t=e.amdDefine;t("19",["1a","1b","1c","1d"],function(e,t,r,i){"use strict";function n(e,t){this._callback=undefined;this._isConstant=undefined;this._definitionChanged=new i;this.setCallback(e,t)}t(n.prototype,{isConstant:{get:function(){return this._isConstant}},definitionChanged:{get:function(){return this._definitionChanged}}});n.prototype.getValue=function(e,t){return this._callback(e,t)};n.prototype.setCallback=function(t,i){if(!e(t)){throw new r("callback is required.")}if(!e(i)){throw new r("isConstant is required.")}var n=this._callback!==t||this._isConstant!==i;this._callback=t;this._isConstant=i;if(n){this._definitionChanged.raiseEvent(this)}};n.prototype.equals=function(e){return this===e||e instanceof n&&this._callback===e._callback&&this._isConstant===e._isConstant};return n})})();(function(){var t=e.amdDefine;t("1e",["1f","1a","1b","20","1c","21","22","23","24","25"],function(e,t,r,i,n,a,o,s,u,c){"use strict";function f(e,r){var i=e;if(t(r)){i+="+"+r}return i}function l(t,r){e.clone(t.distance.startPosition,r.distance.startPosition);e.clone(t.distance.endPosition,r.distance.endPosition);e.clone(t.angleAndHeight.startPosition,r.angleAndHeight.startPosition);e.clone(t.angleAndHeight.endPosition,r.angleAndHeight.endPosition)}function d(r,i,n){var a=f(c.PINCH,i);var o=r._update;var s=r._isDown;var d=r._eventStartPosition;var h=r._pressTime;var v=r._releaseTime;o[a]=true;s[a]=false;d[a]=new e;var M=r._movement[a];if(!t(M)){M=r._movement[a]={}}M.distance={startPosition:new e,endPosition:new e};M.angleAndHeight={startPosition:new e,endPosition:new e};M.prevAngle=0;r._eventHandler.setInputAction(function(e){r._buttonsDown++;s[a]=true;h[a]=new Date},u.PINCH_START,i);r._eventHandler.setInputAction(function(){r._buttonsDown=Math.max(r._buttonsDown-1,0);s[a]=false;v[a]=new Date},u.PINCH_END,i);r._eventHandler.setInputAction(function(t){if(s[a]){if(!o[a]){e.clone(t.distance.endPosition,M.distance.endPosition);e.clone(t.angleAndHeight.endPosition,M.angleAndHeight.endPosition)}else{l(t,M);o[a]=false;M.prevAngle=M.angleAndHeight.startPosition.x}var r=M.angleAndHeight.endPosition.x;var i=M.prevAngle;var u=Math.PI*2;while(r>=i+Math.PI){r-=u}while(r<i-Math.PI){r+=u}M.angleAndHeight.endPosition.x=-r*n.clientWidth/12;M.angleAndHeight.startPosition.x=-i*n.clientWidth/12}},u.PINCH_MOVE,i)}function h(r,i){var n=f(c.WHEEL,i);var a=r._update;a[n]=true;var s=r._movement[n];if(!t(s)){s=r._movement[n]={}}s.startPosition=new e;s.endPosition=new e;r._eventHandler.setInputAction(function(t){var r=15*o.toRadians(t);if(!a[n]){s.endPosition.y=s.endPosition.y+r}else{e.clone(e.ZERO,s.startPosition);s.endPosition.x=0;s.endPosition.y=r;a[n]=false}},u.WHEEL,i)}function v(r,i,n){var a=f(n,i);var o=r._isDown;var s=r._eventStartPosition;var l=r._pressTime;var d=r._releaseTime;o[a]=false;s[a]=new e;var h=r._lastMovement[a];if(!t(h)){h=r._lastMovement[a]={startPosition:new e,endPosition:new e,valid:false}}var v;var M;if(n===c.LEFT_DRAG){v=u.LEFT_DOWN;M=u.LEFT_UP}else if(n===c.RIGHT_DRAG){v=u.RIGHT_DOWN;M=u.RIGHT_UP}else if(n===c.MIDDLE_DRAG){v=u.MIDDLE_DOWN;M=u.MIDDLE_UP}r._eventHandler.setInputAction(function(t){r._buttonsDown++;h.valid=false;o[a]=true;l[a]=new Date;e.clone(t.position,s[a])},v,i);r._eventHandler.setInputAction(function(){r._buttonsDown=Math.max(r._buttonsDown-1,0);o[a]=false;d[a]=new Date},M,i)}function M(t,r){e.clone(t.startPosition,r.startPosition);e.clone(t.endPosition,r.endPosition)}function p(r,i){var n=r._update;var a=r._movement;var o=r._lastMovement;var s=r._isDown;for(var l in c){if(c.hasOwnProperty(l)){var d=c[l];if(t(d)){var h=f(d,i);n[h]=true;if(!t(r._lastMovement[h])){r._lastMovement[h]={startPosition:new e,endPosition:new e,valid:false}}if(!t(r._movement[h])){r._movement[h]={startPosition:new e,endPosition:new e}}}}}r._eventHandler.setInputAction(function(u){for(var l in c){if(c.hasOwnProperty(l)){var d=c[l];if(t(d)){var h=f(d,i);if(s[h]){if(!n[h]){e.clone(u.endPosition,a[h].endPosition)}else{M(a[h],o[h]);o[h].valid=true;M(u,a[h]);n[h]=false}}}}}e.clone(u.endPosition,r._currentMousePosition)},u.MOUSE_MOVE,i)}function g(r){if(!t(r)){throw new n("canvas is required.")}this._eventHandler=new s(r,true);this._update={};this._movement={};this._lastMovement={};this._isDown={};this._eventStartPosition={};this._pressTime={};this._releaseTime={};this._buttonsDown=0;this._currentMousePosition=new e;h(this,undefined);d(this,undefined,r);v(this,undefined,c.LEFT_DRAG);v(this,undefined,c.RIGHT_DRAG);v(this,undefined,c.MIDDLE_DRAG);p(this,undefined);for(var i in a){if(a.hasOwnProperty(i)){var o=a[i];if(t(o)){h(this,o);d(this,o,r);v(this,o,c.LEFT_DRAG);v(this,o,c.RIGHT_DRAG);v(this,o,c.MIDDLE_DRAG);p(this,o)}}}}r(g.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){var e=!this._update[f(c.WHEEL)]||!this._update[f(c.WHEEL,a.SHIFT)]||!this._update[f(c.WHEEL,a.CTRL)]||!this._update[f(c.WHEEL,a.ALT)];return this._buttonsDown>0||e}}});g.prototype.isMoving=function(e,r){if(!t(e)){throw new n("type is required.")}var i=f(e,r);return!this._update[i]};g.prototype.getMovement=function(e,r){if(!t(e)){throw new n("type is required.")}var i=f(e,r);var a=this._movement[i];return a};g.prototype.getLastMovement=function(e,r){if(!t(e)){throw new n("type is required.")}var i=f(e,r);var a=this._lastMovement[i];if(a.valid){return a}return undefined};g.prototype.isButtonDown=function(e,r){if(!t(e)){throw new n("type is required.")}var i=f(e,r);return this._isDown[i]};g.prototype.getStartMousePosition=function(e,r){if(!t(e)){throw new n("type is required.")}if(e===c.WHEEL||e===c.PINCH){return this._currentMousePosition}var i=f(e,r);return this._eventStartPosition[i]};g.prototype.getButtonPressTime=function(e,r){if(!t(e)){throw new n("type is required.")}var i=f(e,r);return this._pressTime[i]};g.prototype.getButtonReleaseTime=function(e,r){if(!t(e)){throw new n("type is required.")}var i=f(e,r);return this._releaseTime[i]};g.prototype.reset=function(){for(var e in this._update){if(this._update.hasOwnProperty(e)){this._update[e]=true}}};g.prototype.isDestroyed=function(){return false};g.prototype.destroy=function(){this._eventHandler=this._eventHandler&&this._eventHandler.destroy();return i(this)};return g})})();(function(){var t=e.amdDefine;t("25",["26"],function(e){"use strict";var t={LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4};return e(t)})})();(function(){var t=e.amdDefine;t("27",["26"],function(e){"use strict";var t={UNBOUNDED:0,CLAMPED:1,LOOP_STOP:2};return e(t)})})();(function(){var t=e.amdDefine;t("28",["1a"],function(e){"use strict";var t;if(typeof performance!=="undefined"&&e(performance.now)){t=function(){return performance.now()}}else{t=function(){return Date.now()}}return t})})();(function(){var t=e.amdDefine;t("29",["27","2a","2b","1a","1c","1d","28","2c"],function(e,t,r,i,n,a,o,s){"use strict";function u(u){u=r(u,r.EMPTY_OBJECT);var c=u.startTime;var f=!i(c);var l=u.stopTime;var d=!i(l);var h=u.currentTime;var v=!i(h);if(f&&d&&v){h=s.now();c=s.clone(h);l=s.addDays(h,1,new s)}else if(f&&d){c=s.clone(h);l=s.addDays(h,1,new s)}else if(f&&v){c=s.addDays(l,-1,new s);h=s.clone(c)}else if(v&&d){h=s.clone(c);l=s.addDays(c,1,new s)}else if(v){h=s.clone(c)}else if(d){l=s.addDays(h,1,new s)}else if(f){c=s.clone(h)}if(s.greaterThan(c,l)){throw new n("startTime must come before stopTime.")}this.startTime=c;this.stopTime=l;this.currentTime=h;this.multiplier=r(u.multiplier,1);this.clockStep=r(u.clockStep,t.SYSTEM_CLOCK_MULTIPLIER);this.clockRange=r(u.clockRange,e.UNBOUNDED);this.canAnimate=r(u.canAnimate,true);this.shouldAnimate=r(u.shouldAnimate,true);this.onTick=new a;this._lastSystemTime=o()}u.prototype.tick=function(){var r=o();var i=s.clone(this.currentTime);var n=this.startTime;var a=this.stopTime;var u=this.multiplier;if(this.canAnimate&&this.shouldAnimate){if(this.clockStep===t.SYSTEM_CLOCK){i=s.now(i)}else{if(this.clockStep===t.TICK_DEPENDENT){i=s.addSeconds(i,u,i)}else{var c=r-this._lastSystemTime;i=s.addSeconds(i,u*(c/1e3),i)}if(this.clockRange===e.CLAMPED){if(s.lessThan(i,n)){i=s.clone(n,i)}else if(s.greaterThan(i,a)){i=s.clone(a,i)}}else if(this.clockRange===e.LOOP_STOP){if(s.lessThan(i,n)){i=s.clone(n,i)}while(s.greaterThan(i,a)){i=s.addSeconds(n,s.secondsDifference(i,a),i)}}}}this.currentTime=i;this._lastSystemTime=r;this.onTick.raiseEvent(this);return i};return u})})();(function(){var t=e.amdDefine;t("2a",["26"],function(e){"use strict";var t={TICK_DEPENDENT:0,SYSTEM_CLOCK_MULTIPLIER:1,SYSTEM_CLOCK:2};return e(t)})})();(function(){var t=e.amdDefine;t("2d",["2e","1a","1b","1c","22","2f","30"],function(e,t,r,i,n,a,o){"use strict";var s={id:undefined};var u=new Array(2);function c(e){var t=e.propertyNames;var r=t.length;for(var i=0;i<r;i++){e[t[i]]=undefined}}function f(e,t,r,i){u[0]=r;u[1]=i.id;t[JSON.stringify(u)]=i.definitionChanged.addEventListener(h.prototype._onDefinitionChanged,e)}function l(e,t,r,i){u[0]=r;u[1]=i.id;var n=JSON.stringify(u);t[n]();t[n]=undefined}function d(e){e._shouldRecomposite=true;if(e._suspendCount!==0){return}var r=e._collections;var i=r.length;var n=e._collectionsCopy;var u=n.length;var d;var v;var M;var p;var g;var w=e._composite;var y=new o(e);var A=e._eventHash;var m;for(d=0;d<u;d++){g=n[d];g.collectionChanged.removeEventListener(h.prototype._onCollectionChanged,e);M=g.values;m=g.id;for(p=M.length-1;p>-1;p--){v=M[p];l(e,A,m,v)}}for(d=i-1;d>=0;d--){g=r[d];g.collectionChanged.addEventListener(h.prototype._onCollectionChanged,e);M=g.values;m=g.id;for(p=M.length-1;p>-1;p--){v=M[p];f(e,A,m,v);var D=y.getById(v.id);if(!t(D)){D=w.getById(v.id);if(!t(D)){s.id=v.id;D=new a(s)}else{c(D)}y.add(D)}D.merge(v)}}e._collectionsCopy=r.slice(0);w.suspendEvents();w.removeAll();var N=y.values;for(d=0;d<N.length;d++){w.add(N[d])}w.resumeEvents()}function h(r,i){this._owner=i;this._composite=new o(this);this._suspendCount=0;this._collections=t(r)?r.slice():[];this._collectionsCopy=[];this._id=e();this._eventHash={};d(this);this._shouldRecomposite=false}r(h.prototype,{collectionChanged:{get:function(){return this._composite._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._composite.values}},owner:{get:function(){return this._owner}}});h.prototype.addCollection=function(e,r){var n=t(r);if(!t(e)){throw new i("collection is required.")}if(n){if(r<0){throw new i("index must be greater than or equal to zero.")}else if(r>this._collections.length){throw new i("index must be less than or equal to the number of collections.")}}if(!n){r=this._collections.length;this._collections.push(e)}else{this._collections.splice(r,0,e)}d(this)};h.prototype.removeCollection=function(e){var t=this._collections.indexOf(e);if(t!==-1){this._collections.splice(t,1);d(this);return true}return false};h.prototype.removeAllCollections=function(){this._collections.length=0;d(this)};h.prototype.containsCollection=function(e){return this._collections.indexOf(e)!==-1};h.prototype.contains=function(e){return this._composite.contains(e)};h.prototype.indexOfCollection=function(e){return this._collections.indexOf(e)};h.prototype.getCollection=function(e){if(!t(e)){throw new i("index is required.","index")}return this._collections[e]};h.prototype.getCollectionsLength=function(){
return this._collections.length};function v(e,r){if(!t(r)){throw new i("collection is required.")}var n=e.indexOf(r);if(n===-1){throw new i("collection is not in this composite.")}return n}function M(e,t,r){var i=e._collections;t=n.clamp(t,0,i.length-1);r=n.clamp(r,0,i.length-1);if(t===r){return}var a=i[t];i[t]=i[r];i[r]=a;d(e)}h.prototype.raiseCollection=function(e){var t=v(this._collections,e);M(this,t,t+1)};h.prototype.lowerCollection=function(e){var t=v(this._collections,e);M(this,t,t-1)};h.prototype.raiseCollectionToTop=function(e){var t=v(this._collections,e);if(t===this._collections.length-1){return}this._collections.splice(t,1);this._collections.push(e);d(this)};h.prototype.lowerCollectionToBottom=function(e){var t=v(this._collections,e);if(t===0){return}this._collections.splice(t,1);this._collections.splice(0,0,e);d(this)};h.prototype.suspendEvents=function(){this._suspendCount++;this._composite.suspendEvents()};h.prototype.resumeEvents=function(){if(this._suspendCount===0){throw new i("resumeEvents can not be called before suspendEvents.")}this._suspendCount--;if(this._shouldRecomposite&&this._suspendCount===0){d(this);this._shouldRecomposite=false}this._composite.resumeEvents()};h.prototype.computeAvailability=function(){return this._composite.computeAvailability()};h.prototype.getById=function(e){return this._composite.getById(e)};h.prototype._onCollectionChanged=function(e,r,i){var n=this._collectionsCopy;var o=n.length;var u=this._composite;u.suspendEvents();var d;var h;var v;var M;var p=i.length;var g=this._eventHash;var w=e.id;for(d=0;d<p;d++){var y=i[d];l(this,g,w,y);var A=y.id;for(h=o-1;h>=0;h--){v=n[h].getById(A);if(t(v)){if(!t(M)){M=u.getById(A);c(M)}M.merge(v)}}if(!t(M)){u.removeById(A)}M=undefined}var m=r.length;for(d=0;d<m;d++){var D=r[d];f(this,g,w,D);var N=D.id;for(h=o-1;h>=0;h--){v=n[h].getById(N);if(t(v)){if(!t(M)){M=u.getById(N);if(!t(M)){s.id=N;M=new a(s);u.add(M)}else{c(M)}}M.merge(v)}}M=undefined}u.resumeEvents()};h.prototype._onDefinitionChanged=function(e,r,i,n){var a=this._collections;var o=this._composite;var s=a.length;var u=e.id;var c=o.getById(u);var f=c[r];var l=!t(f);var d=true;for(var h=s-1;h>=0;h--){var v=a[h].getById(e.id);if(t(v)){var M=v[r];if(t(M)){if(d){d=false;if(t(M.merge)&&t(M.clone)){f=M.clone(f)}else{f=M;break}}f.merge(M)}}}if(l&&c.propertyNames.indexOf(r)===-1){c.addProperty(r)}c[r]=f};return h})})();(function(){var t=e.amdDefine;t("2e",[],function(){"use strict";function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0;var r=e==="x"?t:t&3|8;return r.toString(16)})}return e})})();(function(){var t=e.amdDefine;t("31",["32","2b","1a","1b","1c","1d","33","34"],function(e,t,r,i,n,a,o,s){"use strict";function u(r,i){this._definitionChanged=new a;this._value=e.clone(r);this._referenceFrame=t(i,o.FIXED)}i(u.prototype,{isConstant:{get:function(){return!r(this._value)||this._referenceFrame===o.FIXED}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}});u.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,o.FIXED,t)};u.prototype.setValue=function(t,i){var n=false;if(!e.equals(this._value,t)){n=true;this._value=e.clone(t)}if(r(i)&&this._referenceFrame!==i){n=true;this._referenceFrame=i}if(n){this._definitionChanged.raiseEvent(this)}};u.prototype.getValueInReferenceFrame=function(e,t,i){if(!r(e)){throw new n("time is required.")}if(!r(t)){throw new n("referenceFrame is required.")}return s.convertToReferenceFrame(e,this._value,this._referenceFrame,t,i)};u.prototype.equals=function(t){return this===t||t instanceof u&&e.equals(this._value,t._value)&&this._referenceFrame===t._referenceFrame};return u})})();(function(){var t=e.amdDefine;t("35",["2b","1a","1b","1c","1d"],function(e,t,r,i,n){"use strict";function a(e){this._value=undefined;this._hasClone=false;this._hasEquals=false;this._definitionChanged=new n;this.setValue(e)}r(a.prototype,{isConstant:{value:true},definitionChanged:{get:function(){return this._definitionChanged}}});a.prototype.getValue=function(e,t){return this._hasClone?this._value.clone(t):this._value};a.prototype.setValue=function(e){var r=this._value;if(r!==e){var i=t(e);var n=i&&typeof e.clone==="function";var a=i&&typeof e.equals==="function";this._hasClone=n;this._hasEquals=a;var o=!a||!e.equals(r);if(o){this._value=!n?e:e.clone();this._definitionChanged.raiseEvent(this)}}};a.prototype.equals=function(e){return this===e||e instanceof a&&(!this._hasEquals&&this._value===e._value||this._hasEquals&&this._value.equals(e._value))};return a})})();(function(){var t=e.amdDefine;t("36",["2b","1a","35"],function(e,t,r){"use strict";function i(e,r,i,n,a){return{configurable:n,get:function(){return this[r]},set:function(n){var o=this[r];var s=this[i];if(t(s)){s();this[i]=undefined}var u=t(n);if(u&&!t(n.getValue)&&t(a)){n=a(n)}if(o!==n){this[r]=n;this._definitionChanged.raiseEvent(this,e,n,o)}if(t(n)&&t(n.definitionChanged)){this[i]=n.definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this,e,n,n)},this)}}}}function n(e){return new r(e)}function a(t,r,a){return i(t,"_"+t.toString(),"_"+t.toString()+"Subscription",e(r,false),e(a,n))}return a})})();(function(){var t=e.amdDefine;t("37",["36"],function(e){"use strict";function t(e){return e}function r(r,i){return e(r,i,t)}return r})})();(function(){var t=e.amdDefine;t("2f",["32","2e","2b","1a","1b","1c","1d","38","39","3a","3b","@empty","@empty","31","@empty","36","37","@empty","@empty","@empty","@empty","@empty","@empty","@empty","@empty","@empty","@empty","3c","@empty","@empty"],function(e,t,r,i,n,a,o,s,u,c,f,l,d,h,v,M,p,g,w,y,A,m,D,N,E,I,T,L,j,x){"use strict";function S(e){return new h(e)}function O(e){return M(e,undefined,S)}function C(e,t){return M(e,undefined,function(e){if(e instanceof t){return e}return new t(e)})}function z(e){e=r(e,r.EMPTY_OBJECT);var n=e.id;if(!i(n)){n=t()}this._availability=undefined;this._id=n;this._definitionChanged=new o;this._name=e.name;this._show=r(e.show,true);this._parent=undefined;this._propertyNames=["billboard","box","corridor","cylinder","description","ellipse","ellipsoid","label","model","orientation","path","point","polygon","polyline","polylineVolume","position","rectangle","viewFrom","wall"];this._billboard=undefined;this._billboardSubscription=undefined;this._box=undefined;this._boxSubscription=undefined;this._corridor=undefined;this._corridorSubscription=undefined;this._cylinder=undefined;this._cylinderSubscription=undefined;this._description=undefined;this._descriptionSubscription=undefined;this._ellipse=undefined;this._ellipseSubscription=undefined;this._ellipsoid=undefined;this._ellipsoidSubscription=undefined;this._label=undefined;this._labelSubscription=undefined;this._model=undefined;this._modelSubscription=undefined;this._orientation=undefined;this._orientationSubscription=undefined;this._path=undefined;this._pathSubscription=undefined;this._point=undefined;this._pointSubscription=undefined;this._polygon=undefined;this._polygonSubscription=undefined;this._polyline=undefined;this._polylineSubscription=undefined;this._polylineVolume=undefined;this._polylineVolumeSubscription=undefined;this._position=undefined;this._positionSubscription=undefined;this._rectangle=undefined;this._rectangleSubscription=undefined;this._viewFrom=undefined;this._viewFromSubscription=undefined;this._wall=undefined;this._wallSubscription=undefined;this._children=[];this.entityCollection=undefined;this.parent=e.parent;this.merge(e)}function _(e,t,r){var i=t.length;for(var n=0;n<i;n++){var a=t[n];var o=a._show;var s=!r&&o;var u=r&&o;if(s!==u){_(a,a._children,r)}}e._definitionChanged.raiseEvent(e,"isShowing",r,!r)}n(z.prototype,{availability:p("availability"),id:{get:function(){return this._id}},definitionChanged:{get:function(){return this._definitionChanged}},name:p("name"),show:{get:function(){return this._show},set:function(e){if(!i(e)){throw new a("value is required.")}if(e===this._show){return}var t=this.isShowing;this._show=e;var r=this.isShowing;if(t!==r){_(this,this._children,r)}this._definitionChanged.raiseEvent(this,"show",e,!e)}},isShowing:{get:function(){return this._show&&(!i(this.entityCollection)||this.entityCollection.show)&&(!i(this._parent)||this._parent.isShowing)}},parent:{get:function(){return this._parent},set:function(e){var t=this._parent;if(t===e){return}var r=this.isShowing;if(i(t)){var n=t._children.indexOf(this);t._children.splice(n,1)}this._parent=e;if(i(e)){e._children.push(this)}var a=this.isShowing;if(r!==a){_(this,this._children,a)}this._definitionChanged.raiseEvent(this,"parent",e,t)}},propertyNames:{get:function(){return this._propertyNames}},billboard:C("billboard",l),box:C("box",d),corridor:C("corridor",v),cylinder:C("cylinder",g),description:M("description"),ellipse:C("ellipse",w),ellipsoid:C("ellipsoid",y),label:C("label",A),model:C("model",m),orientation:M("orientation"),path:C("path",D),point:C("point",N),polygon:C("polygon",E),polyline:C("polyline",I),polylineVolume:C("polylineVolume",T),position:O("position"),rectangle:C("rectangle",j),viewFrom:M("viewFrom"),wall:C("wall",x)});z.prototype.isAvailable=function(e){if(!i(e)){throw new a("time is required.")}var t=this._availability;return!i(t)||t.contains(e)};z.prototype.addProperty=function(e){var t=this._propertyNames;if(!i(e)){throw new a("propertyName is required.")}if(t.indexOf(e)!==-1){throw new a(e+" is already a registered property.")}if(e in this){throw new a(e+" is a reserved property name.")}t.push(e);Object.defineProperty(this,e,p(e,true))};z.prototype.removeProperty=function(e){var t=this._propertyNames;var r=t.indexOf(e);if(!i(e)){throw new a("propertyName is required.")}if(r===-1){throw new a(e+" is not a registered property.")}this._propertyNames.splice(r,1);delete this[e]};z.prototype.merge=function(e){if(!i(e)){throw new a("source is required.")}this.name=r(this.name,e.name);this.availability=r(e.availability,this.availability);var t=this._propertyNames;var n=i(e._propertyNames)?e._propertyNames:Object.keys(e);var o=n.length;for(var s=0;s<o;s++){var u=n[s];if(u==="parent"){continue}var c=this[u];var f=e[u];if(!i(c)&&t.indexOf(u)===-1){this.addProperty(u)}if(i(f)){if(i(c)){if(i(c.merge)){c.merge(f)}}else if(i(f.merge)&&i(f.clone)){this[u]=f.clone()}else{this[u]=f}}}};var b=new s;var k=new e;var R=new c;z.prototype._getModelMatrix=function(e,t){var r=L.getValueOrUndefined(this._position,e,k);if(!i(r)){return undefined}var n=L.getValueOrUndefined(this._orientation,e,R);if(!i(n)){t=f.eastNorthUpToFixedFrame(r,undefined,t)}else{t=u.fromRotationTranslation(s.fromQuaternion(n,b),r,t)}return t};return z})})();(function(){var t=e.amdDefine;t("30",["3d","2e","1a","1b","1c","1d","3e","2c","3f","40","2f"],function(e,t,r,i,n,a,o,s,u,c,f){"use strict";var l={id:undefined};function d(e){if(e._firing){e._refire=true;return}if(e._suspendCount===0){var t=e._addedEntities;var r=e._removedEntities;var i=e._changedEntities;if(i.length!==0||t.length!==0||r.length!==0){e._firing=true;do{e._refire=false;var n=t.values.slice(0);var a=r.values.slice(0);var o=i.values.slice(0);t.removeAll();r.removeAll();i.removeAll();e._collectionChanged.raiseEvent(e,n,a,o)}while(e._refire);e._firing=false}}}function h(r){this._owner=r;this._entities=new e;this._addedEntities=new e;this._removedEntities=new e;this._changedEntities=new e;this._suspendCount=0;this._collectionChanged=new a;this._id=t();this._show=true;this._firing=false;this._refire=false}h.prototype.suspendEvents=function(){this._suspendCount++};h.prototype.resumeEvents=function(){if(this._suspendCount===0){throw new n("resumeEvents can not be called before suspendEvents.")}this._suspendCount--;d(this)};h.collectionChangedEventCallback=undefined;i(h.prototype,{collectionChanged:{get:function(){return this._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._entities.values}},show:{get:function(){return this._show},set:function(e){if(!r(e)){throw new n("value is required.")}if(e===this._show){return}this.suspendEvents();var t;var i=[];var a=this._entities.values;var o=a.length;for(t=0;t<o;t++){i.push(a[t].isShowing)}this._show=e;for(t=0;t<o;t++){var s=i[t];var u=a[t];if(s!==u.isShowing){u.definitionChanged.raiseEvent(u,"isShowing",u.isShowing,s)}}this.resumeEvents()}},owner:{get:function(){return this._owner}}});h.prototype.computeAvailability=function(){var e=o.MAXIMUM_VALUE;var t=o.MINIMUM_VALUE;var i=this._entities.values;for(var n=0,a=i.length;n<a;n++){var u=i[n];var f=u.availability;if(r(f)){var l=f.start;var d=f.stop;if(s.lessThan(l,e)&&!l.equals(o.MINIMUM_VALUE)){e=l}if(s.greaterThan(d,t)&&!d.equals(o.MAXIMUM_VALUE)){t=d}}}if(o.MAXIMUM_VALUE.equals(e)){e=o.MINIMUM_VALUE}if(o.MINIMUM_VALUE.equals(t)){t=o.MAXIMUM_VALUE}return new c({start:e,stop:t})};h.prototype.add=function(e){if(!r(e)){throw new n("entity is required.")}if(!(e instanceof f)){e=new f(e)}var t=e.id;var i=this._entities;if(i.contains(t)){throw new u("An entity with id "+t+" already exists in this collection.")}e.entityCollection=this;i.set(t,e);if(!this._removedEntities.remove(t)){this._addedEntities.set(t,e)}e.definitionChanged.addEventListener(h.prototype._onEntityDefinitionChanged,this);d(this);return e};h.prototype.remove=function(e){if(!r(e)){return false}return this.removeById(e.id)};h.prototype.contains=function(e){if(!r(e)){throw new n("entity is required")}return this._entities.get(e.id)===e};h.prototype.removeById=function(e){if(!r(e)){return false}var t=this._entities;var i=t.get(e);if(!this._entities.remove(e)){return false}if(!this._addedEntities.remove(e)){this._removedEntities.set(e,i);this._changedEntities.remove(e)}this._entities.remove(e);i.definitionChanged.removeEventListener(h.prototype._onEntityDefinitionChanged,this);d(this);return true};h.prototype.removeAll=function(){var e=this._entities;var t=e.length;var i=e.values;var n=this._addedEntities;var a=this._removedEntities;for(var o=0;o<t;o++){var s=i[o];var u=s.id;var c=n.get(u);if(!r(c)){s.definitionChanged.removeEventListener(h.prototype._onEntityDefinitionChanged,this);a.set(u,s)}}e.removeAll();n.removeAll();this._changedEntities.removeAll();d(this)};h.prototype.getById=function(e){if(!r(e)){throw new n("id is required.")}return this._entities.get(e)};h.prototype.getOrCreateEntity=function(e){if(!r(e)){throw new n("id is required.")}var t=this._entities.get(e);if(!r(t)){l.id=e;t=new f(l);this.add(t)}return t};h.prototype._onEntityDefinitionChanged=function(e){var t=e.id;if(!this._addedEntities.contains(t)){this._changedEntities.set(t,e)}d(this)};return h})})();(function(){var t=e.amdDefine;t("41",["32","42","2b","1a","1b","1c","43"],function(e,t,r,i,n,a,o){"use strict";function s(e){this._ellipsoid=r(e,o.WGS84);this._semimajorAxis=this._ellipsoid.maximumRadius;this._oneOverSemimajorAxis=1/this._semimajorAxis}n(s.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});s.prototype.project=function(t,r){var n=this._semimajorAxis;var a=t.longitude*n;var o=t.latitude*n;var s=t.height;if(!i(r)){return new e(a,o,s)}r.x=a;r.y=o;r.z=s;return r};s.prototype.unproject=function(e,r){if(!i(e)){throw new a("cartesian is required")}var n=this._oneOverSemimajorAxis;var o=e.x*n;var s=e.y*n;var u=e.z;if(!i(r)){return new t(o,s,u)}r.longitude=o;r.latitude=s;r.height=u;return r};return s})})();(function(){var t=e.amdDefine;t("44",["2b","1a","1c","22"],function(e,t,r,i){"use strict";var n=i.factorial;function a(e,t,r,i,n,o){var s=0;var u;var c;var f;if(i>0){for(c=0;c<n;c++){u=false;for(f=0;f<o.length&&!u;f++){if(c===o[f]){u=true}}if(!u){o.push(c);s+=a(e,t,r,i-1,n,o);o.splice(o.length-1,1)}}return s}s=1;for(c=0;c<n;c++){u=false;for(f=0;f<o.length&&!u;f++){if(c===o[f]){u=true}}if(!u){s*=e-r[t[c]]}}return s}var o={type:"Hermite"};o.getRequiredDataPoints=function(i,n){n=e(n,0);if(!t(i)){throw new r("degree is required.")}if(i<0){throw new r("degree must be 0 or greater.")}if(n<0){throw new r("inputOrder must be 0 or greater.")}return Math.max(Math.floor((i+1)/(n+1)),2)};o.interpolateOrderZero=function(e,r,i,o,s){if(!t(s)){s=new Array(o)}var u;var c;var f;var l;var d;var h;var v=r.length;var M=new Array(o);for(u=0;u<o;u++){s[u]=0;var p=new Array(v);M[u]=p;for(c=0;c<v;c++){p[c]=[]}}var g=v,w=new Array(g);for(u=0;u<g;u++){w[u]=u}var y=v-1;for(l=0;l<o;l++){for(c=0;c<g;c++){h=w[c]*o+l;M[l][0].push(i[h])}for(u=1;u<g;u++){var A=false;for(c=0;c<g-u;c++){var m=r[w[c]];var D=r[w[c+u]];var N;if(D-m<=0){h=w[c]*o+o*u+l;N=i[h];M[l][u].push(N/n(u))}else{N=M[l][u-1][c+1]-M[l][u-1][c];M[l][u].push(N/(D-m))}A=A||N!==0}if(!A){y=u-1}}}for(f=0,d=0;f<=d;f++){for(u=f;u<=y;u++){var E=a(e,w,r,f,u,[]);for(l=0;l<o;l++){var I=M[l][u][0];s[l+f*o]+=I*E}}}return s};var s=[];o.interpolate=function(e,r,i,n,o,c,f){var l=n*(c+1);if(!t(f)){f=new Array(l)}for(var d=0;d<l;d++){f[d]=0}var h=r.length;var v=new Array(h*(o+1));for(var M=0;M<h;M++){for(var p=0;p<o+1;p++){v[M*(o+1)+p]=M}}var g=v.length;var w=s;var y=u(w,v,r,i,n,o);var A=[];var m=g*(g+1)/2;var D=Math.min(y,c);for(var N=0;N<=D;N++){for(M=N;M<=y;M++){A.length=0;var E=a(e,v,r,N,M,A);var I=Math.floor(M*(1-M)/2)+g*M;for(var T=0;T<n;T++){var L=Math.floor(T*m);var j=w[L+I];f[T+N*n]+=j*E}}}return f};function u(e,t,r,n,a,o){var s;var u;var c=-1;var f=t.length;var l=f*(f+1)/2;for(var d=0;d<a;d++){var h=Math.floor(d*l);for(s=0;s<f;s++){u=t[s]*a*(o+1)+d;e[h+s]=n[u]}for(var v=1;v<f;v++){var M=0;var p=Math.floor(v*(1-v)/2)+f*v;var g=false;for(s=0;s<f-v;s++){var w=r[t[s]];var y=r[t[s+v]];var A;var m;if(y-w<=0){u=t[s]*a*(o+1)+a*v+d;A=n[u];m=A/i.factorial(v);e[h+p+M]=m;M++}else{var D=Math.floor((v-1)*(2-v)/2)+f*(v-1);A=e[h+D+s+1]-e[h+D+s];m=A/(y-w);e[h+p+M]=m;M++}g=g||A!==0}if(g){c=Math.max(c,v)}}}return c}return o})})();(function(){var t=e.amdDefine;t("45",["1a","1b","1c","38","3a","33","3b"],function(e,t,r,i,n,a,o){"use strict";var s=function(){r.throwInstantiationError()};t(s.prototype,{isConstant:{get:r.throwInstantiationError},definitionChanged:{get:r.throwInstantiationError}});s.prototype.getValue=r.throwInstantiationError;s.prototype.equals=r.throwInstantiationError;function u(e,t){return e&&e.id?e.id===(t&&t.id):e===t}function c(t){var r=[];while(e(t)){r.unshift(t);t=t.position&&t.position.referenceFrame}return r}function f(e,t){if(!u(e[0],t[0])){return-1}var r=Math.min(e.length,t.length);for(var i=0;i<=r;i++){if(!u(e[i],t[i])){return i-1}}return-1}var l=new i;var d=new n;function h(t){var r=o.computeIcrfToFixedMatrix(t,l);if(!e(r)){r=o.computeTemeToPseudoFixedMatrix(t,l)}return n.fromRotationMatrix(r,d)}var v=new n;s.convertToReferenceFrame=function(t,r,i,o,s){if(!e(r)){return r}if(!e(s)){s=new n}if(i===o){return n.clone(r,s)}if(!e(i)||!e(o)){return undefined}var u=c(i);var l=c(o);var d=f(u,l);var M=u[d];var p=function(r,i){if(!e(r)){return r}var a=i.orientation;if(!e(a)){return undefined}var o=a.getValue(t,v);if(!e(o)){return undefined}return n.multiply(o,r,r)};var g=function(r,i){if(!e(r)){return r}var a=i.orientation;if(!e(a)){return undefined}var o=a.getValue(t,v);if(!e(o)){return undefined}n.conjugate(o,o);return n.multiply(o,r,r)};if(e(M)){u=u.slice(d+1);l=l.slice(d+1);var w=u.reduceRight(p,n.clone(r,s));if(!e(w)){return undefined}return l.reduce(g,w)}var y=u.shift();var A=l.shift();var m,D;if(y===a.INERTIAL&&A===a.FIXED){D=u.reduceRight(p,n.clone(r,s));if(!e(D)){return undefined}m=n.multiply(h(t),D,s);return l.reduce(g,m)}if(y===a.FIXED&&A===a.INERTIAL){m=u.reduceRight(p,n.clone(r,s));if(!e(m)){return undefined}var N=n.conjugate(h(t),v);D=n.multiply(N,m,s);return l.reduce(g,D)}return undefined};return s})})();(function(){var t=e.amdDefine;t("46",["1a","1b","1c","47"],function(e,t,r,i){"use strict";function n(){this._offCenterFrustum=new i;this.fov=undefined;this._fov=undefined;this._fovy=undefined;this._sseDenominator=undefined;this.aspectRatio=undefined;this._aspectRatio=undefined;this.near=1;this._near=this.near;this.far=5e8;this._far=this.far;this.xOffset=0;this._xOffset=this.xOffset;this.yOffset=0;this._yOffset=this.yOffset}function a(t){if(!e(t.fov)||!e(t.aspectRatio)||!e(t.near)||!e(t.far)){throw new r("fov, aspectRatio, near, or far parameters are not set.")}var i=t._offCenterFrustum;if(t.fov!==t._fov||t.aspectRatio!==t._aspectRatio||t.near!==t._near||t.far!==t._far||t.xOffset!==t._xOffset||t.yOffset!==t._yOffset){if(t.fov<0||t.fov>=Math.PI){throw new r("fov must be in the range [0, PI).")}if(t.aspectRatio<0){throw new r("aspectRatio must be positive.")}if(t.near<0||t.near>t.far){throw new r("near must be greater than zero and less than far.")}t._aspectRatio=t.aspectRatio;t._fov=t.fov;t._fovy=t.aspectRatio<=1?t.fov:Math.atan(Math.tan(t.fov*.5)/t.aspectRatio)*2;t._near=t.near;t._far=t.far;t._sseDenominator=2*Math.tan(.5*t._fovy);t._xOffset=t.xOffset;t._yOffset=t.yOffset;i.top=t.near*Math.tan(.5*t._fovy);i.bottom=-i.top;i.right=t.aspectRatio*i.top;i.left=-i.right;i.near=t.near;i.far=t.far;i.right+=t.xOffset;i.left+=t.xOffset;i.top+=t.yOffset;i.bottom+=t.yOffset}}t(n.prototype,{projectionMatrix:{get:function(){a(this);return this._offCenterFrustum.projectionMatrix}},infiniteProjectionMatrix:{get:function(){a(this);return this._offCenterFrustum.infiniteProjectionMatrix}},fovy:{get:function(){a(this);return this._fovy}},sseDenominator:{get:function(){a(this);return this._sseDenominator}}});n.prototype.computeCullingVolume=function(e,t,r){a(this);return this._offCenterFrustum.computeCullingVolume(e,t,r)};n.prototype.getPixelDimensions=function(e,t,r,i){a(this);return this._offCenterFrustum.getPixelDimensions(e,t,r,i)};n.prototype.clone=function(t){if(!e(t)){t=new n}t.aspectRatio=this.aspectRatio;t.fov=this.fov;t.near=this.near;t.far=this.far;t._aspectRatio=undefined;t._fov=undefined;t._near=undefined;t._far=undefined;this._offCenterFrustum.clone(t._offCenterFrustum);return t};n.prototype.equals=function(t){if(!e(t)){return false}a(this);a(t);return this.fov===t.fov&&this.aspectRatio===t.aspectRatio&&this.near===t.near&&this.far===t.far&&this._offCenterFrustum.equals(t._offCenterFrustum)};return n})})();(function(){var t=e.amdDefine;t("48",["26"],function(e){"use strict";var t={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};return e(t)})})();(function(){var t=e.amdDefine;t("49",["32","4a","2b","1a","1c","48","4b"],function(e,t,r,i,n,a,o){"use strict";function s(e){this.planes=r(e,[])}var u=[new e,new e,new e];e.clone(e.UNIT_X,u[0]);e.clone(e.UNIT_Y,u[1]);e.clone(e.UNIT_Z,u[2]);var c=new e;var f=new e;var l=new o(new e,0);s.fromBoundingSphere=function(r,a){if(!i(r)){throw new n("boundingSphere is required.")}if(!i(a)){a=new s}var o=u.length;var l=a.planes;l.length=2*o;var d=r.center;var h=r.radius;var v=0;for(var M=0;M<o;++M){var p=u[M];var g=l[v];var w=l[v+1];if(!i(g)){g=l[v]=new t}if(!i(w)){w=l[v+1]=new t}e.multiplyByScalar(p,-h,c);e.add(d,c,c);g.x=p.x;g.y=p.y;g.z=p.z;g.w=-e.dot(p,c);e.multiplyByScalar(p,h,c);e.add(d,c,c);w.x=-p.x;w.y=-p.y;w.z=-p.z;w.w=-e.dot(e.negate(p,f),c);v+=2}return a};s.prototype.computeVisibility=function(e){if(!i(e)){throw new n("boundingVolume is required.")}var t=this.planes;var r=false;for(var s=0,u=t.length;s<u;++s){var c=e.intersectPlane(o.fromCartesian4(t[s],l));if(c===a.OUTSIDE){return a.OUTSIDE}else if(c===a.INTERSECTING){r=true}}return r?a.INTERSECTING:a.INSIDE};s.prototype.computeVisibilityWithPlaneMask=function(e,t){if(!i(e)){throw new n("boundingVolume is required.")}if(!i(t)){throw new n("parentPlaneMask is required.")}if(t===s.MASK_OUTSIDE||t===s.MASK_INSIDE){return t}var r=s.MASK_INSIDE;var u=this.planes;for(var c=0,f=u.length;c<f;++c){var d=c<31?1<<c:0;if(c<31&&(t&d)===0){continue}var h=e.intersectPlane(o.fromCartesian4(u[c],l));if(h===a.OUTSIDE){return s.MASK_OUTSIDE}else if(h===a.INTERSECTING){r|=d}}return r};s.MASK_OUTSIDE=4294967295;s.MASK_INSIDE=0;s.MASK_INDETERMINATE=2147483647;return s})})();(function(){var t=e.amdDefine;t("47",["1f","32","4a","2b","1a","1b","1c","39","49"],function(e,t,r,i,n,a,o,s,u){"use strict";function c(){this.left=undefined;this._left=undefined;this.right=undefined;this._right=undefined;this.top=undefined;this._top=undefined;this.bottom=undefined;this._bottom=undefined;this.near=1;this._near=this.near;this.far=5e8;this._far=this.far;this._cullingVolume=new u;this._perspectiveMatrix=new s;this._infinitePerspective=new s}function f(e){if(!n(e.right)||!n(e.left)||!n(e.top)||!n(e.bottom)||!n(e.near)||!n(e.far)){throw new o("right, left, top, bottom, near, or far parameters are not set.")}var t=e.top;var r=e.bottom;var i=e.right;var a=e.left;var u=e.near;var c=e.far;if(t!==e._top||r!==e._bottom||a!==e._left||i!==e._right||u!==e._near||c!==e._far){if(e.near<=0||e.near>e.far){throw new o("near must be greater than zero and less than far.")}e._left=a;e._right=i;e._top=t;e._bottom=r;e._near=u;e._far=c;e._perspectiveMatrix=s.computePerspectiveOffCenter(a,i,r,t,u,c,e._perspectiveMatrix);e._infinitePerspective=s.computeInfinitePerspectiveOffCenter(a,i,r,t,u,e._infinitePerspective)}}a(c.prototype,{projectionMatrix:{get:function(){f(this);return this._perspectiveMatrix}},infiniteProjectionMatrix:{get:function(){f(this);return this._infinitePerspective}}});var l=new t;var d=new t;var h=new t;var v=new t;c.prototype.computeCullingVolume=function(e,i,a){if(!n(e)){throw new o("position is required.")}if(!n(i)){throw new o("direction is required.")}if(!n(a)){throw new o("up is required.")}var s=this._cullingVolume.planes;var u=this.top;var c=this.bottom;var f=this.right;var M=this.left;var p=this.near;var g=this.far;var w=t.cross(i,a,l);var y=d;t.multiplyByScalar(i,p,y);t.add(e,y,y);var A=h;t.multiplyByScalar(i,g,A);t.add(e,A,A);var m=v;t.multiplyByScalar(w,M,m);t.add(y,m,m);t.subtract(m,e,m);t.normalize(m,m);t.cross(m,a,m);var D=s[0];if(!n(D)){D=s[0]=new r}D.x=m.x;D.y=m.y;D.z=m.z;D.w=-t.dot(m,e);t.multiplyByScalar(w,f,m);t.add(y,m,m);t.subtract(m,e,m);t.normalize(m,m);t.cross(a,m,m);D=s[1];if(!n(D)){D=s[1]=new r}D.x=m.x;D.y=m.y;D.z=m.z;D.w=-t.dot(m,e);t.multiplyByScalar(a,c,m);t.add(y,m,m);t.subtract(m,e,m);t.normalize(m,m);t.cross(w,m,m);D=s[2];if(!n(D)){D=s[2]=new r}D.x=m.x;D.y=m.y;D.z=m.z;D.w=-t.dot(m,e);t.multiplyByScalar(a,u,m);t.add(y,m,m);t.subtract(m,e,m);t.normalize(m,m);t.cross(m,w,m);D=s[3];if(!n(D)){D=s[3]=new r}D.x=m.x;D.y=m.y;D.z=m.z;D.w=-t.dot(m,e);D=s[4];if(!n(D)){D=s[4]=new r}D.x=i.x;D.y=i.y;D.z=i.z;D.w=-t.dot(i,y);t.negate(i,m);D=s[5];if(!n(D)){D=s[5]=new r}D.x=m.x;D.y=m.y;D.z=m.z;D.w=-t.dot(m,A);return this._cullingVolume};c.prototype.getPixelDimensions=function(e,t,r,i){f(this);if(!n(e)||!n(t)){throw new o("Both drawingBufferWidth and drawingBufferHeight are required.")}if(e<=0){throw new o("drawingBufferWidth must be greater than zero.")}if(t<=0){throw new o("drawingBufferHeight must be greater than zero.")}if(!n(r)){throw new o("distance is required.")}if(!n(i)){throw new o("A result object is required.")}var a=1/this.near;var s=this.top*a;var u=2*r*s/t;s=this.right*a;var c=2*r*s/e;i.x=c;i.y=u;return i};c.prototype.clone=function(e){if(!n(e)){e=new c}e.right=this.right;e.left=this.left;e.top=this.top;e.bottom=this.bottom;e.near=this.near;e.far=this.far;e._left=undefined;e._right=undefined;e._top=undefined;e._bottom=undefined;e._near=undefined;e._far=undefined;return e};c.prototype.equals=function(e){return n(e)&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far};return c})})();(function(){var t=e.amdDefine;t("4c",["1a","1b","1c","1d","3c"],function(e,t,r,i,n){"use strict";function a(t){var r=t._targetEntity;if(t._resolveEntity){r=t._targetCollection.getById(t._targetId);if(e(r)){t._targetEntity=r;t._resolveEntity=false}}return r}var o=function(t,n){if(!e(t)){throw new r("targetCollection is required.")}if(!e(n)||n===""){throw new r("targetId is required.")}this._targetCollection=t;this._targetId=n;this._targetEntity=undefined;this._definitionChanged=new i;this._resolveEntity=true;t.collectionChanged.addEventListener(o.prototype._onCollectionChanged,this)};t(o.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},id:{get:function(){return this._targetId}},position:{get:function(){var t=a(this);return e(t)?t.position:undefined}},orientation:{get:function(){var t=a(this);return e(t)?t.orientation:undefined}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},resolvedEntity:{get:function(){return a(this)}}});o.prototype._onCollectionChanged=function(t,r,i){var n=this._targetEntity;if(e(n)){if(i.indexOf(n)!==-1){this._resolveEntity=true}else if(this._resolveEntity){a(this);if(!this._resolveEntity){this._definitionChanged.raiseEvent(this)}}}};return o})})();(function(){var t=e.amdDefine;t("4d",["1a","1b","1c","1d","3f","3c"],function(e,t,r,i,n,a){"use strict";function o(t){var r=true;if(t._resolveEntity){var i=t._targetCollection.getById(t._targetId);if(e(i)){i.definitionChanged.addEventListener(u.prototype._onTargetEntityDefinitionChanged,t);t._targetEntity=i;t._resolveEntity=false}else{i=t._targetEntity;r=false}if(!e(i)){throw new n('target entity "'+t._targetId+'" could not be resolved.')}}return r}function s(t){var r=t._targetProperty;if(t._resolveProperty){var i=o(t);var a=t._targetPropertyNames;r=t._targetEntity;var s=a.length;for(var u=0;u<s&&e(r);u++){r=r[a[u]]}if(e(r)){t._targetProperty=r;t._resolveProperty=!i}else if(!e(t._targetProperty)){throw new n('targetProperty "'+t._targetId+"."+a.join(".")+'" could not be resolved.')}}return r}function u(t,n,a){if(!e(t)){throw new r("targetCollection is required.")}if(!e(n)||n===""){throw new r("targetId is required.")}if(!e(a)||a.length===0){throw new r("targetPropertyNames is required.")}for(var o=0;o<a.length;o++){var s=a[o];if(!e(s)||s===""){throw new r("reference contains invalid properties.")}}this._targetCollection=t;this._targetId=n;this._targetPropertyNames=a;this._targetProperty=undefined;this._targetEntity=undefined;this._definitionChanged=new i;this._resolveEntity=true;this._resolveProperty=true;t.collectionChanged.addEventListener(u.prototype._onCollectionChanged,this)}t(u.prototype,{isConstant:{get:function(){return a.isConstant(s(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return s(this).referenceFrame}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return s(this)}}});u.fromString=function(t,i){if(!e(t)){throw new r("targetCollection is required.")}if(!e(i)){throw new r("referenceString is required.")}var n;var a=[];var o=true;var s=false;var c="";for(var f=0;f<i.length;++f){var l=i.charAt(f);if(s){c+=l;s=false}else if(l==="\\"){s=true}else if(o&&l==="#"){n=c;o=false;c=""}else if(!o&&l==="."){a.push(c);c=""}else{c+=l}}a.push(c);return new u(t,n,a)};u.prototype.getValue=function(e,t){return s(this).getValue(e,t)};u.prototype.getValueInReferenceFrame=function(e,t,r){return s(this).getValueInReferenceFrame(e,t,r)};u.prototype.getType=function(e){return s(this).getType(e)};u.prototype.equals=function(e){if(this===e){return true}var t=this._targetPropertyNames;var r=e._targetPropertyNames;if(this._targetCollection!==e._targetCollection||this._targetId!==e._targetId||t.length!==r.length){return false}var i=this._targetPropertyNames.length;for(var n=0;n<i;n++){if(t[n]!==r[n]){return false}}return true};u.prototype._onTargetEntityDefinitionChanged=function(e,t,r,i){if(this._targetPropertyNames[0]===t){this._resolveProperty=true;this._definitionChanged.raiseEvent(this)}};u.prototype._onCollectionChanged=function(t,r,i){var n=this._targetEntity;if(e(n)){if(i.indexOf(n)!==-1){n.definitionChanged.removeEventListener(u.prototype._onTargetEntityDefinitionChanged,this);this._resolveEntity=true;this._resolveProperty=true}else if(this._resolveEntity){s(this);if(!this._resolveEntity){this._definitionChanged.raiseEvent(this)}}}};return u})})();(function(){var t=e.amdDefine;t("33",["26"],function(e){
"use strict";var t={FIXED:0,INERTIAL:1};return e(t)})})();(function(){var t=e.amdDefine;t("34",["32","1a","1b","1c","38","39","3a","33","3b"],function(e,t,r,i,n,a,o,s,u){"use strict";function c(){i.throwInstantiationError()}r(c.prototype,{isConstant:{get:i.throwInstantiationError},definitionChanged:{get:i.throwInstantiationError},referenceFrame:{get:i.throwInstantiationError}});c.prototype.getValue=i.throwInstantiationError;c.prototype.getValueInReferenceFrame=i.throwInstantiationError;c.prototype.equals=i.throwInstantiationError;function f(e,t){return e&&e.id?e.id===(t&&t.id):e===t}function l(e){var r=[];while(t(e)){r.unshift(e);e=e.position&&e.position.referenceFrame}return r}function d(e,t){if(!f(e[0],t[0])){return-1}var r=Math.min(e.length,t.length);for(var i=0;i<=r;i++){if(!f(e[i],t[i])){return i-1}}return-1}var h=new n;function v(e){var r=u.computeIcrfToFixedMatrix(e,h);if(!t(r)){r=u.computeTemeToPseudoFixedMatrix(e,h)}return r}var M=new n;var p=new e;var g=new o;c.convertToReferenceFrame=function(r,i,a,u,c){if(!t(i)){return i}if(!t(c)){c=new e}if(a===u){return e.clone(i,c)}if(!t(a)||!t(u)){return undefined}var f=l(a);var h=l(u);var w=d(f,h);var y=f[w];var A=function(i,a){if(!t(i)){return i}var o=a.position;if(!t(o)){return undefined}var s=o.referenceFrame;var u=o.getValueInReferenceFrame(r,s,p);if(!t(u)){return undefined}var c=a.orientation;if(t(c)){var f=c.getValue(r,g);if(!t(f)){return undefined}n.fromQuaternion(f,M);n.multiplyByVector(M,i,i);return e.add(u,i,i)}return e.add(u,i,i)};var m=function(i,a){if(!t(i)){return i}var s=a.position;if(!t(s)){return undefined}var u=s.referenceFrame;var c=s.getValueInReferenceFrame(r,u,p);if(!t(c)){return undefined}i=e.subtract(i,c,i);var f=a.orientation;if(t(f)){var l=f.getValue(r,g);if(!t(l)){return undefined}o.conjugate(l,l);n.fromQuaternion(l,M);n.multiplyByVector(M,i,i)}return i};if(t(y)){f=f.slice(w+1);h=h.slice(w+1);var D=f.reduceRight(A,e.clone(i,c));if(!t(D)){return undefined}return h.reduce(m,D)}var N=f.shift();var E=h.shift();var I,T;if(N===s.INERTIAL&&E===s.FIXED){T=f.reduceRight(A,e.clone(i,c));if(!t(T)){return undefined}I=n.multiplyByVector(v(r),T,c);return h.reduce(m,I)}if(N===s.FIXED&&E===s.INERTIAL){I=f.reduceRight(A,e.clone(i,c));if(!t(I)){return undefined}var L=n.transpose(v(r),M);T=n.multiplyByVector(L,I,c);return h.reduce(m,T)}return undefined};return c})})();(function(){var t=e.amdDefine;t("40",["2b","1a","1b","1c","26","2c"],function(e,t,r,i,n,a){"use strict";function o(r){r=e(r,e.EMPTY_OBJECT);this.start=t(r.start)?a.clone(r.start):new a;this.stop=t(r.stop)?a.clone(r.stop):new a;this.data=r.data;this.isStartIncluded=e(r.isStartIncluded,true);this.isStopIncluded=e(r.isStopIncluded,true)}r(o.prototype,{isEmpty:{get:function(){var e=a.compare(this.stop,this.start);return e<0||e===0&&(!this.isStartIncluded||!this.isStopIncluded)}}});var s={start:undefined,stop:undefined,isStartIncluded:undefined,isStopIncluded:undefined,data:undefined};o.fromIso8601=function(r,n){if(!t(r)){throw new i("options is required.")}if(!t(r.iso8601)){throw new i("options.iso8601 is required.")}var u=r.iso8601.split("/");var c=a.fromIso8601(u[0]);var f=a.fromIso8601(u[1]);var l=e(r.isStartIncluded,true);var d=e(r.isStopIncluded,true);var h=r.data;if(!t(n)){s.start=c;s.stop=f;s.isStartIncluded=l;s.isStopIncluded=d;s.data=h;return new o(s)}n.start=c;n.stop=f;n.isStartIncluded=l;n.isStopIncluded=d;n.data=h;return n};o.toIso8601=function(e,r){if(!t(e)){throw new i("timeInterval is required.")}return a.toIso8601(e.start,r)+"/"+a.toIso8601(e.stop,r)};o.clone=function(e,r){if(!t(e)){return undefined}if(!t(r)){return new o(e)}r.start=e.start;r.stop=e.stop;r.isStartIncluded=e.isStartIncluded;r.isStopIncluded=e.isStopIncluded;r.data=e.data;return r};o.equals=function(e,r,i){return e===r||t(e)&&t(r)&&(e.isEmpty&&r.isEmpty||e.isStartIncluded===r.isStartIncluded&&e.isStopIncluded===r.isStopIncluded&&a.equals(e.start,r.start)&&a.equals(e.stop,r.stop)&&(e.data===r.data||t(i)&&i(e.data,r.data)))};o.equalsEpsilon=function(e,r,n,o){if(typeof n!=="number"){throw new i("epsilon is required and must be a number.")}return e===r||t(e)&&t(r)&&(e.isEmpty&&r.isEmpty||e.isStartIncluded===r.isStartIncluded&&e.isStopIncluded===r.isStopIncluded&&a.equalsEpsilon(e.start,r.start,n)&&a.equalsEpsilon(e.stop,r.stop,n)&&(e.data===r.data||t(o)&&o(e.data,r.data)))};o.intersect=function(e,r,n,s){if(!t(e)){throw new i("left is required.")}if(!t(n)){throw new i("result is required.")}if(!t(r)){return o.clone(o.EMPTY,n)}var u=e.start;var c=e.stop;var f=r.start;var l=r.stop;var d=a.greaterThanOrEquals(f,u)&&a.greaterThanOrEquals(c,f);var h=!d&&a.lessThanOrEquals(f,u)&&a.lessThanOrEquals(u,l);if(!d&&!h){return o.clone(o.EMPTY,n)}var v=e.isStartIncluded;var M=e.isStopIncluded;var p=r.isStartIncluded;var g=r.isStopIncluded;var w=a.lessThan(c,l);n.start=d?f:u;n.isStartIncluded=v&&p||!a.equals(f,u)&&(d&&p||h&&v);n.stop=w?c:l;n.isStopIncluded=w?M:M&&g||!a.equals(l,c)&&g;n.data=t(s)?s(e.data,r.data):e.data;return n};o.contains=function(e,r){if(!t(e)){throw new i("timeInterval is required.")}if(!t(r)){throw new i("julianDate is required.")}if(e.isEmpty){return false}var n=a.compare(e.start,r);if(n===0){return e.isStartIncluded}var o=a.compare(r,e.stop);if(o===0){return e.isStopIncluded}return n<0&&o<0};o.prototype.clone=function(e){return o.clone(this,e)};o.prototype.equals=function(e,t){return o.equals(this,e,t)};o.prototype.equalsEpsilon=function(e,t,r){return o.equalsEpsilon(this,e,t,r)};o.prototype.toString=function(){return o.toIso8601(this)};o.EMPTY=n(new o({start:new a,stop:new a,isStartIncluded:false,isStopIncluded:false}));return o})})();(function(){var t=e.amdDefine;t("3e",["26","2c","40"],function(e,t,r){"use strict";var i=e(t.fromIso8601("0000-01-01T00:00:00Z"));var n=e(t.fromIso8601("9999-12-31T24:00:00Z"));var a=e(new r({start:i,stop:n}));var o={MINIMUM_VALUE:i,MAXIMUM_VALUE:n,MAXIMUM_INTERVAL:a};return o})})();(function(){var t=e.amdDefine;t("3c",["2b","1a","1b","1c","3e"],function(e,t,r,i,n){"use strict";function a(){i.throwInstantiationError()}r(a.prototype,{isConstant:{get:i.throwInstantiationError},definitionChanged:{get:i.throwInstantiationError}});a.prototype.getValue=i.throwInstantiationError;a.prototype.equals=i.throwInstantiationError;a.equals=function(e,r){return e===r||t(e)&&e.equals(r)};a.arrayEquals=function(e,r){if(e===r){return true}if(!t(e)||!t(r)||e.length!==r.length){return false}var i=e.length;for(var n=0;n<i;n++){if(!a.equals(e[n],r[n])){return false}}return true};a.isConstant=function(e){return!t(e)||e.isConstant};a.getValueOrUndefined=function(e,r,i){return t(e)?e.getValue(r,i):undefined};a.getValueOrDefault=function(r,i,n,a){return t(r)?e(r.getValue(i,a),n):n};a.getValueOrClonedDefault=function(e,r,i,n){var a;if(t(e)){a=e.getValue(r,n)}if(!t(a)){a=i.clone(a)}return a};return a})})();(function(){var t=e.amdDefine;t("4e",["32","2b","1a","1b","1c","1d","33","34","3c","4f"],function(e,t,r,i,n,a,o,s,u,c){"use strict";function f(r,i){i=t(i,0);var n;if(i>0){n=new Array(i);for(var s=0;s<i;s++){n[s]=e}}this._numberOfDerivatives=i;this._property=new c(e,n);this._definitionChanged=new a;this._referenceFrame=t(r,o.FIXED);this._property._definitionChanged.addEventListener(function(){this._definitionChanged.raiseEvent(this)},this)}i(f.prototype,{isConstant:{get:function(){return this._property.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}},interpolationDegree:{get:function(){return this._property.interpolationDegree}},interpolationAlgorithm:{get:function(){return this._property.interpolationAlgorithm}},numberOfDerivatives:{get:function(){return this._numberOfDerivatives}},forwardExtrapolationType:{get:function(){return this._property.forwardExtrapolationType},set:function(e){this._property.forwardExtrapolationType=e}},forwardExtrapolationDuration:{get:function(){return this._property.forwardExtrapolationDuration},set:function(e){this._property.forwardExtrapolationDuration=e}},backwardExtrapolationType:{get:function(){return this._property.backwardExtrapolationType},set:function(e){this._property.backwardExtrapolationType=e}},backwardExtrapolationDuration:{get:function(){return this._property.backwardExtrapolationDuration},set:function(e){this._property.backwardExtrapolationDuration=e}}});f.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,o.FIXED,t)};f.prototype.getValueInReferenceFrame=function(e,t,i){if(!r(e)){throw new n("time is required.")}if(!r(t)){throw new n("referenceFrame is required.")}i=this._property.getValue(e,i);if(r(i)){return s.convertToReferenceFrame(e,i,this._referenceFrame,t,i)}return undefined};f.prototype.setInterpolationOptions=function(e){this._property.setInterpolationOptions(e)};f.prototype.addSample=function(e,t,i){var a=this._numberOfDerivatives;if(a>0&&(!r(i)||i.length!==a)){throw new n("derivatives length must be equal to the number of derivatives.")}this._property.addSample(e,t,i)};f.prototype.addSamples=function(e,t,r){this._property.addSamples(e,t,r)};f.prototype.addSamplesPackedArray=function(e,t){this._property.addSamplesPackedArray(e,t)};f.prototype.equals=function(e){return this===e||e instanceof f&&u.equals(this._property,e._property)&&this._referenceFrame===e._referenceFrame};return f})})();(function(){var t=e.amdDefine;t("1d",["1a","1b","1c"],function(e,t,r){"use strict";function i(){this._listeners=[];this._scopes=[];this._toRemove=[];this._insideRaiseEvent=false}t(i.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}});i.prototype.addEventListener=function(e,t){if(typeof e!=="function"){throw new r("listener is required and must be a function.")}this._listeners.push(e);this._scopes.push(t);var i=this;return function(){i.removeEventListener(e,t)}};i.prototype.removeEventListener=function(e,t){if(typeof e!=="function"){throw new r("listener is required and must be a function.")}var i=this._listeners;var n=this._scopes;var a=-1;for(var o=0;o<i.length;o++){if(i[o]===e&&n[o]===t){a=o;break}}if(a!==-1){if(this._insideRaiseEvent){this._toRemove.push(a);i[a]=undefined;n[a]=undefined}else{i.splice(a,1);n.splice(a,1)}return true}return false};i.prototype.raiseEvent=function(){this._insideRaiseEvent=true;var t;var r=this._listeners;var i=this._scopes;var n=r.length;for(t=0;t<n;t++){var a=r[t];if(e(a)){r[t].apply(i[t],arguments)}}var o=this._toRemove;n=o.length;for(t=0;t<n;t++){var s=o[t];r.splice(s,1);i.splice(s,1)}o.length=0;this._insideRaiseEvent=false};return i})})();(function(){var t=e.amdDefine;t("50",["26"],function(e){"use strict";var t={NONE:0,HOLD:1,EXTRAPOLATE:2};return e(t)})})();(function(){var t=e.amdDefine;t("51",["1a","1c"],function(e,t){"use strict";var r={type:"Linear"};r.getRequiredDataPoints=function(e){return 2};r.interpolateOrderZero=function(r,i,n,a,o){if(i.length!==2){throw new t("The xTable provided to the linear interpolator must have exactly two elements.")}else if(a<=0){throw new t("There must be at least 1 dependent variable for each independent variable.")}if(!e(o)){o=new Array(a)}var s;var u;var c;var f=i[0];var l=i[1];if(f===l){throw new t("Divide by zero error: xTable[0] and xTable[1] are equal")}for(s=0;s<a;s++){u=n[s];c=n[s+a];o[s]=((c-u)*r+l*u-f*c)/(l-f)}return o};return r})})();(function(){var t=e.amdDefine;t("4f",["52","2b","1a","1b","1c","1d","50","2c","51"],function(e,t,r,i,n,a,o,s,u){"use strict";var c={packedLength:1,pack:function(e,r,i){i=t(i,0);r[i]=e},unpack:function(e,r,i){r=t(r,0);return e[r]}};function f(e,t,r){var i;var n=e.length;var a=r.length;var o=n+a;e.length=o;if(n!==t){var s=n-1;for(i=o-1;i>=t;i--){e[i]=e[s--]}}for(i=0;i<a;i++){e[t++]=r[i]}}function l(e,t){if(e instanceof s){return e}if(typeof e==="string"){return s.fromIso8601(e)}return s.addSeconds(t,e,new s)}var d=[];var h=[];function v(t,i,n,a,o){var u=0;var c;var v;var M;var p;var g;var w;while(u<a.length){g=l(a[u],t);M=e(i,g,s.compare);var y=0;var A=0;if(M<0){M=~M;p=M*o;v=undefined;w=i[M];while(u<a.length){g=l(a[u],t);if(r(v)&&s.compare(v,g)>=0||r(w)&&s.compare(g,w)>=0){break}d[y++]=g;u=u+1;for(c=0;c<o;c++){h[A++]=a[u];u=u+1}v=g}if(y>0){h.length=A;f(n,p,h);d.length=y;f(i,M,d)}}else{for(c=0;c<o;c++){u++;n[M*o+c]=a[u]}u++}}}function M(e,i){if(!r(e)){throw new n("type is required.")}var s=e;if(s===Number){s=c}var f=s.packedLength;var l=t(s.packedInterpolationLength,f);var d=0;var h;if(r(i)){var v=i.length;h=new Array(v);for(var M=0;M<v;M++){var p=i[M];if(p===Number){p=c}var g=p.packedLength;f+=g;l+=t(p.packedInterpolationLength,g);h[M]=p}d=v}this._type=e;this._innerType=s;this._interpolationDegree=1;this._interpolationAlgorithm=u;this._numberOfPoints=0;this._times=[];this._values=[];this._xTable=[];this._yTable=[];this._packedLength=f;this._packedInterpolationLength=l;this._updateTableLength=true;this._interpolationResult=new Array(l);this._definitionChanged=new a;this._derivativeTypes=i;this._innerDerivativeTypes=h;this._inputOrder=d;this._forwardExtrapolationType=o.NONE;this._forwardExtrapolationDuration=0;this._backwardExtrapolationType=o.NONE;this._backwardExtrapolationDuration=0}i(M.prototype,{isConstant:{get:function(){return this._values.length===0}},definitionChanged:{get:function(){return this._definitionChanged}},type:{get:function(){return this._type}},derivativeTypes:{get:function(){return this._derivativeTypes}},interpolationDegree:{get:function(){return this._interpolationDegree}},interpolationAlgorithm:{get:function(){return this._interpolationAlgorithm}},forwardExtrapolationType:{get:function(){return this._forwardExtrapolationType},set:function(e){if(this._forwardExtrapolationType!==e){this._forwardExtrapolationType=e;this._definitionChanged.raiseEvent(this)}}},forwardExtrapolationDuration:{get:function(){return this._forwardExtrapolationDuration},set:function(e){if(this._forwardExtrapolationDuration!==e){this._forwardExtrapolationDuration=e;this._definitionChanged.raiseEvent(this)}}},backwardExtrapolationType:{get:function(){return this._backwardExtrapolationType},set:function(e){if(this._backwardExtrapolationType!==e){this._backwardExtrapolationType=e;this._definitionChanged.raiseEvent(this)}}},backwardExtrapolationDuration:{get:function(){return this._backwardExtrapolationDuration},set:function(e){if(this._backwardExtrapolationDuration!==e){this._backwardExtrapolationDuration=e;this._definitionChanged.raiseEvent(this)}}}});M.prototype.getValue=function(t,i){if(!r(t)){throw new n("time is required.")}var a=this._times;var u=a.length;if(u===0){return undefined}var c;var f=this._innerType;var l=this._values;var d=e(a,t,s.compare);if(d<0){d=~d;if(d===0){var h=a[d];c=this._backwardExtrapolationDuration;if(this._backwardExtrapolationType===o.NONE||c!==0&&s.secondsDifference(h,t)>c){return undefined}if(this._backwardExtrapolationType===o.HOLD){return f.unpack(l,0,i)}}if(d>=u){d=u-1;var v=a[d];c=this._forwardExtrapolationDuration;if(this._forwardExtrapolationType===o.NONE||c!==0&&s.secondsDifference(t,v)>c){return undefined}if(this._forwardExtrapolationType===o.HOLD){d=u-1;return f.unpack(l,d*f.packedLength,i)}}var M=this._xTable;var p=this._yTable;var g=this._interpolationAlgorithm;var w=this._packedInterpolationLength;var y=this._inputOrder;if(this._updateTableLength){this._updateTableLength=false;var A=Math.min(g.getRequiredDataPoints(this._interpolationDegree,y),u);if(A!==this._numberOfPoints){this._numberOfPoints=A;M.length=A;p.length=A*w}}var m=this._numberOfPoints-1;if(m<1){return undefined}var D=0;var N=u-1;var E=N-D+1;if(E>=m+1){var I=d-(m/2|0)-1;if(I<D){I=D}var T=I+m;if(T>N){T=N;I=T-m;if(I<D){I=D}}D=I;N=T}var L=N-D+1;for(var j=0;j<L;++j){M[j]=s.secondsDifference(a[D+j],a[N])}if(!r(f.convertPackedArrayForInterpolation)){var x=0;var S=this._packedLength;var O=D*S;var C=(N+1)*S;while(O<C){p[x]=l[O];O++;x++}}else{f.convertPackedArrayForInterpolation(l,D,N,p)}var z=s.secondsDifference(t,a[N]);var _;if(y===0||!r(g.interpolate)){_=g.interpolateOrderZero(z,M,p,w,this._interpolationResult)}else{var b=Math.floor(w/(y+1));_=g.interpolate(z,M,p,b,y,y,this._interpolationResult)}if(!r(f.unpackInterpolationResult)){return f.unpack(_,0,i)}return f.unpackInterpolationResult(_,l,D,N,i)}return f.unpack(l,d*this._packedLength,i)};M.prototype.setInterpolationOptions=function(e){if(!r(e)){throw new n("options is required.")}var t=false;var i=e.interpolationAlgorithm;var a=e.interpolationDegree;if(this._interpolationAlgorithm!==i){this._interpolationAlgorithm=i;t=true}if(this._interpolationDegree!==a){this._interpolationDegree=a;t=true}if(t){this._updateTableLength=true;this._definitionChanged.raiseEvent(this)}};M.prototype.addSample=function(e,t,i){var a=this._innerDerivativeTypes;var o=r(a);if(!r(e)){throw new n("time is required.")}if(!r(t)){throw new n("value is required.")}if(o&&!r(i)){throw new n("derivatives is required.")}var s=this._innerType;var u=[];u.push(e);s.pack(t,u,u.length);if(o){var c=a.length;for(var f=0;f<c;f++){a[f].pack(i[f],u,u.length)}}v(undefined,this._times,this._values,u,this._packedLength);this._updateTableLength=true;this._definitionChanged.raiseEvent(this)};M.prototype.addSamples=function(e,t,i){var a=this._innerDerivativeTypes;var o=r(a);if(!r(e)){throw new n("times is required.")}if(!r(t)){throw new n("values is required.")}if(e.length!==t.length){throw new n("times and values must be the same length.")}if(o&&(!r(i)||i.length!==e.length)){throw new n("times and derivativeValues must be the same length.")}var s=this._innerType;var u=e.length;var c=[];for(var f=0;f<u;f++){c.push(e[f]);s.pack(t[f],c,c.length);if(o){var l=i[f];var d=a.length;for(var h=0;h<d;h++){a[h].pack(l[h],c,c.length)}}}v(undefined,this._times,this._values,c,this._packedLength);this._updateTableLength=true;this._definitionChanged.raiseEvent(this)};M.prototype.addSamplesPackedArray=function(e,t){if(!r(e)){throw new n("packedSamples is required.")}v(t,this._times,this._values,e,this._packedLength);this._updateTableLength=true;this._definitionChanged.raiseEvent(this)};M.prototype.equals=function(e){if(this===e){return true}if(!r(e)){return false}if(this._type!==e._type||this._interpolationDegree!==e._interpolationDegree||this._interpolationAlgorithm!==e._interpolationAlgorithm){return false}var t=this._derivativeTypes;var i=r(t);var n=e._derivativeTypes;var a=r(n);if(i!==a){return false}var o;var u;if(i){u=t.length;if(u!==n.length){return false}for(o=0;o<u;o++){if(t[o]!==n[o]){return false}}}var c=this._times;var f=e._times;u=c.length;if(u!==f.length){return false}for(o=0;o<u;o++){if(!s.equals(c[o],f[o])){return false}}var l=this._values;var d=e._values;for(o=0;o<u;o++){if(l[o]!==d[o]){return false}}return true};M._mergeNewSamples=v;return M})})();(function(){var t=e.amdDefine;t("3d",["1a","1b","1c"],function(e,t,r){"use strict";function i(){this._array=[];this._hash={}}t(i.prototype,{length:{get:function(){return this._array.length}},values:{get:function(){return this._array}}});i.prototype.contains=function(t){if(typeof t!=="string"&&typeof t!=="number"){throw new r("key is required to be a string or number.")}return e(this._hash[t])};i.prototype.set=function(e,t){if(typeof e!=="string"&&typeof e!=="number"){throw new r("key is required to be a string or number.")}var i=this._hash[e];if(t!==i){this.remove(e);this._hash[e]=t;this._array.push(t)}};i.prototype.get=function(e){if(typeof e!=="string"&&typeof e!=="number"){throw new r("key is required to be a string or number.")}return this._hash[e]};i.prototype.remove=function(t){if(e(t)&&typeof t!=="string"&&typeof t!=="number"){throw new r("key is required to be a string or number.")}var i=this._hash[t];var n=e(i);if(n){var a=this._array;a.splice(a.indexOf(i),1);delete this._hash[t]}return n};i.prototype.removeAll=function(){var e=this._array;if(e.length>0){this._hash={};e.length=0}};return i})})();(function(){var t=e.amdDefine;t("20",["2b","1c"],function(e,t){"use strict";function r(){return true}function i(i,n){n=e(n,"This object was destroyed, i.e., destroy() was called.");function a(){throw new t(n)}for(var o in i){if(typeof i[o]==="function"){i[o]=a}}i.isDestroyed=r;return undefined}return i})})();(function(){var t=e.amdDefine;t("21",["26"],function(e){"use strict";var t={SHIFT:0,CTRL:1,ALT:2};return e(t)})})();(function(){var t=e.amdDefine;t("23",["3d","1f","2b","1a","20","1c","53","21","24"],function(e,t,r,i,n,a,o,s,u){"use strict";function c(e,t,r){var i=e._element;if(i===document){r.x=t.clientX;r.y=t.clientY;return r}var n=i.getBoundingClientRect();r.x=t.clientX-n.left;r.y=t.clientY-n.top;return r}function f(e,t){var r=e;if(i(t)){r+="+"+t}return r}function l(e){if(e.shiftKey){return s.SHIFT}else if(e.ctrlKey){return s.CTRL}else if(e.altKey){return s.ALT}return undefined}var d={LEFT:0,MIDDLE:1,RIGHT:2};function h(e,t,r,i){function n(t){i(e,t)}r.addEventListener(t,n,false);e._removalFunctions.push(function(){r.removeEventListener(t,n,false)})}function v(e){var t=e._element;var r=!i(t.disableRootEvents)?document:t;if(o.supportsPointerEvents()){h(e,"pointerdown",t,R);h(e,"pointerup",t,P);h(e,"pointermove",t,U)}else{h(e,"mousedown",t,g);h(e,"mouseup",r,A);h(e,"mousemove",r,D);h(e,"touchstart",t,T);h(e,"touchend",r,L);h(e,"touchmove",r,z)}h(e,"dblclick",t,E);var n;if("onwheel"in t){n="wheel"}else if(document.onmousewheel!==undefined){n="mousewheel"}else{n="DOMMouseScroll"}h(e,n,t,I)}function M(e){var t=e._removalFunctions;for(var r=0;r<t.length;++r){t[r]()}}var p={position:new t};function g(e,r){if(e._seenAnyTouchEvents){return}var n=r.button;e._buttonDown=n;var a;if(n===d.LEFT){a=u.LEFT_DOWN}else if(n===d.MIDDLE){a=u.MIDDLE_DOWN}else if(n===d.RIGHT){a=u.RIGHT_DOWN}else{return}var o=c(e,r,e._primaryPosition);t.clone(o,e._primaryStartPosition);t.clone(o,e._primaryPreviousPosition);var s=l(r);var f=e.getInputAction(a,s);if(i(f)){t.clone(o,p.position);f(p);r.preventDefault()}}var w={position:new t};var y={position:new t};function A(e,r){if(e._seenAnyTouchEvents){return}var n=r.button;e._buttonDown=undefined;var a;var o;if(n===d.LEFT){a=u.LEFT_UP;o=u.LEFT_CLICK}else if(n===d.MIDDLE){a=u.MIDDLE_UP;o=u.MIDDLE_CLICK}else if(n===d.RIGHT){a=u.RIGHT_UP;o=u.RIGHT_CLICK}else{return}var s=l(r);var f=e.getInputAction(a,s);var h=e.getInputAction(o,s);if(i(f)||i(h)){var v=c(e,r,e._primaryPosition);if(i(f)){t.clone(v,w.position);f(w)}if(i(h)){var M=e._primaryStartPosition;var p=M.x-v.x;var g=M.y-v.y;var A=Math.sqrt(p*p+g*g);if(A<e._clickPixelTolerance){t.clone(v,y.position);h(y)}}}}var m={startPosition:new t,endPosition:new t};function D(e,r){if(e._seenAnyTouchEvents){return}var n=l(r);var a=c(e,r,e._primaryPosition);var o=e._primaryPreviousPosition;var s=e.getInputAction(u.MOUSE_MOVE,n);if(i(s)){t.clone(o,m.startPosition);t.clone(a,m.endPosition);s(m)}t.clone(a,o);if(i(e._buttonDown)){r.preventDefault()}}var N={position:new t};function E(e,t){var r=t.button;var n;if(r===d.LEFT){n=u.LEFT_DOUBLE_CLICK}else if(r===d.MIDDLE){n=u.MIDDLE_DOUBLE_CLICK}else if(r===d.RIGHT){n=u.RIGHT_DOUBLE_CLICK}else{return}var a=l(t);var o=e.getInputAction(n,a);if(i(o)){c(e,t,N.position);o(N)}}function I(e,t){var r;if(i(t.deltaY)){var n=t.deltaMode;if(n===t.DOM_DELTA_PIXEL){r=-t.deltaY}else if(n===t.DOM_DELTA_LINE){r=-t.deltaY*40}else{r=-t.deltaY*120}}else if(t.detail>0){r=t.detail*-120}else{r=t.wheelDelta}if(!i(r)){return}var a=l(t);var o=e.getInputAction(u.WHEEL,a);if(i(o)){o(r);t.preventDefault()}}function T(e,r){e._seenAnyTouchEvents=true;var i=r.changedTouches;var n;var a=i.length;var o;var s;var u=e._positions;for(n=0;n<a;++n){o=i[n];s=o.identifier;u.set(s,c(e,o,new t))}C(e,r);var f=e._previousPositions;for(n=0;n<a;++n){o=i[n];s=o.identifier;f.set(s,t.clone(u.get(s)))}}function L(e,t){e._seenAnyTouchEvents=true;var r=t.changedTouches;var i;var n=r.length;var a;var o;var s=e._positions;for(i=0;i<n;++i){a=r[i];o=a.identifier;s.remove(o)}C(e,t);var u=e._previousPositions;for(i=0;i<n;++i){a=r[i];o=a.identifier;u.remove(o)}}var j={position:new t};var x={position1:new t,position2:new t};var S={position:new t};var O={position:new t};function C(e,r){var n=l(r);var a=e._positions;var o=e._previousPositions;var s=a.length;var c;var f;if(s!==1&&e._buttonDown===d.LEFT){e._buttonDown=undefined;c=e.getInputAction(u.LEFT_UP,n);if(i(c)){t.clone(e._primaryPosition,S.position);c(S)}if(s===0){f=e.getInputAction(u.LEFT_CLICK,n);if(i(f)){var h=e._primaryStartPosition;var v=o.values[0];var M=h.x-v.x;var p=h.y-v.y;var g=Math.sqrt(M*M+p*p);if(g<e._clickPixelTolerance){t.clone(e._primaryPosition,O.position);f(O)}}}}if(s!==2&&e._isPinching){e._isPinching=false;c=e.getInputAction(u.PINCH_END,n);if(i(c)){c()}}if(s===1){var w=a.values[0];t.clone(w,e._primaryPosition);t.clone(w,e._primaryStartPosition);t.clone(w,e._primaryPreviousPosition);e._buttonDown=d.LEFT;c=e.getInputAction(u.LEFT_DOWN,n);if(i(c)){t.clone(w,j.position);c(j)}r.preventDefault()}if(s===2){e._isPinching=true;c=e.getInputAction(u.PINCH_START,n);if(i(c)){t.clone(a.values[0],x.position1);t.clone(a.values[1],x.position2);c(x)}}}function z(e,r){e._seenAnyTouchEvents=true;var n=r.changedTouches;var a;var o=n.length;var s;var u;var f=e._positions;for(a=0;a<o;++a){s=n[a];u=s.identifier;var l=f.get(u);if(i(l)){c(e,s,l)}}k(e,r);var d=e._previousPositions;for(a=0;a<o;++a){s=n[a];u=s.identifier;t.clone(f.get(u),d.get(u))}}var _={startPosition:new t,endPosition:new t};var b={distance:{startPosition:new t,endPosition:new t},angleAndHeight:{startPosition:new t,endPosition:new t}};function k(e,r){var n=l(r);var a=e._positions;var o=e._previousPositions;var s=a.length;var c;if(s===1&&e._buttonDown===d.LEFT){var f=a.values[0];t.clone(f,e._primaryPosition);var h=e._primaryPreviousPosition;c=e.getInputAction(u.MOUSE_MOVE,n);if(i(c)){t.clone(h,_.startPosition);t.clone(f,_.endPosition);c(_)}t.clone(f,h);r.preventDefault()}else if(s===2&&e._isPinching){c=e.getInputAction(u.PINCH_MOVE,n);if(i(c)){var v=a.values[0];var M=a.values[1];var p=o.values[0];var g=o.values[1];var w=M.x-v.x;var y=M.y-v.y;var A=Math.sqrt(w*w+y*y)*.25;var m=g.x-p.x;var D=g.y-p.y;var N=Math.sqrt(m*m+D*D)*.25;var E=(M.y+v.y)*.125;var I=(g.y+p.y)*.125;var T=Math.atan2(y,w);var L=Math.atan2(D,m);t.fromElements(0,N,b.distance.startPosition);t.fromElements(0,A,b.distance.endPosition);t.fromElements(L,I,b.angleAndHeight.startPosition);t.fromElements(T,E,b.angleAndHeight.endPosition);c(b)}}}function R(e,r){r.target.setPointerCapture(r.pointerId);if(r.pointerType==="touch"){var i=e._positions;var n=r.pointerId;i.set(n,c(e,r,new t));C(e,r);var a=e._previousPositions;a.set(n,t.clone(i.get(n)))}else{g(e,r)}}function P(e,t){if(t.pointerType==="touch"){var r=e._positions;var i=t.pointerId;r.remove(i);C(e,t);var n=e._previousPositions;n.remove(i)}else{A(e,t)}}function U(e,r){if(r.pointerType==="touch"){var i=e._positions;var n=r.pointerId;c(e,r,i.get(n));k(e,r);var a=e._previousPositions;t.clone(i.get(n),a.get(n))}else{D(e,r)}}function Q(i){this._inputEvents={};this._buttonDown=undefined;this._isPinching=false;this._seenAnyTouchEvents=false;this._primaryStartPosition=new t;this._primaryPosition=new t;this._primaryPreviousPosition=new t;this._positions=new e;this._previousPositions=new e;this._removalFunctions=[];this._clickPixelTolerance=5;this._element=r(i,document);v(this)}Q.prototype.setInputAction=function(e,t,r){if(!i(e)){throw new a("action is required.")}if(!i(t)){throw new a("type is required.")}var n=f(t,r);this._inputEvents[n]=e};Q.prototype.getInputAction=function(e,t){if(!i(e)){throw new a("type is required.")}var r=f(e,t);return this._inputEvents[r]};Q.prototype.removeInputAction=function(e,t){if(!i(e)){throw new a("type is required.")}var r=f(e,t);delete this._inputEvents[r]};Q.prototype.isDestroyed=function(){return false};Q.prototype.destroy=function(){M(this);return n(this)};return Q})})();(function(){var t=e.amdDefine;t("24",["26"],function(e){"use strict";var t={LEFT_DOWN:0,LEFT_UP:1,LEFT_CLICK:2,LEFT_DOUBLE_CLICK:3,RIGHT_DOWN:5,RIGHT_UP:6,RIGHT_CLICK:7,RIGHT_DOUBLE_CLICK:8,MIDDLE_DOWN:10,MIDDLE_UP:11,MIDDLE_CLICK:12,MIDDLE_DOUBLE_CLICK:13,MOUSE_MOVE:15,WHEEL:16,PINCH_START:17,PINCH_END:18,PINCH_MOVE:19};return e(t)})})();(function(){var t=e.amdDefine;t("1f",["2b","1a","1c","26","22"],function(e,t,r,i,n){"use strict";function a(t,r){this.x=e(t,0);this.y=e(r,0)}a.fromElements=function(e,r,i){if(!t(i)){return new a(e,r)}i.x=e;i.y=r;return i};a.clone=function(e,r){if(!t(e)){return undefined}if(!t(r)){return new a(e.x,e.y)}r.x=e.x;r.y=e.y;return r};a.fromCartesian3=a.clone;a.fromCartesian4=a.clone;a.packedLength=2;a.pack=function(i,n,a){if(!t(i)){throw new r("value is required")}if(!t(n)){throw new r("array is required")}a=e(a,0);n[a++]=i.x;n[a]=i.y};a.unpack=function(i,n,o){if(!t(i)){throw new r("array is required")}n=e(n,0);if(!t(o)){o=new a}o.x=i[n++];o.y=i[n];return o};a.packArray=function(e,i){if(!t(e)){throw new r("array is required")}var n=e.length;if(!t(i)){i=new Array(n*2)}else{i.length=n*2}for(var o=0;o<n;++o){a.pack(e[o],i,o*2)}return i};a.unpackArray=function(e,i){if(!t(e)){throw new r("array is required")}var n=e.length;if(!t(i)){i=new Array(n/2)}else{i.length=n/2}for(var o=0;o<n;o+=2){var s=o/2;i[s]=a.unpack(e,o,i[s])}return i};a.fromArray=a.unpack;a.maximumComponent=function(e){if(!t(e)){throw new r("cartesian is required")}return Math.max(e.x,e.y)};a.minimumComponent=function(e){if(!t(e)){throw new r("cartesian is required")}return Math.min(e.x,e.y)};a.minimumByComponent=function(e,i,n){if(!t(e)){throw new r("first is required.")}if(!t(i)){throw new r("second is required.")}if(!t(n)){throw new r("result is required.")}n.x=Math.min(e.x,i.x);n.y=Math.min(e.y,i.y);return n};a.maximumByComponent=function(e,i,n){if(!t(e)){throw new r("first is required.")}if(!t(i)){throw new r("second is required.")}if(!t(n)){throw new r("result is required.")}n.x=Math.max(e.x,i.x);n.y=Math.max(e.y,i.y);return n};a.magnitudeSquared=function(e){if(!t(e)){throw new r("cartesian is required")}return e.x*e.x+e.y*e.y};a.magnitude=function(e){return Math.sqrt(a.magnitudeSquared(e))};var o=new a;a.distance=function(e,i){if(!t(e)||!t(i)){throw new r("left and right are required.")}a.subtract(e,i,o);return a.magnitude(o)};a.distanceSquared=function(e,i){if(!t(e)||!t(i)){throw new r("left and right are required.")}a.subtract(e,i,o);return a.magnitudeSquared(o)};a.normalize=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}var n=a.magnitude(e);i.x=e.x/n;i.y=e.y/n;return i};a.dot=function(e,i){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}return e.x*i.x+e.y*i.y};a.multiplyComponents=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x*i.x;n.y=e.y*i.y;return n};a.add=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x+i.x;n.y=e.y+i.y;return n};a.subtract=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x-i.x;n.y=e.y-i.y;return n};a.multiplyByScalar=function(e,i,n){if(!t(e)){throw new r("cartesian is required")}if(typeof i!=="number"){throw new r("scalar is required and must be a number.")}if(!t(n)){throw new r("result is required")}n.x=e.x*i;n.y=e.y*i;return n};a.divideByScalar=function(e,i,n){if(!t(e)){throw new r("cartesian is required")}if(typeof i!=="number"){throw new r("scalar is required and must be a number.")}if(!t(n)){throw new r("result is required")}n.x=e.x/i;n.y=e.y/i;return n};a.negate=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}i.x=-e.x;i.y=-e.y;return i};a.abs=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}i.x=Math.abs(e.x);i.y=Math.abs(e.y);return i};var s=new a;a.lerp=function(e,i,n,o){if(!t(e)){throw new r("start is required.")}if(!t(i)){throw new r("end is required.");
}if(typeof n!=="number"){throw new r("t is required and must be a number.")}if(!t(o)){throw new r("result is required.")}a.multiplyByScalar(i,n,s);o=a.multiplyByScalar(e,1-n,o);return a.add(s,o,o)};var u=new a;var c=new a;a.angleBetween=function(e,i){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}a.normalize(e,u);a.normalize(i,c);return n.acosClamped(a.dot(u,c))};var f=new a;a.mostOrthogonalAxis=function(e,i){if(!t(e)){throw new r("cartesian is required.")}if(!t(i)){throw new r("result is required.")}var n=a.normalize(e,f);a.abs(n,n);if(n.x<=n.y){i=a.clone(a.UNIT_X,i)}else{i=a.clone(a.UNIT_Y,i)}return i};a.equals=function(e,r){return e===r||t(e)&&t(r)&&e.x===r.x&&e.y===r.y};a.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]};a.equalsEpsilon=function(e,r,i,a){return e===r||t(e)&&t(r)&&n.equalsEpsilon(e.x,r.x,i,a)&&n.equalsEpsilon(e.y,r.y,i,a)};a.ZERO=i(new a(0,0));a.UNIT_X=i(new a(1,0));a.UNIT_Y=i(new a(0,1));a.prototype.clone=function(e){return a.clone(this,e)};a.prototype.equals=function(e){return a.equals(this,e)};a.prototype.equalsEpsilon=function(e,t,r){return a.equalsEpsilon(this,e,t,r)};a.prototype.toString=function(){return"("+this.x+", "+this.y+")"};return a})})();(function(){var t=e.amdDefine;t("54",["55","52","2b","1a","56","26","2c","57","58","3f","59","5a"],function(e,t,r,i,n,a,o,s,u,c,f,l){"use strict";function d(t){t=r(t,r.EMPTY_OBJECT);this._dates=undefined;this._samples=undefined;this._dateColumn=-1;this._xPoleWanderRadiansColumn=-1;this._yPoleWanderRadiansColumn=-1;this._ut1MinusUtcSecondsColumn=-1;this._xCelestialPoleOffsetRadiansColumn=-1;this._yCelestialPoleOffsetRadiansColumn=-1;this._taiMinusUtcSecondsColumn=-1;this._columnCount=0;this._lastIndex=-1;this._downloadPromise=undefined;this._dataError=undefined;this._addNewLeapSeconds=r(t.addNewLeapSeconds,true);if(i(t.data)){v(this,t.data)}else if(i(t.url)){var n=this;this._downloadPromise=e(u(t.url),function(e){v(n,e)},function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})}else{v(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}}d.NONE=a({getPromiseToLoad:function(){return e()},compute:function(e,t){if(!i(t)){t=new n(0,0,0,0,0)}else{t.xPoleWander=0;t.yPoleWander=0;t.xPoleOffset=0;t.yPoleOffset=0;t.ut1MinusUtc=0}return t}});d.prototype.getPromiseToLoad=function(){return e(this._downloadPromise)};d.prototype.compute=function(e,r){if(!i(this._samples)){if(i(this._dataError)){throw new c(this._dataError)}return undefined}if(!i(r)){r=new n(0,0,0,0,0)}if(this._samples.length===0){r.xPoleWander=0;r.yPoleWander=0;r.xPoleOffset=0;r.yPoleOffset=0;r.ut1MinusUtc=0;return r}var a=this._dates;var s=this._lastIndex;var u=0;var f=0;if(i(s)){var l=a[s];var d=a[s+1];var h=o.lessThanOrEquals(l,e);var v=!i(d);var M=v||o.greaterThanOrEquals(d,e);if(h&&M){u=s;if(!v&&d.equals(e)){++u}f=u+1;g(this,a,this._samples,e,u,f,r);return r}}var p=t(a,e,o.compare,this._dateColumn);if(p>=0){if(p<a.length-1&&a[p+1].equals(e)){++p}u=p;f=p}else{f=~p;u=f-1;if(u<0){u=0}}this._lastIndex=u;g(this,a,this._samples,e,u,f,r);return r};function h(e,t){return o.compare(e.julianDate,t)}function v(e,r){if(!i(r.columnNames)){e._dataError="Error in loaded EOP data: The columnNames property is required.";return}if(!i(r.samples)){e._dataError="Error in loaded EOP data: The samples property is required.";return}var n=r.columnNames.indexOf("modifiedJulianDateUtc");var a=r.columnNames.indexOf("xPoleWanderRadians");var u=r.columnNames.indexOf("yPoleWanderRadians");var c=r.columnNames.indexOf("ut1MinusUtcSeconds");var d=r.columnNames.indexOf("xCelestialPoleOffsetRadians");var v=r.columnNames.indexOf("yCelestialPoleOffsetRadians");var M=r.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||a<0||u<0||c<0||d<0||v<0||M<0){e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";return}var p=e._samples=r.samples;var g=e._dates=[];e._dateColumn=n;e._xPoleWanderRadiansColumn=a;e._yPoleWanderRadiansColumn=u;e._ut1MinusUtcSecondsColumn=c;e._xCelestialPoleOffsetRadiansColumn=d;e._yCelestialPoleOffsetRadiansColumn=v;e._taiMinusUtcSecondsColumn=M;e._columnCount=r.columnNames.length;e._lastIndex=undefined;var w;var y=e._addNewLeapSeconds;for(var A=0,m=p.length;A<m;A+=e._columnCount){var D=p[A+n];var N=p[A+M];var E=D+f.MODIFIED_JULIAN_DATE_DIFFERENCE;var I=new o(E,N,l.TAI);g.push(I);if(y){if(N!==w&&i(w)){var T=o.leapSeconds;var L=t(T,I,h);if(L<0){var j=new s(I,N);T.splice(~L,0,j)}}w=N}}}function M(e,t,r,i,n){var a=r*i;n.xPoleWander=t[a+e._xPoleWanderRadiansColumn];n.yPoleWander=t[a+e._yPoleWanderRadiansColumn];n.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn];n.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn];n.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function p(e,t,r){return t+e*(r-t)}function g(e,t,r,i,n,a,s){var u=e._columnCount;if(a>t.length-1){s.xPoleWander=0;s.yPoleWander=0;s.xPoleOffset=0;s.yPoleOffset=0;s.ut1MinusUtc=0;return s}var c=t[n];var f=t[a];if(c.equals(f)||i.equals(c)){M(e,r,n,u,s);return s}else if(i.equals(f)){M(e,r,a,u,s);return s}var l=o.secondsDifference(i,c)/o.secondsDifference(f,c);var d=n*u;var h=a*u;var v=r[d+e._ut1MinusUtcSecondsColumn];var g=r[h+e._ut1MinusUtcSecondsColumn];var w=g-v;if(w>.5||w<-.5){var y=r[d+e._taiMinusUtcSecondsColumn];var A=r[h+e._taiMinusUtcSecondsColumn];if(y!==A){if(f.equals(i)){v=g}else{g-=A-y}}}s.xPoleWander=p(l,r[d+e._xPoleWanderRadiansColumn],r[h+e._xPoleWanderRadiansColumn]);s.yPoleWander=p(l,r[d+e._yPoleWanderRadiansColumn],r[h+e._yPoleWanderRadiansColumn]);s.xPoleOffset=p(l,r[d+e._xCelestialPoleOffsetRadiansColumn],r[h+e._xCelestialPoleOffsetRadiansColumn]);s.yPoleOffset=p(l,r[d+e._yCelestialPoleOffsetRadiansColumn],r[h+e._yCelestialPoleOffsetRadiansColumn]);s.ut1MinusUtc=p(l,v,g);return s}return d})})();(function(){var t=e.amdDefine;t("56",[],function(){"use strict";function e(e,t,r,i,n){this.xPoleWander=e;this.yPoleWander=t;this.xPoleOffset=r;this.yPoleOffset=i;this.ut1MinusUtc=n}return e})})();(function(){var t=e.amdDefine;t("5b",["5c","2b","1a","1c"],function(e,t,r,i){"use strict";function n(n,a){if(!r(n)){throw new i("relative uri is required.")}a=t(a,document.location.href);var o=new e(a);var s=new e(n);return s.resolve(o).toString()}return n})})();(function(){var t=e.amdDefine;t("5c",[],function(){function e(r){if(r instanceof e){this.scheme=r.scheme;this.authority=r.authority;this.path=r.path;this.query=r.query;this.fragment=r.fragment}else if(r){var i=t.exec(r);this.scheme=i[1];this.authority=i[2];this.path=i[3];this.query=i[4];this.fragment=i[5]}}e.prototype.scheme=null;e.prototype.authority=null;e.prototype.path="";e.prototype.query=null;e.prototype.fragment=null;var t=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");e.prototype.getScheme=function(){return this.scheme};e.prototype.getAuthority=function(){return this.authority};e.prototype.getPath=function(){return this.path};e.prototype.getQuery=function(){return this.query};e.prototype.getFragment=function(){return this.fragment};e.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment};e.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query};e.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment};e.prototype.normalize=function(){this.removeDotSegments();if(this.scheme)this.scheme=this.scheme.toLowerCase();if(this.authority)this.authority=this.authority.replace(n,o).replace(r,a);if(this.path)this.path=this.path.replace(r,a);if(this.query)this.query=this.query.replace(r,a);if(this.fragment)this.fragment=this.fragment.replace(r,a)};var r=/%[0-9a-z]{2}/gi;var i=/[a-zA-Z0-9\-\._~]/;var n=/(.*@)?([^@:]*)(:.*)?/;function a(e){var t=unescape(e);return i.test(t)?t:e.toUpperCase()}function o(e,t,r,i){return(t||"")+r.toLowerCase()+(i||"")}e.prototype.resolve=function(t){var r=new e;if(this.scheme){r.scheme=this.scheme;r.authority=this.authority;r.path=this.path;r.query=this.query}else{r.scheme=t.scheme;if(this.authority){r.authority=this.authority;r.path=this.path;r.query=this.query}else{r.authority=t.authority;if(this.path==""){r.path=t.path;r.query=this.query||t.query}else{if(this.path.charAt(0)=="/"){r.path=this.path;r.removeDotSegments()}else{if(t.authority&&t.path==""){r.path="/"+this.path}else{r.path=t.path.substring(0,t.path.lastIndexOf("/")+1)+this.path}r.removeDotSegments()}r.query=this.query}}}r.fragment=this.fragment;return r};e.prototype.removeDotSegments=function(){var e=this.path.split("/"),t=[],r,i=e[0]=="";if(i)e.shift();var n=e[0]==""?e.shift():null;while(e.length){r=e.shift();if(r==".."){t.pop()}else if(r!="."){t.push(r)}}if(r=="."||r=="..")t.push("");if(i)t.unshift("");this.path=t.join("/")};e.prototype.toString=function(){var e="";if(this.scheme)e+=this.scheme+":";if(this.authority)e+="//"+this.authority;e+=this.path;if(this.query)e+="?"+this.query;if(this.fragment)e+="#"+this.fragment;return e};return e})})();(function(){var t=e.amdDefine;t("5d",["5c","2b","1a","1c"],function(e,t,r,i){"use strict";function n(n,a,o){if(!r(n)){throw new i("first is required")}if(!r(a)){throw new i("second is required")}o=t(o,true);if(!(n instanceof e)){n=new e(n)}if(!(a instanceof e)){a=new e(a)}if(r(a.authority)&&!r(a.scheme)){if(typeof document!=="undefined"&&r(document.location)&&r(document.location.href)){a.scheme=new e(document.location.href).scheme}else{a.scheme=n.scheme}}var s=n;if(a.isAbsolute()){s=a}var u="";if(r(s.scheme)){u+=s.scheme+":"}if(r(s.authority)){u+="//"+s.authority;if(s.path!==""&&s.path!=="/"){u=u.replace(/\/?$/,"/");s.path=s.path.replace(/^\/?/g,"")}}if(s===n){if(o){u+=n.path.replace(/\/?$/,"/")+a.path.replace(/^\/?/g,"")}else{u+=n.path+a.path}}else{u+=a.path}var c=r(n.query);var f=r(a.query);if(c&&f){u+="?"+n.query+"&"+a.query}else if(c&&!f){u+="?"+n.query}else if(!c&&f){u+="?"+a.query}var l=r(a.fragment);if(r(n.fragment)&&!l){u+="#"+n.fragment}else if(l){u+="#"+a.fragment}return u}return n})})();(function(){var t=e.amdDefine;t("5e",["5c","1a","1c","5b","5d","require"],function(e,t,r,i,n,a){"use strict";var o=/((?:.*\/)|^)cesium[\w-]*\.js(?:\W|$)/i;function s(){var e=document.getElementsByTagName("script");for(var t=0,r=e.length;t<r;++t){var i=e[t].getAttribute("src");var n=o.exec(i);if(n!==null){return n[1]}}return undefined}var u;function c(){if(t(u)){return u}var n;if(typeof CESIUM_BASE_URL!=="undefined"){n=CESIUM_BASE_URL}else{n=s()}if(!t(n)){throw new r("Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.")}u=new e(i(n));return u}function f(e){return a.toUrl("../"+e)}function l(e){return n(c(),e)}var d;var h;function v(e){if(!t(d)){if(t(a.toUrl)){d=f}else{d=l}}if(!t(h)){h=document.createElement("a")}var r=d(e);h.href=r;h.href=h.href;return h.href}v._cesiumScriptRegex=o;v.setBaseUrl=function(t){u=new e(t).resolve(new e(document.location.href))};return v})})();(function(){var t=e.amdDefine;t("5f",["2b"],function(e){"use strict";function t(r,i){if(r===null||typeof r!=="object"){return r}i=e(i,false);var n=new r.constructor;for(var a in r){if(r.hasOwnProperty(a)){var o=r[a];if(i){o=t(o,i)}n[a]=o}}return n}return t})})();(function(){var t=e.amdDefine;(function(e){"use strict";e("55",[],function(){var e,t,r;i.defer=c;i.resolve=n;i.reject=a;i.join=v;i.all=h;i.map=M;i.reduce=p;i.any=d;i.some=l;i.chain=g;i.isPromise=f;function i(e,t,r,i){return n(e).then(t,r,i)}function n(e){var t,r;if(e instanceof o){t=e}else{if(f(e)){r=c();e.then(function(e){r.resolve(e)},function(e){r.reject(e)},function(e){r.progress(e)});t=r.promise}else{t=s(e)}}return t}function a(e){return i(e,u)}function o(e){this.then=e}o.prototype={always:function(e,t){return this.then(e,e,t)},otherwise:function(e){return this.then(r,e)},yield:function(e){return this.then(function(){return e})},spread:function(e){return this.then(function(t){return h(t,function(t){return e.apply(r,t)})})}};function s(e){var t=new o(function(t){try{return n(t?t(e):e)}catch(e){return u(e)}});return t}function u(e){var t=new o(function(t,r){try{return r?n(r(e)):u(e)}catch(e){return u(e)}});return t}function c(){var e,t,i,a,s,f,l;t=new o(d);e={then:d,resolve:h,reject:v,progress:M,promise:t,resolver:{resolve:h,reject:v,progress:M}};i=[];a=[];s=function(e,t,r){var n,o;n=c();o=typeof r==="function"?function(e){try{n.progress(r(e))}catch(e){n.progress(e)}}:function(e){n.progress(e)};i.push(function(r){r.then(e,t).then(n.resolve,n.reject,o)});a.push(o);return n.promise};f=function(e){w(a,e);return e};l=function(e){e=n(e);s=e.then;l=n;f=A;w(i,e);a=i=r;return e};return e;function d(e,t,r){return s(e,t,r)}function h(e){return l(e)}function v(e){return l(u(e))}function M(e){return f(e)}}function f(e){return e&&typeof e.then==="function"}function l(e,t,r,n,a){y(2,arguments);return i(e,function(e){var o,s,u,f,l,d,h,v,M,p;M=e.length>>>0;o=Math.max(0,Math.min(t,M));u=[];s=M-o+1;f=[];l=c();if(!o){l.resolve(u)}else{v=l.progress;h=function(e){f.push(e);if(!--s){d=h=A;l.reject(f)}};d=function(e){u.push(e);if(!--o){d=h=A;l.resolve(u)}};for(p=0;p<M;++p){if(p in e){i(e[p],w,g,v)}}}return l.then(r,n,a);function g(e){h(e)}function w(e){d(e)}})}function d(e,t,r,i){function n(e){return t?t(e[0]):e[0]}return l(e,1,n,r,i)}function h(e,t,r,i){y(1,arguments);return M(e,m).then(t,r,i)}function v(){return M(arguments,m)}function M(e,t){return i(e,function(e){var r,n,a,o,s,u;a=n=e.length>>>0;r=[];u=c();if(!a){u.resolve(r)}else{o=function e(n,o){i(n,t).then(function(e){r[o]=e;if(!--a){u.resolve(r)}},u.reject)};for(s=0;s<n;s++){if(s in e){o(e[s],s)}else{--a}}}return u.promise})}function p(r,n){var a=t.call(arguments,1);return i(r,function(t){var r;r=t.length;a[0]=function(e,t,a){return i(e,function(e){return i(t,function(t){return n(e,t,a,r)})})};return e.apply(t,a)})}function g(e,t,r){var n=arguments.length>2;return i(e,function(e){e=n?r:e;t.resolve(e);return e},function(e){t.reject(e);return u(e)},t.progress)}function w(e,t){var r,i=0;while(r=e[i++]){r(t)}}function y(e,t){var r,i=t.length;while(i>e){r=t[--i];if(r!=null&&typeof r!="function"){throw new Error("arg "+i+" must be a function")}}}function A(){}t=[].slice;e=[].reduce||function(e){var t,r,i,n,a;a=0;t=Object(this);n=t.length>>>0;r=arguments;if(r.length<=1){for(;;){if(a in t){i=t[a++];break}if(++a>=n){throw new TypeError}}}else{i=r[1]}for(;a<n;++a){if(a in t){i=e(i,t[a],a,t)}}return i};function m(e){return e}return i})})(typeof t=="function"&&t.amd?t:function(e){typeof r==="object"?i.exports=e():this.when=e()})})();(function(){var t=e.amdDefine;t("60",[],function(){"use strict";function e(e){var t={};if(!e){return t}var r=e.split("\r\n");for(var i=0;i<r.length;++i){var n=r[i];var a=n.indexOf(": ");if(a>0){var o=n.substring(0,a);var s=n.substring(a+2);t[o]=s}}return t}return e})})();(function(){var t=e.amdDefine;t("61",["1a","60"],function(e,t){"use strict";function r(e,r,i){this.statusCode=e;this.response=r;this.responseHeaders=i;if(typeof this.responseHeaders==="string"){this.responseHeaders=t(this.responseHeaders)}}r.prototype.toString=function(){var t="Request has failed.";if(e(this.statusCode)){t+=" Status Code: "+this.statusCode}return t};return r})})();(function(){var t=e.amdDefine;t("62",["55","2b","1a","1c","61","3f"],function(e,t,r,i,n,a){"use strict";function o(n){n=t(n,t.EMPTY_OBJECT);if(!r(n.url)){throw new i("options.url is required.")}var a=n.responseType;var s=t(n.method,"GET");var u=n.data;var c=n.headers;var f=n.overrideMimeType;return e(n.url,function(t){var r=e.defer();o.load(t,a,s,u,c,r,f);return r.promise})}var s=/^data:(.*?)(;base64)?,(.*)$/;function u(e,t){var r=decodeURIComponent(t);if(e){return atob(r)}return r}function c(e,t){var r=u(e,t);var i=new ArrayBuffer(r.length);var n=new Uint8Array(i);for(var a=0;a<r.length;a++){n[a]=r.charCodeAt(a)}return i}function f(e,r){r=t(r,"");var n=e[1];var a=!!e[2];var o=e[3];switch(r){case"":case"text":return u(a,o);case"arraybuffer":return c(a,o);case"blob":var s=c(a,o);return new Blob([s],{type:n});case"document":var f=new DOMParser;return f.parseFromString(u(a,o),n);case"json":return JSON.parse(u(a,o));default:throw new i("Unhandled responseType: "+r)}}o.load=function(e,t,i,o,u,c,l){var d=s.exec(e);if(d!==null){c.resolve(f(d,t));return}var h=new XMLHttpRequest;if(r(l)&&r(h.overrideMimeType)){h.overrideMimeType(l)}h.open(i,e,true);if(r(u)){for(var v in u){if(u.hasOwnProperty(v)){h.setRequestHeader(v,u[v])}}}if(r(t)){h.responseType=t}h.onload=function(){if(h.status>=200&&h.status<300){if(r(h.response)){c.resolve(h.response)}else{if(r(h.responseXML)&&h.responseXML.hasChildNodes()){c.resolve(h.responseXML)}else if(r(h.responseText)){c.resolve(h.responseText)}else{c.reject(new a("unknown XMLHttpRequest response type."))}}}else{c.reject(new n(h.status,h.response,h.getAllResponseHeaders()))}};h.onerror=function(e){c.reject(new n)};h.send(o)};o.defaultLoad=o.load;return o})})();(function(){var t=e.amdDefine;t("63",["62"],function(e){"use strict";function t(t,r){return e({url:t,headers:r})}return t})})();(function(){var t=e.amdDefine;t("58",["5f","1a","1c","63"],function(e,t,r,i){"use strict";var n={Accept:"application/json,*/*;q=0.01"};function a(a,o){if(!t(a)){throw new r("url is required.")}if(!t(o)){o=n}else if(!t(o.Accept)){o=e(o);o.Accept=n.Accept}return i(a,o).then(function(e){return JSON.parse(e)})}return a})})();(function(){var t=e.amdDefine;t("64",["55","5e","2b","1a","65","2c","58","5a"],function(e,t,r,i,n,a,o,s){"use strict";function u(e){e=r(e,r.EMPTY_OBJECT);this._xysFileUrlTemplate=e.xysFileUrlTemplate;this._interpolationOrder=r(e.interpolationOrder,9);this._sampleZeroJulianEphemerisDate=r(e.sampleZeroJulianEphemerisDate,2442396.5);this._sampleZeroDateTT=new a(this._sampleZeroJulianEphemerisDate,0,s.TAI);this._stepSizeDays=r(e.stepSizeDays,1);this._samplesPerXysFile=r(e.samplesPerXysFile,1e3);this._totalSamples=r(e.totalSamples,27426);this._samples=new Array(this._totalSamples*3);this._chunkDownloadsInProgress=[];var t=this._interpolationOrder;var i=this._denominators=new Array(t+1);var n=this._xTable=new Array(t+1);var o=Math.pow(this._stepSizeDays,t);for(var u=0;u<=t;++u){i[u]=o;n[u]=u*this._stepSizeDays;for(var c=0;c<=t;++c){if(c!==u){i[u]*=u-c}}i[u]=1/i[u]}this._work=new Array(t+1);this._coef=new Array(t+1)}var c=new a(0,0,s.TAI);function f(e,t,r){var i=c;i.dayNumber=t;i.secondsOfDay=r;return a.daysDifference(i,e._sampleZeroDateTT)}u.prototype.preload=function(t,r,i,n){var a=f(this,t,r);var o=f(this,i,n);var s=a/this._stepSizeDays-this._interpolationOrder/2|0;if(s<0){s=0}var u=o/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;if(u>=this._totalSamples){u=this._totalSamples-1}var c=s/this._samplesPerXysFile|0;var d=u/this._samplesPerXysFile|0;var h=[];for(var v=c;v<=d;++v){h.push(l(this,v))}return e.all(h)};u.prototype.computeXysRadians=function(e,t,r){var a=f(this,e,t);if(a<0){return undefined}var o=a/this._stepSizeDays|0;if(o>=this._totalSamples){return undefined}var s=this._interpolationOrder;var u=o-(s/2|0);if(u<0){u=0}var c=u+s;if(c>=this._totalSamples){c=this._totalSamples-1;u=c-s;if(u<0){u=0}}var d=false;var h=this._samples;if(!i(h[u*3])){l(this,u/this._samplesPerXysFile|0);d=true}if(!i(h[c*3])){l(this,c/this._samplesPerXysFile|0);d=true}if(d){return undefined}if(!i(r)){r=new n(0,0,0)}else{r.x=0;r.y=0;r.s=0}var v=a-u*this._stepSizeDays;var M=this._work;var p=this._denominators;var g=this._coef;var w=this._xTable;var y,A;for(y=0;y<=s;++y){M[y]=v-w[y]}for(y=0;y<=s;++y){g[y]=1;for(A=0;A<=s;++A){if(A!==y){g[y]*=M[A]}}g[y]*=p[y];var m=(u+y)*3;r.x+=g[y]*h[m++];r.y+=g[y]*h[m++];r.s+=g[y]*h[m]}return r};function l(r,n){if(r._chunkDownloadsInProgress[n]){return r._chunkDownloadsInProgress[n]}var a=e.defer();r._chunkDownloadsInProgress[n]=a;var s;var u=r._xysFileUrlTemplate;if(i(u)){s=u.replace("{0}",n)}else{s=t("Assets/IAU2006_XYS/IAU2006_XYS_"+n+".json")}e(o(s),function(e){r._chunkDownloadsInProgress[n]=false;var t=r._samples;var i=e.samples;var o=n*r._samplesPerXysFile*3;for(var s=0,u=i.length;s<u;++s){t[o+s]=i[s]}a.resolve()});return a.promise}return u})})();(function(){var t=e.amdDefine;t("65",[],function(){"use strict";function e(e,t,r){this.x=e;this.y=t;this.s=r}return e})})();(function(){var t=e.amdDefine;t("66",["1a","1b"],function(e,t){"use strict";var r;var i={requestFullscreen:undefined,exitFullscreen:undefined,fullscreenEnabled:undefined,fullscreenElement:undefined,fullscreenchange:undefined,fullscreenerror:undefined};var n={};t(n,{element:{get:function(){if(!n.supportsFullscreen()){return undefined}return document[i.fullscreenElement]}},changeEventName:{get:function(){if(!n.supportsFullscreen()){return undefined}return i.fullscreenchange}},errorEventName:{get:function(){if(!n.supportsFullscreen()){return undefined}return i.fullscreenerror}},enabled:{get:function(){if(!n.supportsFullscreen()){return undefined}return document[i.fullscreenEnabled]}},fullscreen:{get:function(){if(!n.supportsFullscreen()){return undefined}return n.element!==null}}});n.supportsFullscreen=function(){if(e(r)){return r}r=false;var t=document.body;if(typeof t.requestFullscreen==="function"){i.requestFullscreen="requestFullscreen";i.exitFullscreen="exitFullscreen";i.fullscreenEnabled="fullscreenEnabled";i.fullscreenElement="fullscreenElement";i.fullscreenchange="fullscreenchange";i.fullscreenerror="fullscreenerror";r=true;return r}var n=["webkit","moz","o","ms","khtml"];var a;for(var o=0,s=n.length;o<s;++o){var u=n[o];a=u+"RequestFullscreen";if(typeof t[a]==="function"){i.requestFullscreen=a;r=true}else{a=u+"RequestFullScreen";if(typeof t[a]==="function"){i.requestFullscreen=a;r=true}}a=u+"ExitFullscreen";if(typeof document[a]==="function"){i.exitFullscreen=a}else{a=u+"CancelFullScreen";if(typeof document[a]==="function"){i.exitFullscreen=a}}a=u+"FullscreenEnabled";if(document[a]!==undefined){i.fullscreenEnabled=a}else{a=u+"FullScreenEnabled";if(document[a]!==undefined){i.fullscreenEnabled=a}}a=u+"FullscreenElement";if(document[a]!==undefined){i.fullscreenElement=a}else{a=u+"FullScreenElement";if(document[a]!==undefined){i.fullscreenElement=a}}a=u+"fullscreenchange";if(document["on"+a]!==undefined){if(u==="ms"){a="MSFullscreenChange"}i.fullscreenchange=a}a=u+"fullscreenerror";if(document["on"+a]!==undefined){if(u==="ms"){a="MSFullscreenError"}i.fullscreenerror=a}}return r};n.requestFullscreen=function(e,t){if(!n.supportsFullscreen()){return}e[i.requestFullscreen]({vrDisplay:t})};n.exitFullscreen=function(){if(!n.supportsFullscreen()){return}document[i.exitFullscreen]()};return n})})();(function(){var t=e.amdDefine;t("53",["2b","1a","66"],function(e,t,r){"use strict";var i;if(typeof navigator!=="undefined"){i=navigator}else{i={}}function n(e){var t=e.split(".");for(var r=0,i=t.length;r<i;++r){t[r]=parseInt(t[r],10)}return t}var a;var o;function s(){if(!t(a)){a=false;var e=/ Chrome\/([\.0-9]+)/.exec(i.userAgent);if(e!==null){a=true;o=n(e[1])}}return a}function u(){return s()&&o}var c;var f;function l(){if(!t(c)){c=false;if(!s()&&/ Safari\/[\.0-9]+/.test(i.userAgent)){var e=/ Version\/([\.0-9]+)/.exec(i.userAgent);if(e!==null){c=true;f=n(e[1])}}}return c}function d(){return l()&&f}var h;var v;function M(){if(!t(h)){h=false;var e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(i.userAgent);if(e!==null){h=true;v=n(e[1]);v.isNightly=!!e[2]}}return h}function p(){return M()&&v}var g;var w;function y(){if(!t(g)){g=false;var e;if(i.appName==="Microsoft Internet Explorer"){e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent);if(e!==null){g=true;w=n(e[1])}}else if(i.appName==="Netscape"){e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(i.userAgent);if(e!==null){g=true;w=n(e[1])}}}return g}function A(){return y()&&w}var m;var D;function N(){if(!t(m)){m=false;var e=/Firefox\/([\.0-9]+)/.exec(i.userAgent);if(e!==null){m=true;D=n(e[1])}}return m}var E;function I(){if(!t(E)){E=/Windows/i.test(i.appVersion)}return E}function T(){return N()&&D}var L;function j(){if(!t(L)){L=typeof PointerEvent!=="undefined"&&(!t(i.pointerEnabled)||i.pointerEnabled)}return L}var x;var S;function O(){if(!t(S)){var e=document.createElement("canvas");e.setAttribute("style","image-rendering: -moz-crisp-edges;"+"image-rendering: pixelated;");var r=e.style.imageRendering;S=t(r)&&r!=="";if(S){x=r}}return S}function C(){return O()?x:undefined}var z={isChrome:s,chromeVersion:u,isSafari:l,safariVersion:d,isWebkit:M,webkitVersion:p,isInternetExplorer:y,internetExplorerVersion:A,isFirefox:N,firefoxVersion:T,isWindows:I,hardwareConcurrency:e(i.hardwareConcurrency,3),supportsPointerEvents:j,supportsImageRenderingPixelated:O,imageRenderingValue:C};z.supportsFullscreen=function(){return r.supportsFullscreen()};z.supportsTypedArrays=function(){return typeof ArrayBuffer!=="undefined"};z.supportsWebWorkers=function(){return typeof Worker!=="undefined"};return z})})();(function(){var t=e.amdDefine;t("3a",["32","2b","1a","1c","53","26","22","38"],function(e,t,r,i,n,a,o,s){"use strict";function u(e,r,i,n){this.x=t(e,0);this.y=t(r,0);this.z=t(i,0);this.w=t(n,0)}var c=new e;u.fromAxisAngle=function(t,n,a){if(!r(t)){throw new i("axis is required.")}if(typeof n!=="number"){throw new i("angle is required and must be a number.")}var o=n/2;var s=Math.sin(o);c=e.normalize(t,c);var f=c.x*s;var l=c.y*s;var d=c.z*s;var h=Math.cos(o);if(!r(a)){return new u(f,l,d,h)}a.x=f;a.y=l;a.z=d;a.w=h;return a};var f=[1,2,0];var l=new Array(3);u.fromRotationMatrix=function(e,t){if(!r(e)){throw new i("matrix is required.")}var n;var a;var o;var c;var d;var h=e[s.COLUMN0ROW0];var v=e[s.COLUMN1ROW1];var M=e[s.COLUMN2ROW2];var p=h+v+M;if(p>0){n=Math.sqrt(p+1);d=.5*n;n=.5/n;a=(e[s.COLUMN1ROW2]-e[s.COLUMN2ROW1])*n;o=(e[s.COLUMN2ROW0]-e[s.COLUMN0ROW2])*n;c=(e[s.COLUMN0ROW1]-e[s.COLUMN1ROW0])*n}else{var g=f;var w=0;if(v>h){w=1}if(M>h&&M>v){w=2}var y=g[w];var A=g[y];n=Math.sqrt(e[s.getElementIndex(w,w)]-e[s.getElementIndex(y,y)]-e[s.getElementIndex(A,A)]+1);var m=l;m[w]=.5*n;n=.5/n;d=(e[s.getElementIndex(A,y)]-e[s.getElementIndex(y,A)])*n;m[y]=(e[s.getElementIndex(y,w)]+e[s.getElementIndex(w,y)])*n;m[A]=(e[s.getElementIndex(A,w)]+e[s.getElementIndex(w,A)])*n;a=-m[0];o=-m[1];c=-m[2]}if(!r(t)){return new u(a,o,c,d)}t.x=a;t.y=o;t.z=c;t.w=d;return t};var d=new u;u.fromHeadingPitchRoll=function(t,n,a,o){if(!r(t)){throw new i("heading is required.")}if(!r(n)){throw new i("pitch is required.")}if(!r(a)){throw new i("roll is required.")}var s=u.fromAxisAngle(e.UNIT_X,a,d);var c=u.fromAxisAngle(e.UNIT_Y,-n,o);o=u.multiply(c,s,c);var f=u.fromAxisAngle(e.UNIT_Z,-t,d);return u.multiply(f,o,o)};var h=new e;var v=new e;var M=new u;var p=new u;var g=new u;u.packedLength=4;u.pack=function(e,n,a){if(!r(e)){throw new i("value is required")}if(!r(n)){throw new i("array is required")}a=t(a,0);n[a++]=e.x;n[a++]=e.y;n[a++]=e.z;n[a]=e.w};u.unpack=function(e,n,a){if(!r(e)){throw new i("array is required")}n=t(n,0);if(!r(a)){a=new u}a.x=e[n];a.y=e[n+1];a.z=e[n+2];a.w=e[n+3];return a};u.packedInterpolationLength=3;u.convertPackedArrayForInterpolation=function(e,t,r,i){u.unpack(e,r*4,g);u.conjugate(g,g);for(var n=0,a=r-t+1;n<a;n++){var o=n*3;u.unpack(e,(t+n)*4,M);u.multiply(M,g,M);if(M.w<0){u.negate(M,M)}u.computeAxis(M,h);var s=u.computeAngle(M);i[o]=h.x*s;i[o+1]=h.y*s;i[o+2]=h.z*s}};u.unpackInterpolationResult=function(t,i,n,a,o){if(!r(o)){o=new u}e.fromArray(t,0,v);var s=e.magnitude(v);u.unpack(i,a*4,p);if(s===0){u.clone(u.IDENTITY,M)}else{u.fromAxisAngle(v,s,M)}return u.multiply(M,p,o)};u.clone=function(e,t){if(!r(e)){return undefined}if(!r(t)){return new u(e.x,e.y,e.z,e.w)}t.x=e.x;t.y=e.y;t.z=e.z;t.w=e.w;return t};u.conjugate=function(e,t){if(!r(e)){throw new i("quaternion is required")}if(!r(t)){throw new i("result is required")}t.x=-e.x;t.y=-e.y;t.z=-e.z;t.w=e.w;return t};u.magnitudeSquared=function(e){if(!r(e)){throw new i("quaternion is required")}return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};u.magnitude=function(e){return Math.sqrt(u.magnitudeSquared(e))};u.normalize=function(e,t){if(!r(t)){throw new i("result is required")}var n=1/u.magnitude(e);var a=e.x*n;var o=e.y*n;var s=e.z*n;var c=e.w*n;t.x=a;t.y=o;t.z=s;t.w=c;return t};u.inverse=function(e,t){if(!r(t)){throw new i("result is required")}var n=u.magnitudeSquared(e);t=u.conjugate(e,t);return u.multiplyByScalar(t,1/n,t)};u.add=function(e,t,n){if(!r(e)){throw new i("left is required")}if(!r(t)){throw new i("right is required")}if(!r(n)){throw new i("result is required")}n.x=e.x+t.x;n.y=e.y+t.y;n.z=e.z+t.z;n.w=e.w+t.w;return n};u.subtract=function(e,t,n){if(!r(e)){throw new i("left is required")}if(!r(t)){throw new i("right is required")}if(!r(n)){throw new i("result is required")}n.x=e.x-t.x;n.y=e.y-t.y;n.z=e.z-t.z;n.w=e.w-t.w;return n};u.negate=function(e,t){if(!r(e)){throw new i("quaternion is required")}if(!r(t)){throw new i("result is required")}t.x=-e.x;t.y=-e.y;t.z=-e.z;t.w=-e.w;return t};u.dot=function(e,t){if(!r(e)){throw new i("left is required")}if(!r(t)){throw new i("right is required")}return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w};u.multiply=function(e,t,n){if(!r(e)){throw new i("left is required")}if(!r(t)){throw new i("right is required")}if(!r(n)){throw new i("result is required")}var a=e.x;var o=e.y;var s=e.z;var u=e.w;var c=t.x;var f=t.y;var l=t.z;var d=t.w;var h=u*c+a*d+o*l-s*f;var v=u*f-a*l+o*d+s*c;var M=u*l+a*f-o*c+s*d;var p=u*d-a*c-o*f-s*l;n.x=h;n.y=v;n.z=M;n.w=p;return n};u.multiplyByScalar=function(e,t,n){if(!r(e)){throw new i("quaternion is required")}if(typeof t!=="number"){throw new i("scalar is required and must be a number.")}if(!r(n)){throw new i("result is required")}n.x=e.x*t;n.y=e.y*t;n.z=e.z*t;n.w=e.w*t;return n};u.divideByScalar=function(e,t,n){if(!r(e)){throw new i("quaternion is required")}if(typeof t!=="number"){throw new i("scalar is required and must be a number.")}if(!r(n)){throw new i("result is required")}n.x=e.x/t;n.y=e.y/t;n.z=e.z/t;n.w=e.w/t;return n};u.computeAxis=function(e,t){if(!r(e)){throw new i("quaternion is required")}if(!r(t)){throw new i("result is required")}var n=e.w;if(Math.abs(n-1)<o.EPSILON6){t.x=t.y=t.z=0;return t}var a=1/Math.sqrt(1-n*n);t.x=e.x*a;t.y=e.y*a;t.z=e.z*a;return t};u.computeAngle=function(e){if(!r(e)){throw new i("quaternion is required")}if(Math.abs(e.w-1)<o.EPSILON6){return 0}return 2*Math.acos(e.w)};var w=new u;u.lerp=function(e,t,n,a){if(!r(e)){throw new i("start is required.")}if(!r(t)){throw new i("end is required.")}if(typeof n!=="number"){throw new i("t is required and must be a number.")}if(!r(a)){throw new i("result is required")}w=u.multiplyByScalar(t,n,w);a=u.multiplyByScalar(e,1-n,a);return u.add(w,a,a)};var y=new u;var A=new u;var m=new u;u.slerp=function(e,t,n,a){if(!r(e)){throw new i("start is required.")}if(!r(t)){throw new i("end is required.")}if(typeof n!=="number"){throw new i("t is required and must be a number.")}if(!r(a)){throw new i("result is required")}var s=u.dot(e,t);var c=t;if(s<0){s=-s;c=y=u.negate(t,y)}if(1-s<o.EPSILON6){return u.lerp(e,c,n,a)}var f=Math.acos(s);A=u.multiplyByScalar(e,Math.sin((1-n)*f),A);m=u.multiplyByScalar(c,Math.sin(n*f),m);a=u.add(A,m,a);return u.multiplyByScalar(a,1/Math.sin(f),a)};u.log=function(t,n){if(!r(t)){throw new i("quaternion is required.")}if(!r(n)){throw new i("result is required")}var a=o.acosClamped(t.w);var s=0;if(a!==0){s=a/Math.sin(a)}return e.multiplyByScalar(t,s,n)};u.exp=function(t,n){if(!r(t)){throw new i("cartesian is required.")}if(!r(n)){throw new i("result is required")}var a=e.magnitude(t);var o=0;if(a!==0){o=Math.sin(a)/a}n.x=t.x*o;n.y=t.y*o;n.z=t.z*o;n.w=Math.cos(a);return n};var D=new e;var N=new e;var E=new u;var I=new u;u.computeInnerQuadrangle=function(t,n,a,o){if(!r(t)||!r(n)||!r(a)){throw new i("q0, q1, and q2 are required.")}if(!r(o)){
throw new i("result is required")}var s=u.conjugate(n,E);u.multiply(s,a,I);var c=u.log(I,D);u.multiply(s,t,I);var f=u.log(I,N);e.add(c,f,c);e.multiplyByScalar(c,.25,c);e.negate(c,c);u.exp(c,E);return u.multiply(n,E,o)};u.squad=function(e,t,n,a,o,s){if(!r(e)||!r(t)||!r(n)||!r(a)){throw new i("q0, q1, s0, and s1 are required.")}if(typeof o!=="number"){throw new i("t is required and must be a number.")}if(!r(s)){throw new i("result is required")}var c=u.slerp(e,t,o,E);var f=u.slerp(n,a,o,I);return u.slerp(c,f,2*o*(1-o),s)};var T=new u;var L=1.9011074535173003;var j=n.supportsTypedArrays()?new Float32Array(8):[];var x=n.supportsTypedArrays()?new Float32Array(8):[];var S=n.supportsTypedArrays()?new Float32Array(8):[];var O=n.supportsTypedArrays()?new Float32Array(8):[];for(var C=0;C<7;++C){var z=C+1;var _=2*z+1;j[C]=1/(z*_);x[C]=z/_}j[7]=L/(8*17);x[7]=L*8/17;u.fastSlerp=function(e,t,n,a){if(!r(e)){throw new i("start is required.")}if(!r(t)){throw new i("end is required.")}if(typeof n!=="number"){throw new i("t is required and must be a number.")}if(!r(a)){throw new i("result is required")}var o=u.dot(e,t);var s;if(o>=0){s=1}else{s=-1;o=-o}var c=o-1;var f=1-n;var l=n*n;var d=f*f;for(var h=7;h>=0;--h){S[h]=(j[h]*l-x[h])*c;O[h]=(j[h]*d-x[h])*c}var v=s*n*(1+S[0]*(1+S[1]*(1+S[2]*(1+S[3]*(1+S[4]*(1+S[5]*(1+S[6]*(1+S[7]))))))));var M=f*(1+O[0]*(1+O[1]*(1+O[2]*(1+O[3]*(1+O[4]*(1+O[5]*(1+O[6]*(1+O[7]))))))));var p=u.multiplyByScalar(e,M,T);u.multiplyByScalar(t,v,a);return u.add(p,a,a)};u.fastSquad=function(e,t,n,a,o,s){if(!r(e)||!r(t)||!r(n)||!r(a)){throw new i("q0, q1, s0, and s1 are required.")}if(typeof o!=="number"){throw new i("t is required and must be a number.")}if(!r(s)){throw new i("result is required")}var c=u.fastSlerp(e,t,o,E);var f=u.fastSlerp(n,a,o,I);return u.fastSlerp(c,f,2*o*(1-o),s)};u.equals=function(e,t){return e===t||r(e)&&r(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w};u.equalsEpsilon=function(e,t,n){if(typeof n!=="number"){throw new i("epsilon is required and must be a number.")}return e===t||r(e)&&r(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n};u.ZERO=a(new u(0,0,0,0));u.IDENTITY=a(new u(0,0,0,1));u.prototype.clone=function(e){return u.clone(this,e)};u.prototype.equals=function(e){return u.equals(this,e)};u.prototype.equalsEpsilon=function(e,t){return u.equalsEpsilon(this,e,t)};u.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};return u})})();(function(){var t=e.amdDefine;t("3b",["55","1f","32","4a","42","2b","1a","1c","54","56","43","64","65","2c","22","38","39","3a","59"],function(e,t,r,i,n,a,o,s,u,c,f,l,d,h,v,M,p,g,w){"use strict";var y={};var A=new r;var m=new r;var D=new r;y.eastNorthUpToFixedFrame=function(e,t,i){if(!o(e)){throw new s("origin is required.")}if(v.equalsEpsilon(e.x,0,v.EPSILON14)&&v.equalsEpsilon(e.y,0,v.EPSILON14)){var n=v.sign(e.z);if(!o(i)){return new p(0,-n,0,e.x,1,0,0,e.y,0,0,n,e.z,0,0,0,1)}i[0]=0;i[1]=1;i[2]=0;i[3]=0;i[4]=-n;i[5]=0;i[6]=0;i[7]=0;i[8]=0;i[9]=0;i[10]=n;i[11]=0;i[12]=e.x;i[13]=e.y;i[14]=e.z;i[15]=1;return i}var u=A;var c=m;var l=D;t=a(t,f.WGS84);t.geodeticSurfaceNormal(e,u);c.x=-e.y;c.y=e.x;c.z=0;r.normalize(c,c);r.cross(u,c,l);if(!o(i)){return new p(c.x,l.x,u.x,e.x,c.y,l.y,u.y,e.y,c.z,l.z,u.z,e.z,0,0,0,1)}i[0]=c.x;i[1]=c.y;i[2]=c.z;i[3]=0;i[4]=l.x;i[5]=l.y;i[6]=l.z;i[7]=0;i[8]=u.x;i[9]=u.y;i[10]=u.z;i[11]=0;i[12]=e.x;i[13]=e.y;i[14]=e.z;i[15]=1;return i};var N=new r;var E=new r;var I=new r;y.northEastDownToFixedFrame=function(e,t,i){if(!o(e)){throw new s("origin is required.")}if(v.equalsEpsilon(e.x,0,v.EPSILON14)&&v.equalsEpsilon(e.y,0,v.EPSILON14)){var n=v.sign(e.z);if(!o(i)){return new p(-n,0,0,e.x,0,1,0,e.y,0,0,-n,e.z,0,0,0,1)}i[0]=-n;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=1;i[6]=0;i[7]=0;i[8]=0;i[9]=0;i[10]=-n;i[11]=0;i[12]=e.x;i[13]=e.y;i[14]=e.z;i[15]=1;return i}var u=N;var c=E;var l=I;t=a(t,f.WGS84);t.geodeticSurfaceNormal(e,u);c.x=-e.y;c.y=e.x;c.z=0;r.normalize(c,c);r.cross(u,c,l);if(!o(i)){return new p(l.x,c.x,-u.x,e.x,l.y,c.y,-u.y,e.y,l.z,c.z,-u.z,e.z,0,0,0,1)}i[0]=l.x;i[1]=l.y;i[2]=l.z;i[3]=0;i[4]=c.x;i[5]=c.y;i[6]=c.z;i[7]=0;i[8]=-u.x;i[9]=-u.y;i[10]=-u.z;i[11]=0;i[12]=e.x;i[13]=e.y;i[14]=e.z;i[15]=1;return i};y.northUpEastToFixedFrame=function(e,t,i){if(!o(e)){throw new s("origin is required.")}if(v.equalsEpsilon(e.x,0,v.EPSILON14)&&v.equalsEpsilon(e.y,0,v.EPSILON14)){var n=v.sign(e.z);if(!o(i)){return new p(-n,0,0,e.x,0,0,1,e.y,0,n,0,e.z,0,0,0,1)}i[0]=-n;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=0;i[6]=n;i[7]=0;i[8]=0;i[9]=1;i[10]=0;i[11]=0;i[12]=e.x;i[13]=e.y;i[14]=e.z;i[15]=1;return i}var u=A;var c=m;var l=D;t=a(t,f.WGS84);t.geodeticSurfaceNormal(e,u);c.x=-e.y;c.y=e.x;c.z=0;r.normalize(c,c);r.cross(u,c,l);if(!o(i)){return new p(l.x,u.x,c.x,e.x,l.y,u.y,c.y,e.y,l.z,u.z,c.z,e.z,0,0,0,1)}i[0]=l.x;i[1]=l.y;i[2]=l.z;i[3]=0;i[4]=u.x;i[5]=u.y;i[6]=u.z;i[7]=0;i[8]=c.x;i[9]=c.y;i[10]=c.z;i[11]=0;i[12]=e.x;i[13]=e.y;i[14]=e.z;i[15]=1;return i};var T=new g;var L=new r(1,1,1);var j=new p;y.headingPitchRollToFixedFrame=function(e,t,i,n,a,o){var s=g.fromHeadingPitchRoll(t,i,n,T);var u=p.fromTranslationQuaternionRotationScale(r.ZERO,s,L,j);o=y.eastNorthUpToFixedFrame(e,a,o);return p.multiply(o,u,o)};var x=new p;var S=new M;y.headingPitchRollQuaternion=function(e,t,r,i,n,a){var o=y.headingPitchRollToFixedFrame(e,t,r,i,n,x);var s=p.getRotation(o,S);return g.fromRotationMatrix(s,a)};var O=6*3600+41*60+50.54841;var C=8640184.812866;var z=.093104;var _=-62e-7;var b=1.1772758384668e-19;var k=72921158553e-15;var R=v.TWO_PI/86400;var P=new h;y.computeTemeToPseudoFixedMatrix=function(e,t){if(!o(e)){throw new s("date is required.")}P=h.addSeconds(e,-h.computeTaiMinusUtc(e),P);var r=P.dayNumber;var i=P.secondsOfDay;var n;var a=r-2451545;if(i>=43200){n=(a+.5)/w.DAYS_PER_JULIAN_CENTURY}else{n=(a-.5)/w.DAYS_PER_JULIAN_CENTURY}var u=O+n*(C+n*(z+n*_));var c=u*R%v.TWO_PI;var f=k+b*(r-2451545.5);var l=(i+w.SECONDS_PER_DAY*.5)%w.SECONDS_PER_DAY;var d=c+f*l;var p=Math.cos(d);var g=Math.sin(d);if(!o(t)){return new M(p,g,0,-g,p,0,0,0,1)}t[0]=p;t[1]=-g;t[2]=0;t[3]=g;t[4]=p;t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};y.iau2006XysData=new l;y.earthOrientationParameters=u.NONE;var U=32.184;var Q=2451545;y.preloadIcrfFixed=function(t){var r=t.start.dayNumber;var i=t.start.secondsOfDay+U;var n=t.stop.dayNumber;var a=t.stop.secondsOfDay+U;var o=y.iau2006XysData.preload(r,i,n,a);var s=y.earthOrientationParameters.getPromiseToLoad();return e.all([o,s])};y.computeIcrfToFixedMatrix=function(e,t){if(!o(e)){throw new s("date is required.")}if(!o(t)){t=new M}var r=y.computeFixedToIcrfMatrix(e,t);if(!o(r)){return undefined}return M.transpose(r,t)};var B=new d(0,0,0);var q=new c(0,0,0,0,0,0);var Y=new M;var F=new M;y.computeFixedToIcrfMatrix=function(e,t){if(!o(e)){throw new s("date is required.")}if(!o(t)){t=new M}var r=y.earthOrientationParameters.compute(e,q);if(!o(r)){return undefined}var i=e.dayNumber;var n=e.secondsOfDay+U;var a=y.iau2006XysData.computeXysRadians(i,n,B);if(!o(a)){return undefined}var u=a.x+r.xPoleOffset;var c=a.y+r.yPoleOffset;var f=1/(1+Math.sqrt(1-u*u-c*c));var l=Y;l[0]=1-f*u*u;l[3]=-f*u*c;l[6]=u;l[1]=-f*u*c;l[4]=1-f*c*c;l[7]=c;l[2]=-u;l[5]=-c;l[8]=1-f*(u*u+c*c);var d=M.fromRotationZ(-a.s,F);var p=M.multiply(l,d,Y);var g=e.dayNumber;var A=e.secondsOfDay-h.computeTaiMinusUtc(e)+r.ut1MinusUtc;var m=g-2451545;var D=A/w.SECONDS_PER_DAY;var N=.779057273264+D+.00273781191135448*(m+D);N=N%1*v.TWO_PI;var E=M.fromRotationZ(N,F);var I=M.multiply(p,E,Y);var T=Math.cos(r.xPoleWander);var L=Math.cos(r.yPoleWander);var j=Math.sin(r.xPoleWander);var x=Math.sin(r.yPoleWander);var S=i-Q+n/w.SECONDS_PER_DAY;S/=36525;var O=-47e-6*S*v.RADIANS_PER_DEGREE/3600;var C=Math.cos(O);var z=Math.sin(O);var _=F;_[0]=T*C;_[1]=T*z;_[2]=j;_[3]=-L*z+x*j*C;_[4]=L*C+x*j*z;_[5]=-x*T;_[6]=-x*z-L*j*C;_[7]=x*C-L*j*z;_[8]=L*T;return M.multiply(I,_,t)};var G=new i;y.pointToWindowCoordinates=function(e,t,r,i){i=y.pointToGLWindowCoordinates(e,t,r,i);i.y=2*t[5]-i.y;return i};y.pointToGLWindowCoordinates=function(e,r,n,a){if(!o(e)){throw new s("modelViewProjectionMatrix is required.")}if(!o(r)){throw new s("viewportTransformation is required.")}if(!o(n)){throw new s("point is required.")}if(!o(a)){a=new t}var u=G;p.multiplyByVector(e,i.fromElements(n.x,n.y,n.z,1,u),u);i.multiplyByScalar(u,1/u.w,u);p.multiplyByVector(r,u,u);return t.fromCartesian4(u,a)};var V=new r;var W=new r;var H=new r;y.rotationMatrixFromPositionVelocity=function(e,t,i,n){if(!o(e)){throw new s("position is required.")}if(!o(t)){throw new s("velocity is required.")}var u=a(i,f.WGS84).geodeticSurfaceNormal(e,V);var c=r.cross(t,u,W);if(r.equalsEpsilon(c,r.ZERO,v.EPSILON6)){c=r.clone(r.UNIT_X,c)}var l=r.cross(c,t,H);r.cross(t,l,c);r.negate(c,c);if(!o(n)){n=new M}n[0]=t.x;n[1]=t.y;n[2]=t.z;n[3]=c.x;n[4]=c.y;n[5]=c.z;n[6]=l.x;n[7]=l.y;n[8]=l.z;return n};var Z=new n;var X=new r;var K=new r;var J=new i;var $=new i;var ee=new i;var te=new i;var re=new i;var ie=new p;var ne=new p;y.basisTo2D=function(e,t,n){if(!o(e)){throw new s("projection is required.")}if(!o(t)){throw new s("matrix is required.")}if(!o(n)){throw new s("result is required.")}var a=e.ellipsoid;var u=p.getColumn(t,3,J);var c=a.cartesianToCartographic(u,Z);var f=y.eastNorthUpToFixedFrame(u,a,ie);var l=p.inverseTransformation(f,ne);var d=e.project(c,X);var h=$;h.x=d.z;h.y=d.x;h.z=d.y;h.w=1;var v=p.getColumn(t,0,K);var M=r.magnitude(v);var g=p.multiplyByVector(l,v,ee);i.fromElements(g.z,g.x,g.y,0,g);var w=p.getColumn(t,1,K);var A=r.magnitude(w);var m=p.multiplyByVector(l,w,te);i.fromElements(m.z,m.x,m.y,0,m);var D=p.getColumn(t,2,K);var N=r.magnitude(D);var E=re;r.cross(g,m,E);r.normalize(E,E);r.cross(m,E,g);r.normalize(g,g);r.cross(E,g,m);r.normalize(m,m);r.multiplyByScalar(g,M,g);r.multiplyByScalar(m,A,m);r.multiplyByScalar(E,N,E);p.setColumn(n,0,g,n);p.setColumn(n,1,m,n);p.setColumn(n,2,E,n);p.setColumn(n,3,h,n);return n};return y})})();(function(){var t=e.amdDefine;t("67",[],function(){function e(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g;var t=arguments,r=0,i=t[r++];var n=function(e,t,r,i){if(!r){r=" "}var n=e.length>=t?"":Array(1+t-e.length>>>0).join(r);return i?e+n:n+e};var a=function(e,t,r,i,a,o){var s=i-e.length;if(s>0){if(r||!a){e=n(e,i,o,r)}else{e=e.slice(0,t.length)+n("",s,"0",true)+e.slice(t.length)}}return e};var o=function(e,t,r,i,o,s,u){var c=e>>>0;r=r&&c&&{2:"0b",8:"0",16:"0x"}[t]||"";e=r+n(c.toString(t),s||0,"0",false);return a(e,r,i,o,u)};var s=function(e,t,r,i,n,o){if(i!=null){e=e.slice(0,i)}return a(e,"",t,r,n,o)};var u=function(e,i,u,c,f,l,d){var h;var v;var M;var p;var g;if(e=="%%"){return"%"}var w=false,y="",A=false,m=false,D=" ";var N=u.length;for(var E=0;u&&E<N;E++){switch(u.charAt(E)){case" ":y=" ";break;case"+":y="+";break;case"-":w=true;break;case"'":D=u.charAt(E+1);break;case"0":A=true;break;case"#":m=true;break}}if(!c){c=0}else if(c=="*"){c=+t[r++]}else if(c.charAt(0)=="*"){c=+t[c.slice(1,-1)]}else{c=+c}if(c<0){c=-c;w=true}if(!isFinite(c)){throw new Error("sprintf: (minimum-)width must be finite")}if(!l){l="fFeE".indexOf(d)>-1?6:d=="d"?0:undefined}else if(l=="*"){l=+t[r++]}else if(l.charAt(0)=="*"){l=+t[l.slice(1,-1)]}else{l=+l}g=i?t[i.slice(0,-1)]:t[r++];switch(d){case"s":return s(String(g),w,c,l,A,D);case"c":return s(String.fromCharCode(+g),w,c,l,A);case"b":return o(g,2,m,w,c,l,A);case"o":return o(g,8,m,w,c,l,A);case"x":return o(g,16,m,w,c,l,A);case"X":return o(g,16,m,w,c,l,A).toUpperCase();case"u":return o(g,10,m,w,c,l,A);case"i":case"d":h=+g||0;h=Math.round(h-h%1);v=h<0?"-":y;g=v+n(String(Math.abs(h)),l,"0",false);return a(g,v,w,c,A);case"e":case"E":case"f":case"F":case"g":case"G":h=+g;v=h<0?"-":y;M=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())];p=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2];g=v+Math.abs(h)[M](l);return a(g,v,w,c,A)[p]();default:return e}};return i.replace(e,u)}return e})})();(function(){var t=e.amdDefine;t("52",["1a","1c"],function(e,t){"use strict";function r(r,i,n){if(!e(r)){throw new t("array is required.")}if(!e(i)){throw new t("itemToFind is required.")}if(!e(n)){throw new t("comparator is required.")}var a=0;var o=r.length-1;var s;var u;while(a<=o){s=~~((a+o)/2);u=n(r[s],i);if(u<0){a=s+1;continue}if(u>0){o=s-1;continue}return s}return~(o+1)}return r})})();(function(){var t=e.amdDefine;t("68",[],function(){"use strict";function e(e,t,r,i,n,a,o,s){this.year=e;this.month=t;this.day=r;this.hour=i;this.minute=n;this.second=a;this.millisecond=o;this.isLeapSecond=s}return e})})();(function(){var t=e.amdDefine;t("69",["1c"],function(e){"use strict";function t(t){if(t===null||isNaN(t)){throw new e("year is required and must be a number.")}return t%4===0&&t%100!==0||t%400===0}return t})})();(function(){var t=e.amdDefine;t("57",[],function(){"use strict";function e(e,t){this.julianDate=e;this.offset=t}return e})})();(function(){var t=e.amdDefine;t("2c",["67","52","2b","1a","1c","68","69","57","59","5a"],function(e,t,r,i,n,a,o,s,u,c){"use strict";var f=new a;var l=[31,28,31,30,31,30,31,31,30,31,30,31];var d=29;function h(e,t){return x.compare(e.julianDate,t.julianDate)}var v=new s;function M(e){v.julianDate=e;var r=x.leapSeconds;var i=t(r,v,h);if(i<0){i=~i}if(i>=r.length){i=r.length-1}var n=r[i].offset;if(i>0){var a=x.secondsDifference(r[i].julianDate,e);if(a>n){i--;n=r[i].offset}}x.addSeconds(e,n,e)}function p(e,r){v.julianDate=e;var i=x.leapSeconds;var n=t(i,v,h);if(n<0){n=~n}if(n===0){return x.addSeconds(e,-i[0].offset,r)}if(n>=i.length){return x.addSeconds(e,-i[n-1].offset,r)}var a=x.secondsDifference(i[n].julianDate,e);if(a===0){return x.addSeconds(e,-i[n].offset,r)}if(a<=1){return undefined}return x.addSeconds(e,-i[--n].offset,r)}function g(e,t,r){var i=t/u.SECONDS_PER_DAY|0;e+=i;t-=u.SECONDS_PER_DAY*i;if(t<0){e--;t+=u.SECONDS_PER_DAY}r.dayNumber=e;r.secondsOfDay=t;return r}function w(e,t,r,i,n,a,o){var s=(t-14)/12|0;var c=e+4800+s;var f=(1461*c/4|0)+(367*(t-2-12*s)/12|0)-(3*((c+100)/100|0)/4|0)+r-32075;i=i-12;if(i<0){i+=24}var l=a+(i*u.SECONDS_PER_HOUR+n*u.SECONDS_PER_MINUTE+o*u.SECONDS_PER_MILLISECOND);if(l>=43200){f-=1}return[f,l]}var y=/^(\d{4})$/;var A=/^(\d{4})-(\d{2})$/;var m=/^(\d{4})-?(\d{3})$/;var D=/^(\d{4})-?W(\d{2})-?(\d{1})?$/;var N=/^(\d{4})-?(\d{2})-?(\d{2})$/;var E=/([Z+\-])?(\d{2})?:?(\d{2})?$/;var I=/^(\d{2})(\.\d+)?/.source+E.source;var T=/^(\d{2}):?(\d{2})(\.\d+)?/.source+E.source;var L=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+E.source;var j="Invalid ISO 8601 date.";function x(e,t,i){this.dayNumber=undefined;this.secondsOfDay=undefined;e=r(e,0);t=r(t,0);i=r(i,c.UTC);var n=e|0;t=t+(e-n)*u.SECONDS_PER_DAY;g(n,t,this);if(i===c.UTC){M(this)}}x.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime())){throw new n("date must be a valid JavaScript Date.")}var r=w(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());if(!i(t)){return new x(r[0],r[1],c.UTC)}g(r[0],r[1],t);M(t);return t};x.fromIso8601=function(e,t){if(typeof e!=="string"){throw new n(j)}e=e.replace(",",".");var r=e.split("T");var a;var s=1;var u=1;var f=0;var h=0;var v=0;var p=0;var E=r[0];var S=r[1];var O;var C;if(!i(E)){throw new n(j)}var z;r=E.match(N);if(r!==null){z=E.split("-").length-1;if(z>0&&z!==2){throw new n(j)}a=+r[1];s=+r[2];u=+r[3]}else{r=E.match(A);if(r!==null){a=+r[1];s=+r[2]}else{r=E.match(y);if(r!==null){a=+r[1]}else{var _;r=E.match(m);if(r!==null){a=+r[1];_=+r[2];C=o(a);if(_<1||C&&_>366||!C&&_>365){throw new n(j)}}else{r=E.match(D);if(r!==null){a=+r[1];var b=+r[2];var k=+r[3]||0;z=E.split("-").length-1;if(z>0&&(!i(r[3])&&z!==1||i(r[3])&&z!==2)){throw new n(j)}var R=new Date(Date.UTC(a,0,4));_=b*7+k-R.getUTCDay()-3}else{throw new n(j)}}O=new Date(Date.UTC(a,0,1));O.setUTCDate(_);s=O.getUTCMonth()+1;u=O.getUTCDate()}}}C=o(a);if(s<1||s>12||u<1||(s!==2||!C)&&u>l[s-1]||C&&s===2&&u>d){throw new n(j)}var P;if(i(S)){r=S.match(L);if(r!==null){z=S.split(":").length-1;if(z>0&&z!==2&&z!==3){throw new n(j)}f=+r[1];h=+r[2];v=+r[3];p=+(r[4]||0)*1e3;P=5}else{r=S.match(T);if(r!==null){z=S.split(":").length-1;if(z>2){throw new n(j)}f=+r[1];h=+r[2];v=+(r[3]||0)*60;P=4}else{r=S.match(I);if(r!==null){f=+r[1];h=+(r[2]||0)*60;P=3}else{throw new n(j)}}}if(h>=60||v>=61||f>24||f===24&&(h>0||v>0||p>0)){throw new n(j)}var U=r[P];var Q=+r[P+1];var B=+(r[P+2]||0);switch(U){case"+":f=f-Q;h=h-B;break;case"-":f=f+Q;h=h+B;break;case"Z":break;default:h=h+new Date(Date.UTC(a,s-1,u,f,h)).getTimezoneOffset();break}}else{h=h+new Date(a,s-1,u).getTimezoneOffset()}var q=v===60;if(q){v--}while(h>=60){h-=60;f++}while(f>=24){f-=24;u++}O=C&&s===2?d:l[s-1];while(u>O){u-=O;s++;if(s>12){s-=12;a++}O=C&&s===2?d:l[s-1]}while(h<0){h+=60;f--}while(f<0){f+=24;u--}while(u<1){s--;if(s<1){s+=12;a--}O=C&&s===2?d:l[s-1];u+=O}var Y=w(a,s,u,f,h,v,p);if(!i(t)){t=new x(Y[0],Y[1],c.UTC)}else{g(Y[0],Y[1],t);M(t)}if(q){x.addSeconds(t,1,t)}return t};x.now=function(e){return x.fromDate(new Date,e)};var S=new x(0,0,c.TAI);x.toGregorianDate=function(e,t){if(!i(e)){throw new n("julianDate is required.")}var r=false;var o=p(e,S);if(!i(o)){x.addSeconds(e,-1,S);o=p(S,S);r=true}var s=o.dayNumber;var c=o.secondsOfDay;if(c>=43200){s+=1}var f=s+68569|0;var l=4*f/146097|0;f=f-((146097*l+3)/4|0)|0;var d=4e3*(f+1)/1461001|0;f=f-(1461*d/4|0)+31|0;var h=80*f/2447|0;var v=f-(2447*h/80|0)|0;f=h/11|0;var M=h+2-12*f|0;var g=100*(l-49)+d+f|0;var w=c/u.SECONDS_PER_HOUR|0;var y=c-w*u.SECONDS_PER_HOUR;var A=y/u.SECONDS_PER_MINUTE|0;y=y-A*u.SECONDS_PER_MINUTE;var m=y|0;var D=(y-m)/u.SECONDS_PER_MILLISECOND;w+=12;if(w>23){w-=24}if(r){m+=1}if(!i(t)){return new a(g,M,v,w,A,m,D,r)}t.year=g;t.month=M;t.day=v;t.hour=w;t.minute=A;t.second=m;t.millisecond=D;t.isLeapSecond=r;return t};x.toDate=function(e){if(!i(e)){throw new n("julianDate is required.")}var t=x.toGregorianDate(e,f);var r=t.second;if(t.isLeapSecond){r-=1}return new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,r,t.millisecond))};x.toIso8601=function(t,r){if(!i(t)){throw new n("julianDate is required.")}var a=x.toGregorianDate(t,a);var o;if(!i(r)&&a.millisecond!==0){o=(a.millisecond*.01).toString().replace(".","");return e("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a.year,a.month,a.day,a.hour,a.minute,a.second,o)}if(!i(r)||r===0){return e("%04d-%02d-%02dT%02d:%02d:%02dZ",a.year,a.month,a.day,a.hour,a.minute,a.second)}o=(a.millisecond*.01).toFixed(r).replace(".","").slice(0,r);return e("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a.year,a.month,a.day,a.hour,a.minute,a.second,o)};x.clone=function(e,t){if(!i(e)){return undefined}if(!i(t)){return new x(e.dayNumber,e.secondsOfDay,c.TAI)}t.dayNumber=e.dayNumber;t.secondsOfDay=e.secondsOfDay;return t};x.compare=function(e,t){if(!i(e)){throw new n("left is required.")}if(!i(t)){throw new n("right is required.")}var r=e.dayNumber-t.dayNumber;if(r!==0){return r}return e.secondsOfDay-t.secondsOfDay};x.equals=function(e,t){return e===t||i(e)&&i(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay};x.equalsEpsilon=function(e,t,r){if(!i(r)){throw new n("epsilon is required.")}return e===t||i(e)&&i(t)&&Math.abs(x.secondsDifference(e,t))<=r};x.totalDays=function(e){if(!i(e)){throw new n("julianDate is required.")}return e.dayNumber+e.secondsOfDay/u.SECONDS_PER_DAY};x.secondsDifference=function(e,t){if(!i(e)){throw new n("left is required.")}if(!i(t)){throw new n("right is required.")}var r=(e.dayNumber-t.dayNumber)*u.SECONDS_PER_DAY;return r+(e.secondsOfDay-t.secondsOfDay)};x.daysDifference=function(e,t){if(!i(e)){throw new n("left is required.")}if(!i(t)){throw new n("right is required.")}var r=e.dayNumber-t.dayNumber;var a=(e.secondsOfDay-t.secondsOfDay)/u.SECONDS_PER_DAY;return r+a};x.computeTaiMinusUtc=function(e){v.julianDate=e;var r=x.leapSeconds;var i=t(r,v,h);if(i<0){i=~i;--i;if(i<0){i=0}}return r[i].offset};x.addSeconds=function(e,t,r){if(!i(e)){throw new n("julianDate is required.")}if(!i(t)){throw new n("seconds is required.")}if(!i(r)){throw new n("result is required.")}return g(e.dayNumber,e.secondsOfDay+t,r)};x.addMinutes=function(e,t,r){if(!i(e)){throw new n("julianDate is required.")}if(!i(t)){throw new n("minutes is required.")}if(!i(r)){throw new n("result is required.")}var a=e.secondsOfDay+t*u.SECONDS_PER_MINUTE;return g(e.dayNumber,a,r)};x.addHours=function(e,t,r){if(!i(e)){throw new n("julianDate is required.")}if(!i(t)){throw new n("hours is required.")}if(!i(r)){throw new n("result is required.")}var a=e.secondsOfDay+t*u.SECONDS_PER_HOUR;return g(e.dayNumber,a,r)};x.addDays=function(e,t,r){if(!i(e)){throw new n("julianDate is required.")}if(!i(t)){throw new n("days is required.")}if(!i(r)){throw new n("result is required.")}var a=e.dayNumber+t;return g(a,e.secondsOfDay,r)};x.lessThan=function(e,t){return x.compare(e,t)<0};x.lessThanOrEquals=function(e,t){return x.compare(e,t)<=0};x.greaterThan=function(e,t){return x.compare(e,t)>0};x.greaterThanOrEquals=function(e,t){return x.compare(e,t)>=0};x.prototype.clone=function(e){return x.clone(this,e)};x.prototype.equals=function(e){return x.equals(this,e)};x.prototype.equalsEpsilon=function(e,t){return x.equalsEpsilon(this,e,t)};x.prototype.toString=function(){return x.toIso8601(this)};x.leapSeconds=[new s(new x(2441317,43210,c.TAI),10),new s(new x(2441499,43211,c.TAI),11),new s(new x(2441683,43212,c.TAI),12),new s(new x(2442048,43213,c.TAI),13),new s(new x(2442413,43214,c.TAI),14),new s(new x(2442778,43215,c.TAI),15),new s(new x(2443144,43216,c.TAI),16),new s(new x(2443509,43217,c.TAI),17),new s(new x(2443874,43218,c.TAI),18),new s(new x(2444239,43219,c.TAI),19),new s(new x(2444786,43220,c.TAI),20),new s(new x(2445151,43221,c.TAI),21),new s(new x(2445516,43222,c.TAI),22),new s(new x(2446247,43223,c.TAI),23),new s(new x(2447161,43224,c.TAI),24),new s(new x(2447892,43225,c.TAI),25),new s(new x(2448257,43226,c.TAI),26),new s(new x(2448804,43227,c.TAI),27),new s(new x(2449169,43228,c.TAI),28),new s(new x(2449534,43229,c.TAI),29),new s(new x(2450083,43230,c.TAI),30),new s(new x(2450630,43231,c.TAI),31),new s(new x(2451179,43232,c.TAI),32),new s(new x(2453736,43233,c.TAI),33),new s(new x(2454832,43234,c.TAI),34),new s(new x(2456109,43235,c.TAI),35),new s(new x(2457204,43236,c.TAI),36)];return x})})();(function(){var t=e.amdDefine;t("59",["26"],function(e){"use strict";var t={SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5};return e(t)})})();(function(){var t=e.amdDefine;t("5a",["26"],function(e){"use strict";var t={UTC:0,TAI:1};return e(t)})})();(function(){var t=e.amdDefine;t("6a",["32","1a","1c","2c","22","38","59","5a"],function(e,t,r,i,n,a,o,s){"use strict";var u={};function c(e){var t=6.239996+.0172019696544*e;return.001657*Math.sin(t+.01671*Math.sin(t))}var f=32.184;var l=2451545;function d(e,t){t=i.addSeconds(e,f,t);var r=i.totalDays(t)-l;t=i.addSeconds(t,c(r),t);return t}var h=new i(2451545,0,s.TAI);var v=398600435e6;var M=v*(1+.012300034)*328900.56;var p=1e3;var g=n.RADIANS_PER_DEGREE;var w=n.RADIANS_PER_ARCSECOND;var y=14959787e4;var A=new a;function m(i,o,s,u,c,f,l,d){if(s<0){s=-s;c+=n.PI}if(s<0||s>n.PI){throw new r("The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.")}var h=i*(1-o);var v=u-c;var M=c;var p=N(f-u,o);var g=D(o,0);if(g==="Hyperbolic"&&Math.abs(n.negativePiToPi(p))>=Math.acos(-1/o)){throw new r("The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.")}j(v,s,M,A);var w=h*(1+o);var y=Math.cos(p);var m=Math.sin(p);var E=1+o*y;if(E<=n.Epsilon10){throw new r("elements cannot be converted to cartesian")}var I=w/E;if(!t(d)){d=new e(I*y,I*m,0)}else{d.x=I*y;d.y=I*m;d.z=0}return a.multiplyByVector(A,d,d)}function D(e,t){if(e<0){throw new r("eccentricity cannot be negative.")}else if(e<=t){return"Circular"}else if(e<1-t){return"Elliptical"}else if(e<=1+t){return"Parabolic"}else{return"Hyperbolic"}}function N(e,t){if(t<0||t>=1){throw new r("eccentricity out of range.")}var i=T(e,t);return L(i,t)}var E=50;var I=n.EPSILON8;function T(e,t){if(t<0||t>=1){throw new r("eccentricity out of range.")}var i=Math.floor(e/n.TWO_PI);e-=i*n.TWO_PI;var a=e+t*Math.sin(e)/(1-Math.sin(e+t)+Math.sin(e));var o=Number.MAX_VALUE;var s;for(s=0;s<E&&Math.abs(o-a)>I;++s){o=a;var u=o-t*Math.sin(o)-e;var c=1-t*Math.cos(o);a=o-u/c}if(s>=E){throw new r("Kepler equation did not converge")}o=a+i*n.TWO_PI;return o}function L(e,t){if(t<0||t>=1){throw new r("eccentricity out of range.")}var i=Math.floor(e/n.TWO_PI);e-=i*n.TWO_PI;var a=Math.cos(e)-t;var o=Math.sin(e)*Math.sqrt(1-t*t);var s=Math.atan2(o,a);s=n.zeroToTwoPi(s);if(e<0){s-=n.TWO_PI}s+=i*n.TWO_PI;return s}function j(e,i,o,s){if(i<0||i>n.PI){throw new r("inclination out of range")}var u=Math.cos(e);var c=Math.sin(e);var f=Math.cos(i);var l=Math.sin(i);var d=Math.cos(o);var h=Math.sin(o);if(!t(s)){s=new a(d*u-h*c*f,-d*c-h*u*f,h*l,h*u+d*c*f,-h*c+d*u*f,-d*l,c*l,u*l,f)}else{s[0]=d*u-h*c*f;s[1]=h*u+d*c*f;s[2]=c*l;s[3]=-d*c-h*u*f;s[4]=-h*c+d*u*f;s[5]=u*l;s[6]=h*l;s[7]=-d*l;s[8]=f}return s}var x=1.0000010178*y;var S=100.46645683*g;var O=1295977422.83429*w;var C=16002;var z=21863;var _=32004;var b=10931;var k=14529;var R=16368;var P=15318;var U=32794;var Q=64*1e-7*y;var B=-152*1e-7*y;var q=62*1e-7*y;var Y=-8*1e-7*y;var F=32*1e-7*y;var G=-41*1e-7*y;var V=19*1e-7*y;var W=-11*1e-7*y;var H=-150*1e-7*y;var Z=-46*1e-7*y;var X=68*1e-7*y;var K=54*1e-7*y;var J=14*1e-7*y;var $=24*1e-7*y;var ee=-28*1e-7*y;var te=22*1e-7*y;var re=10;var ie=16002;var ne=21863;var ae=10931;var oe=1473;var se=32004;var ue=4387;var ce=73;var fe=-325*1e-7;var le=-322*1e-7;var de=-79*1e-7;var he=232*1e-7;var ve=-52*1e-7;var Me=97*1e-7;var pe=55*1e-7;var ge=-41*1e-7;var we=-105*1e-7;var ye=-137*1e-7;var Ae=258*1e-7;var me=35*1e-7;var De=-116*1e-7;var Ne=-88*1e-7;var Ee=-112*1e-7;var Ie=-80*1e-7;var Te=new i(0,0,s.TAI);function Le(e,t){d(e,Te);var r=Te.dayNumber-h.dayNumber+(Te.secondsOfDay-h.secondsOfDay)/o.SECONDS_PER_DAY;var i=r/(o.DAYS_PER_JULIAN_CENTURY*10);var n=.3595362*i;var a=x+Q*Math.cos(C*n)+H*Math.sin(C*n)+B*Math.cos(z*n)+Z*Math.sin(z*n)+q*Math.cos(_*n)+X*Math.sin(_*n)+Y*Math.cos(b*n)+K*Math.sin(b*n)+F*Math.cos(k*n)+J*Math.sin(k*n)+G*Math.cos(R*n)+$*Math.sin(R*n)+V*Math.cos(P*n)+ee*Math.sin(P*n)+W*Math.cos(U*n)+te*Math.sin(U*n);var s=S+O*i+fe*Math.cos(re*n)+we*Math.sin(re*n)+le*Math.cos(ie*n)+ye*Math.sin(ie*n)+de*Math.cos(ne*n)+Ae*Math.sin(ne*n)+he*Math.cos(ae*n)+me*Math.sin(ae*n)+ve*Math.cos(oe*n)+De*Math.sin(oe*n)+Me*Math.cos(se*n)+Ne*Math.sin(se*n)+pe*Math.cos(ue*n)+Ee*Math.sin(ue*n)+ge*Math.cos(ce*n)+Ie*Math.sin(ce*n);var u=.0167086342-.0004203654*i;var c=102.93734808*g+11612.3529*w*i;var f=469.97289*w*i;var l=174.87317577*g-8679.27034*w*i;return m(a,u,f,c,l,s,M,t)}function je(e,t){d(e,Te);var r=Te.dayNumber-h.dayNumber+(Te.secondsOfDay-h.secondsOfDay)/o.SECONDS_PER_DAY;var i=r/o.DAYS_PER_JULIAN_CENTURY;var n=i*i;var a=n*i;var s=a*i;var u=383397.7725+.004*i;var c=.055545526-1.6e-8*i;var f=5.15668983*g;var l=-8e-5*i+.02966*n-42e-6*a-1.3e-7*s;var M=83.35324312*g;var y=14643420.2669*i-38.2702*n-.045047*a+21301e-8*s;var A=125.04455501*g;var D=-6967919.3631*i+6.3602*n+.007625*a-3586e-8*s;var N=218.31664563*g;var E=1732559343.4847*i-6.391*n+.006588*a-3169e-8*s;var I=297.85019547*g+w*(1602961601.209*i-6.3706*n+.006593*a-3169e-8*s);var T=93.27209062*g+w*(1739527262.8478*i-12.7512*n-.001037*a+417e-8*s);var L=134.96340251*g+w*(1717915923.2178*i+31.8792*n+.051635*a-2447e-7*s);var j=357.52910918*g+w*(129596581.0481*i-.5532*n+136e-6*a-1149e-8*s);var x=310.17137918*g-w*(6967051.436*i+6.2068*n+.007618*a-3219e-8*s);var S=2*I;var O=4*I;var C=6*I;var z=2*L;var _=3*L;var b=4*L;var k=2*T;u+=3400.4*Math.cos(S)-635.6*Math.cos(S-L)-235.6*Math.cos(L)+218.1*Math.cos(S-j)+181*Math.cos(S+L);c+=.014216*Math.cos(S-L)+.008551*Math.cos(S-z)-.001383*Math.cos(L)+.001356*Math.cos(S+L)-.001147*Math.cos(O-_)-914e-6*Math.cos(O-z)+869e-6*Math.cos(S-j-L)-627e-6*Math.cos(S)-394e-6*Math.cos(O-b)+282e-6*Math.cos(S-j-z)-279e-6*Math.cos(I-L)-236e-6*Math.cos(z)+231e-6*Math.cos(O)+229e-6*Math.cos(C-b)-201e-6*Math.cos(z-k);l+=486.26*Math.cos(S-k)-40.13*Math.cos(S)+37.51*Math.cos(k)+25.73*Math.cos(z-k)+19.97*Math.cos(S-j-k);y+=-55609*Math.sin(S-L)-34711*Math.sin(S-z)-9792*Math.sin(L)+9385*Math.sin(O-_)+7505*Math.sin(O-z)+5318*Math.sin(S+L)+3484*Math.sin(O-b)-3417*Math.sin(S-j-L)-2530*Math.sin(C-b)-2376*Math.sin(S)-2075*Math.sin(S-_)-1883*Math.sin(z)-1736*Math.sin(C-5*L)+1626*Math.sin(j)-1370*Math.sin(C-_);D+=-5392*Math.sin(S-k)-540*Math.sin(j)-441*Math.sin(S)+423*Math.sin(k)-288*Math.sin(z-k);E+=-3332.9*Math.sin(S)+1197.4*Math.sin(S-L)-662.5*Math.sin(j)+396.3*Math.sin(L)-218*Math.sin(S-j);var R=2*x;var P=3*x;l+=46.997*Math.cos(x)*i-.614*Math.cos(S-k+x)*i+.614*Math.cos(S-k-x)*i-.0297*Math.cos(R)*n-.0335*Math.cos(x)*n+.0012*Math.cos(S-k+R)*n-16e-5*Math.cos(x)*a+4e-5*Math.cos(P)*a+4e-5*Math.cos(R)*a;var U=2.116*Math.sin(x)*i-.111*Math.sin(S-k-x)*i-.0015*Math.sin(x)*n;y+=U;E+=U;D+=-520.77*Math.sin(x)*i+13.66*Math.sin(S-k+x)*i+1.12*Math.sin(S-x)*i-1.06*Math.sin(k-x)*i+.66*Math.sin(R)*n+.371*Math.sin(x)*n-.035*Math.sin(S-k+R)*n-.015*Math.sin(S-k+x)*n+.0014*Math.sin(x)*a-.0011*Math.sin(P)*a-9e-4*Math.sin(R)*a;u*=p;var Q=f+l*w;var B=M+y*w;var q=N+E*w;var Y=A+D*w;return m(u,c,Q,B,Y,q,v,t)}var xe=.012300034;var Se=xe/(xe+1)*-1;function Oe(t,r){r=je(t,r);return e.multiplyByScalar(r,Se,r)}var Ce=new a(1.0000000000000002,5.619723173785822e-16,4.690511510146299e-19,-5.154129427414611e-16,.9174820620691819,-.39777715593191376,-2.23970096136568e-16,.39777715593191376,.9174820620691819);var ze=new e;u.computeSunPositionInEarthInertialFrame=function(r,n){if(!t(r)){r=i.now()}if(!t(n)){n=new e}ze=Le(r,ze);n=e.negate(ze,n);Oe(r,ze);e.subtract(n,ze,n);a.multiplyByVector(Ce,n,n);return n};u.computeMoonPositionInEarthInertialFrame=function(e,r){if(!t(e)){e=i.now()}r=je(e,r);a.multiplyByVector(Ce,r,r);return r};return u})})();(function(){var t=e.amdDefine;t("43",["32","42","2b","1a","1b","1c","26","22","6b"],function(e,t,r,i,n,a,o,s,u){"use strict";function c(t,i,n,o){i=r(i,0);n=r(n,0);o=r(o,0);if(i<0||n<0||o<0){throw new a("All radii components must be greater than or equal to zero.")}t._radii=new e(i,n,o);t._radiiSquared=new e(i*i,n*n,o*o);t._radiiToTheFourth=new e(i*i*i*i,n*n*n*n,o*o*o*o);t._oneOverRadii=new e(i===0?0:1/i,n===0?0:1/n,o===0?0:1/o);t._oneOverRadiiSquared=new e(i===0?0:1/(i*i),n===0?0:1/(n*n),o===0?0:1/(o*o));t._minimumRadius=Math.min(i,n,o);t._maximumRadius=Math.max(i,n,o);t._centerToleranceSquared=s.EPSILON1}function f(e,t,r){this._radii=undefined;this._radiiSquared=undefined;this._radiiToTheFourth=undefined;this._oneOverRadii=undefined;this._oneOverRadiiSquared=undefined;this._minimumRadius=undefined;this._maximumRadius=undefined;this._centerToleranceSquared=undefined;c(this,e,t,r)}n(f.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}});f.clone=function(t,r){if(!i(t)){return undefined}var n=t._radii;if(!i(r)){return new f(n.x,n.y,n.z)}e.clone(n,r._radii);e.clone(t._radiiSquared,r._radiiSquared);e.clone(t._radiiToTheFourth,r._radiiToTheFourth);e.clone(t._oneOverRadii,r._oneOverRadii);e.clone(t._oneOverRadiiSquared,r._oneOverRadiiSquared);r._minimumRadius=t._minimumRadius;r._maximumRadius=t._maximumRadius;r._centerToleranceSquared=t._centerToleranceSquared;return r};f.fromCartesian3=function(e,t){if(!i(t)){t=new f}if(!i(e)){return t}c(t,e.x,e.y,e.z);return t};f.WGS84=o(new f(6378137,6378137,6356752.314245179));f.UNIT_SPHERE=o(new f(1,1,1));f.MOON=o(new f(s.LUNAR_RADIUS,s.LUNAR_RADIUS,s.LUNAR_RADIUS));f.prototype.clone=function(e){
return f.clone(this,e)};f.packedLength=e.packedLength;f.pack=function(t,n,o){if(!i(t)){throw new a("value is required")}if(!i(n)){throw new a("array is required")}o=r(o,0);e.pack(t._radii,n,o)};f.unpack=function(t,n,o){if(!i(t)){throw new a("array is required")}n=r(n,0);var s=e.unpack(t,n);return f.fromCartesian3(s,o)};f.prototype.geocentricSurfaceNormal=e.normalize;f.prototype.geodeticSurfaceNormalCartographic=function(t,r){if(!i(t)){throw new a("cartographic is required.")}var n=t.longitude;var o=t.latitude;var s=Math.cos(o);var u=s*Math.cos(n);var c=s*Math.sin(n);var f=Math.sin(o);if(!i(r)){r=new e}r.x=u;r.y=c;r.z=f;return e.normalize(r,r)};f.prototype.geodeticSurfaceNormal=function(t,r){if(!i(r)){r=new e}r=e.multiplyComponents(t,this._oneOverRadiiSquared,r);return e.normalize(r,r)};var l=new e;var d=new e;f.prototype.cartographicToCartesian=function(t,r){var n=l;var a=d;this.geodeticSurfaceNormalCartographic(t,n);e.multiplyComponents(this._radiiSquared,n,a);var o=Math.sqrt(e.dot(n,a));e.divideByScalar(a,o,a);e.multiplyByScalar(n,t.height,n);if(!i(r)){r=new e}return e.add(a,n,r)};f.prototype.cartographicArrayToCartesianArray=function(e,t){if(!i(e)){throw new a("cartographics is required.")}var r=e.length;if(!i(t)){t=new Array(r)}else{t.length=r}for(var n=0;n<r;n++){t[n]=this.cartographicToCartesian(e[n],t[n])}return t};var h=new e;var v=new e;var M=new e;f.prototype.cartesianToCartographic=function(r,n){var a=this.scaleToGeodeticSurface(r,v);if(!i(a)){return undefined}var o=this.geodeticSurfaceNormal(a,h);var u=e.subtract(r,a,M);var c=Math.atan2(o.y,o.x);var f=Math.asin(o.z);var l=s.sign(e.dot(u,r))*e.magnitude(u);if(!i(n)){return new t(c,f,l)}n.longitude=c;n.latitude=f;n.height=l;return n};f.prototype.cartesianArrayToCartographicArray=function(e,t){if(!i(e)){throw new a("cartesians is required.")}var r=e.length;if(!i(t)){t=new Array(r)}else{t.length=r}for(var n=0;n<r;++n){t[n]=this.cartesianToCartographic(e[n],t[n])}return t};f.prototype.scaleToGeodeticSurface=function(e,t){return u(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)};f.prototype.scaleToGeocentricSurface=function(t,r){if(!i(t)){throw new a("cartesian is required.")}if(!i(r)){r=new e}var n=t.x;var o=t.y;var s=t.z;var u=this._oneOverRadiiSquared;var c=1/Math.sqrt(n*n*u.x+o*o*u.y+s*s*u.z);return e.multiplyByScalar(t,c,r)};f.prototype.transformPositionToScaledSpace=function(t,r){if(!i(r)){r=new e}return e.multiplyComponents(t,this._oneOverRadii,r)};f.prototype.transformPositionFromScaledSpace=function(t,r){if(!i(r)){r=new e}return e.multiplyComponents(t,this._radii,r)};f.prototype.equals=function(t){return this===t||i(t)&&e.equals(this._radii,t._radii)};f.prototype.toString=function(){return this._radii.toString()};return f})})();(function(){var t=e.amdDefine;t("6c",["32","42","2b","1a","1b","1c","43","22"],function(e,t,r,i,n,a,o,s){"use strict";function u(e){var t=e._uSquared;var r=e._ellipsoid.maximumRadius;var i=e._ellipsoid.minimumRadius;var n=(r-i)/r;var a=Math.cos(e._startHeading);var o=Math.sin(e._startHeading);var s=(1-n)*Math.tan(e._start.latitude);var u=1/Math.sqrt(1+s*s);var c=u*s;var f=Math.atan2(s,a);var l=u*o;var d=l*l;var h=1-d;var v=Math.sqrt(h);var M=t/4;var p=M*M;var g=p*M;var w=p*p;var y=1+M-3*p/4+5*g/4-175*w/64;var A=1-M+15*p/8-35*g/8;var m=1-3*M+35*p/4;var D=1-5*M;var N=y*f-A*Math.sin(2*f)*M/2-m*Math.sin(4*f)*p/16-D*Math.sin(6*f)*g/48-Math.sin(8*f)*5*w/512;var E=e._constants;E.a=r;E.b=i;E.f=n;E.cosineHeading=a;E.sineHeading=o;E.tanU=s;E.cosineU=u;E.sineU=c;E.sigma=f;E.sineAlpha=l;E.sineSquaredAlpha=d;E.cosineSquaredAlpha=h;E.cosineAlpha=v;E.u2Over4=M;E.u4Over16=p;E.u6Over64=g;E.u8Over256=w;E.a0=y;E.a1=A;E.a2=m;E.a3=D;E.distanceRatio=N}function c(e,t){return e*t*(4+e*(4-3*t))/16}function f(e,t,r,i,n,a,o){var s=c(e,r);return(1-s)*e*t*(i+s*n*(o+s*a*(2*o*o-1)))}function l(e,t,r,i,n,a,o){var u=(t-r)/t;var c=a-i;var l=Math.atan((1-u)*Math.tan(n));var d=Math.atan((1-u)*Math.tan(o));var h=Math.cos(l);var v=Math.sin(l);var M=Math.cos(d);var p=Math.sin(d);var g=h*M;var w=h*p;var y=v*p;var A=v*M;var m=c;var D=s.TWO_PI;var N=Math.cos(m);var E=Math.sin(m);var I;var T;var L;var j;var x;do{N=Math.cos(m);E=Math.sin(m);var S=w-A*N;L=Math.sqrt(M*M*E*E+S*S);T=y+g*N;I=Math.atan2(L,T);var O;if(L===0){O=0;j=1}else{O=g*E/L;j=1-O*O}D=m;x=T-2*y/j;if(isNaN(x)){x=0}m=c+f(u,O,j,I,L,T,x)}while(Math.abs(m-D)>s.EPSILON12);var C=j*(t*t-r*r)/(r*r);var z=1+C*(4096+C*(C*(320-175*C)-768))/16384;var _=C*(256+C*(C*(74-47*C)-128))/1024;var b=x*x;var k=_*L*(x+_*(T*(2*b-1)-_*x*(4*L*L-3)*(4*b-3)/6)/4);var R=r*z*(I-k);var P=Math.atan2(M*E,w-A*N);var U=Math.atan2(h*E,w*N-A);e._distance=R;e._startHeading=P;e._endHeading=U;e._uSquared=C}function d(r,i,n,o){var s=e.normalize(o.cartographicToCartesian(i,v),h);var c=e.normalize(o.cartographicToCartesian(n,v),v);if(Math.abs(Math.abs(e.angleBetween(s,c))-Math.PI)<.0125){throw new a("geodesic position is not unique")}l(r,o.maximumRadius,o.minimumRadius,i.longitude,i.latitude,n.longitude,n.latitude);r._start=t.clone(i,r._start);r._end=t.clone(n,r._end);r._start.height=0;r._end.height=0;u(r)}var h=new e;var v=new e;function M(e,n,a){var s=r(a,o.WGS84);this._ellipsoid=s;this._start=new t;this._end=new t;this._constants={};this._startHeading=undefined;this._endHeading=undefined;this._distance=undefined;this._uSquared=undefined;if(i(e)&&i(n)){d(this,e,n,s)}}n(M.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){if(!i(this._distance)){throw new a("set end positions before getting surfaceDistance")}return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){if(!i(this._distance)){throw new a("set end positions before getting startHeading")}return this._startHeading}},endHeading:{get:function(){if(!i(this._distance)){throw new a("set end positions before getting endHeading")}return this._endHeading}}});M.prototype.setEndPoints=function(e,t){if(!i(e)){throw new a("start cartographic position is required")}if(!i(t)){throw new a("end cartgraphic position is required")}d(this,e,t,this._ellipsoid)};M.prototype.interpolateUsingFraction=function(e,t){return this.interpolateUsingSurfaceDistance(this._distance*e,t)};M.prototype.interpolateUsingSurfaceDistance=function(e,r){if(!i(this._distance)){throw new a("start and end must be set before calling funciton interpolateUsingSurfaceDistance")}var n=this._constants;var o=n.distanceRatio+e/n.b;var s=Math.cos(2*o);var u=Math.cos(4*o);var c=Math.cos(6*o);var l=Math.sin(2*o);var d=Math.sin(4*o);var h=Math.sin(6*o);var v=Math.sin(8*o);var M=o*o;var p=o*M;var g=n.u8Over256;var w=n.u2Over4;var y=n.u6Over64;var A=n.u4Over16;var m=2*p*g*s/3+o*(1-w+7*A/4-15*y/4+579*g/64-(A-15*y/4+187*g/16)*s-(5*y/4-115*g/16)*u-29*g*c/16)+(w/2-A+71*y/32-85*g/16)*l+(5*A/16-5*y/4+383*g/96)*d-M*((y-11*g/2)*l+5*g*d/2)+(29*y/96-29*g/16)*h+539*g*v/1536;var D=Math.asin(Math.sin(m)*n.cosineAlpha);var N=Math.atan(n.a/n.b*Math.tan(D));m=m-n.sigma;var E=Math.cos(2*n.sigma+m);var I=Math.sin(m);var T=Math.cos(m);var L=n.cosineU*T;var j=n.sineU*I;var x=Math.atan2(I*n.sineHeading,L-j*n.cosineHeading);var S=x-f(n.f,n.sineAlpha,n.cosineSquaredAlpha,m,I,T,E);if(i(r)){r.longitude=this._start.longitude+S;r.latitude=N;r.height=0;return r}return new t(this._start.longitude+S,N,0)};return M})})();(function(){var t=e.amdDefine;t("6b",["32","1a","1c","22"],function(e,t,r,i){"use strict";var n=new e;var a=new e;function o(o,s,u,c,f){if(!t(o)){throw new r("cartesian is required.")}if(!t(s)){throw new r("oneOverRadii is required.")}if(!t(u)){throw new r("oneOverRadiiSquared is required.")}if(!t(c)){throw new r("centerToleranceSquared is required.")}var l=o.x;var d=o.y;var h=o.z;var v=s.x;var M=s.y;var p=s.z;var g=l*l*v*v;var w=d*d*M*M;var y=h*h*p*p;var A=g+w+y;var m=Math.sqrt(1/A);var D=e.multiplyByScalar(o,m,n);if(A<c){return!isFinite(m)?undefined:e.clone(D,f)}var N=u.x;var E=u.y;var I=u.z;var T=a;T.x=D.x*N*2;T.y=D.y*E*2;T.z=D.z*I*2;var L=(1-m)*e.magnitude(o)/(.5*e.magnitude(T));var j=0;var x;var S;var O;var C;var z;var _;var b;var k;var R;var P;var U;do{L-=j;O=1/(1+L*N);C=1/(1+L*E);z=1/(1+L*I);_=O*O;b=C*C;k=z*z;R=_*O;P=b*C;U=k*z;x=g*_+w*b+y*k-1;S=g*R*N+w*P*E+y*U*I;var Q=-2*S;j=x/Q}while(Math.abs(x)>i.EPSILON12);if(!t(f)){return new e(l*O,d*C,h*z)}f.x=l*O;f.y=d*C;f.z=h*z;return f}return o})})();(function(){var t=e.amdDefine;t("42",["32","2b","1a","1c","26","22","6b"],function(e,t,r,i,n,a,o){"use strict";function s(e,r,i){this.longitude=t(e,0);this.latitude=t(r,0);this.height=t(i,0)}s.fromRadians=function(e,n,a,o){if(!r(e)){throw new i("longitude is required.")}if(!r(n)){throw new i("latitude is required.")}a=t(a,0);if(!r(o)){return new s(e,n,a)}o.longitude=e;o.latitude=n;o.height=a;return o};s.fromDegrees=function(e,t,n,o){if(!r(e)){throw new i("longitude is required.")}if(!r(t)){throw new i("latitude is required.")}e=a.toRadians(e);t=a.toRadians(t);return s.fromRadians(e,t,n,o)};var u=new e;var c=new e;var f=new e;var l=new e(1/6378137,1/6378137,1/6356752.314245179);var d=new e(1/(6378137*6378137),1/(6378137*6378137),1/(6356752.314245179*6356752.314245179));var h=a.EPSILON1;s.fromCartesian=function(t,i,n){var v=r(i)?i.oneOverRadii:l;var M=r(i)?i.oneOverRadiiSquared:d;var p=r(i)?i._centerToleranceSquared:h;var g=o(t,v,M,p,c);if(!r(g)){return undefined}var w=e.multiplyComponents(t,M,u);w=e.normalize(w,w);var y=e.subtract(t,g,f);var A=Math.atan2(w.y,w.x);var m=Math.asin(w.z);var D=a.sign(e.dot(y,t))*e.magnitude(y);if(!r(n)){return new s(A,m,D)}n.longitude=A;n.latitude=m;n.height=D;return n};s.clone=function(e,t){if(!r(e)){return undefined}if(!r(t)){return new s(e.longitude,e.latitude,e.height)}t.longitude=e.longitude;t.latitude=e.latitude;t.height=e.height;return t};s.equals=function(e,t){return e===t||r(e)&&r(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height};s.equalsEpsilon=function(e,t,n){if(typeof n!=="number"){throw new i("epsilon is required and must be a number.")}return e===t||r(e)&&r(t)&&Math.abs(e.longitude-t.longitude)<=n&&Math.abs(e.latitude-t.latitude)<=n&&Math.abs(e.height-t.height)<=n};s.ZERO=n(new s(0,0,0));s.prototype.clone=function(e){return s.clone(this,e)};s.prototype.equals=function(e){return s.equals(this,e)};s.prototype.equalsEpsilon=function(e,t){return s.equalsEpsilon(this,e,t)};s.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"};return s})})();(function(){var t=e.amdDefine;t("6d",["1c","6e"],function(e,t){"use strict";var r={};r.computeDiscriminant=function(t,r,i,n){if(typeof t!=="number"){throw new e("a is a required number.")}if(typeof r!=="number"){throw new e("b is a required number.")}if(typeof i!=="number"){throw new e("c is a required number.")}if(typeof n!=="number"){throw new e("d is a required number.")}var a=t*t;var o=r*r;var s=i*i;var u=n*n;var c=18*t*r*i*n+o*s-27*a*u-4*(t*s*i+o*r*n);return c};function i(e,t,r,i){var n=e;var a=t/3;var o=r/3;var s=i;var u=n*o;var c=a*s;var f=a*a;var l=o*o;var d=n*o-f;var h=n*s-a*o;var v=a*s-l;var M=4*d*v-h*h;var p;var g;if(M<0){var w;var y;var A;if(f*c>=u*l){w=n;y=d;A=-2*a*d+n*h}else{w=s;y=v;A=-s*h+2*o*v}var m=A<0?-1:1;var D=-m*Math.abs(w)*Math.sqrt(-M);g=-A+D;var N=g/2;var E=N<0?-Math.pow(-N,1/3):Math.pow(N,1/3);var I=g===D?-E:-y/E;p=y<=0?E+I:-A/(E*E+I*I+y);if(f*c>=u*l){return[(p-a)/n]}return[-s/(p+o)]}var T=d;var L=-2*a*d+n*h;var j=v;var x=-s*h+2*o*v;var S=Math.sqrt(M);var O=Math.sqrt(3)/2;var C=Math.abs(Math.atan2(n*S,-L)/3);p=2*Math.sqrt(-T);var z=Math.cos(C);g=p*z;var _=p*(-z/2-O*Math.sin(C));var b=g+_>2*a?g-a:_-a;var k=n;var R=b/k;C=Math.abs(Math.atan2(s*S,-x)/3);p=2*Math.sqrt(-j);z=Math.cos(C);g=p*z;_=p*(-z/2-O*Math.sin(C));var P=-s;var U=g+_<2*o?g+o:_+o;var Q=P/U;var B=k*U;var q=-b*U-k*P;var Y=b*P;var F=(o*q-a*Y)/(-a*q+o*B);if(R<=F){if(R<=Q){if(F<=Q){return[R,F,Q]}return[R,Q,F]}return[Q,R,F]}if(R<=Q){return[F,R,Q]}if(F<=Q){return[F,Q,R]}return[Q,F,R]}r.computeRealRoots=function(r,n,a,o){if(typeof r!=="number"){throw new e("a is a required number.")}if(typeof n!=="number"){throw new e("b is a required number.")}if(typeof a!=="number"){throw new e("c is a required number.")}if(typeof o!=="number"){throw new e("d is a required number.")}var s;var u;if(r===0){return t.computeRealRoots(n,a,o)}else if(n===0){if(a===0){if(o===0){return[0,0,0]}u=-o/r;var c=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3);return[c,c,c]}else if(o===0){s=t.computeRealRoots(r,0,a);if(s.Length===0){return[0]}return[s[0],0,s[1]]}return i(r,0,a,o)}else if(a===0){if(o===0){u=-n/r;if(u<0){return[u,0,0]}return[0,0,u]}return i(r,n,0,o)}else if(o===0){s=t.computeRealRoots(r,n,a);if(s.length===0){return[0]}else if(s[1]<=0){return[s[0],s[1],0]}else if(s[0]>=0){return[0,s[0],s[1]]}return[s[0],0,s[1]]}return i(r,n,a,o)};return r})})();(function(){var t=e.amdDefine;t("6e",["1c","22"],function(e,t){"use strict";var r={};r.computeDiscriminant=function(t,r,i){if(typeof t!=="number"){throw new e("a is a required number.")}if(typeof r!=="number"){throw new e("b is a required number.")}if(typeof i!=="number"){throw new e("c is a required number.")}var n=r*r-4*t*i;return n};function i(e,r,i){var n=e+r;if(t.sign(e)!==t.sign(r)&&Math.abs(n/Math.max(Math.abs(e),Math.abs(r)))<i){return 0}return n}r.computeRealRoots=function(r,n,a){if(typeof r!=="number"){throw new e("a is a required number.")}if(typeof n!=="number"){throw new e("b is a required number.")}if(typeof a!=="number"){throw new e("c is a required number.")}var o;if(r===0){if(n===0){return[]}return[-a/n]}else if(n===0){if(a===0){return[0,0]}var s=Math.abs(a);var u=Math.abs(r);if(s<u&&s/u<t.EPSILON14){return[0,0]}else if(s>u&&u/s<t.EPSILON14){return[]}o=-a/r;if(o<0){return[]}var c=Math.sqrt(o);return[-c,c]}else if(a===0){o=-n/r;if(o<0){return[o,0]}return[0,o]}var f=n*n;var l=4*r*a;var d=i(f,-l,t.EPSILON14);if(d<0){return[]}var h=-.5*i(n,t.sign(n)*Math.sqrt(d),t.EPSILON14);if(n>0){return[h/r,a/h]}return[a/h,h/r]};return r})})();(function(){var t=e.amdDefine;t("6f",["6d","1c","22","6e"],function(e,t,r,i){"use strict";var n={};n.computeDiscriminant=function(e,r,i,n,a){if(typeof e!=="number"){throw new t("a is a required number.")}if(typeof r!=="number"){throw new t("b is a required number.")}if(typeof i!=="number"){throw new t("c is a required number.")}if(typeof n!=="number"){throw new t("d is a required number.")}if(typeof a!=="number"){throw new t("e is a required number.")}var o=e*e;var s=o*e;var u=r*r;var c=u*r;var f=i*i;var l=f*i;var d=n*n;var h=d*n;var v=a*a;var M=v*a;var p=u*f*d-4*c*h-4*e*l*d+18*e*r*i*h-27*o*d*d+256*s*M+a*(18*c*i*n-4*u*l+16*e*f*f-80*e*r*f*n-6*e*u*d+144*o*i*d)+v*(144*e*u*i-27*u*u-128*o*f-192*o*r*n);return p};function a(t,n,a,o){var s=t*t;var u=n-3*s/8;var c=a-n*t/2+s*t/8;var f=o-a*t/4+n*s/16-3*s*s/256;var l=e.computeRealRoots(1,2*u,u*u-4*f,-c*c);if(l.length>0){var d=-t/4;var h=l[l.length-1];if(Math.abs(h)<r.EPSILON14){var v=i.computeRealRoots(1,u,f);if(v.length===2){var M=v[0];var p=v[1];var g;if(M>=0&&p>=0){var w=Math.sqrt(M);var y=Math.sqrt(p);return[d-y,d-w,d+w,d+y]}else if(M>=0&&p<0){g=Math.sqrt(M);return[d-g,d+g]}else if(M<0&&p>=0){g=Math.sqrt(p);return[d-g,d+g]}}return[]}else if(h>0){var A=Math.sqrt(h);var m=(u+h-c/A)/2;var D=(u+h+c/A)/2;var N=i.computeRealRoots(1,A,m);var E=i.computeRealRoots(1,-A,D);if(N.length!==0){N[0]+=d;N[1]+=d;if(E.length!==0){E[0]+=d;E[1]+=d;if(N[1]<=E[0]){return[N[0],N[1],E[0],E[1]]}else if(E[1]<=N[0]){return[E[0],E[1],N[0],N[1]]}else if(N[0]>=E[0]&&N[1]<=E[1]){return[E[0],N[0],N[1],E[1]]}else if(E[0]>=N[0]&&E[1]<=N[1]){return[N[0],E[0],E[1],N[1]]}else if(N[0]>E[0]&&N[0]<E[1]){return[E[0],N[0],E[1],N[1]]}return[N[0],E[0],N[1],E[1]]}return N}if(E.length!==0){E[0]+=d;E[1]+=d;return E}return[]}}return[]}function o(t,n,a,o){var s=a*a;var u=n*n;var c=t*t;var f=-2*n;var l=a*t+u-4*o;var d=c*o-a*n*t+s;var h=e.computeRealRoots(1,f,l,d);if(h.length>0){var v=h[0];var M=n-v;var p=M*M;var g=t/2;var w=M/2;var y=p-4*o;var A=p+4*Math.abs(o);var m=c-4*v;var D=c+4*Math.abs(v);var N;var E;if(v<0||y*D<m*A){var I=Math.sqrt(m);N=I/2;E=I===0?0:(t*w-a)/I}else{var T=Math.sqrt(y);N=T===0?0:(t*w-a)/T;E=T/2}var L;var j;if(g===0&&N===0){L=0;j=0}else if(r.sign(g)===r.sign(N)){L=g+N;j=v/L}else{j=g-N;L=v/j}var x;var S;if(w===0&&E===0){x=0;S=0}else if(r.sign(w)===r.sign(E)){x=w+E;S=o/x}else{S=w-E;x=o/S}var O=i.computeRealRoots(1,L,x);var C=i.computeRealRoots(1,j,S);if(O.length!==0){if(C.length!==0){if(O[1]<=C[0]){return[O[0],O[1],C[0],C[1]]}else if(C[1]<=O[0]){return[C[0],C[1],O[0],O[1]]}else if(O[0]>=C[0]&&O[1]<=C[1]){return[C[0],O[0],O[1],C[1]]}else if(C[0]>=O[0]&&C[1]<=O[1]){return[O[0],C[0],C[1],O[1]]}else if(O[0]>C[0]&&O[0]<C[1]){return[C[0],O[0],C[1],O[1]]}else{return[O[0],C[0],O[1],C[1]]}}return O}if(C.length!==0){return C}}return[]}n.computeRealRoots=function(i,n,s,u,c){if(typeof i!=="number"){throw new t("a is a required number.")}if(typeof n!=="number"){throw new t("b is a required number.")}if(typeof s!=="number"){throw new t("c is a required number.")}if(typeof u!=="number"){throw new t("d is a required number.")}if(typeof c!=="number"){throw new t("e is a required number.")}if(Math.abs(i)<r.EPSILON15){return e.computeRealRoots(n,s,u,c)}var f=n/i;var l=s/i;var d=u/i;var h=c/i;var v=f<0?1:0;v+=l<0?v+1:v;v+=d<0?v+1:v;v+=h<0?v+1:v;switch(v){case 0:return a(f,l,d,h);case 1:return o(f,l,d,h);case 2:return o(f,l,d,h);case 3:return a(f,l,d,h);case 4:return a(f,l,d,h);case 5:return o(f,l,d,h);case 6:return a(f,l,d,h);case 7:return a(f,l,d,h);case 8:return o(f,l,d,h);case 9:return a(f,l,d,h);case 10:return a(f,l,d,h);case 11:return o(f,l,d,h);case 12:return a(f,l,d,h);case 13:return a(f,l,d,h);case 14:return a(f,l,d,h);case 15:return a(f,l,d,h);default:return undefined}};return n})})();(function(){var t=e.amdDefine;t("70",["32","2b","1a","1c"],function(e,t,r,i){"use strict";function n(r,i){i=e.clone(t(i,e.ZERO));if(!e.equals(i,e.ZERO)){e.normalize(i,i)}this.origin=e.clone(t(r,e.ZERO));this.direction=i}n.getPoint=function(t,n,a){if(!r(t)){throw new i("ray is requred")}if(typeof n!=="number"){throw new i("t is a required number")}if(!r(a)){a=new e}a=e.multiplyByScalar(t.direction,n,a);return e.add(t.origin,a,a)};return n})})();(function(){var t=e.amdDefine;t("71",["32","42","2b","1a","1c","22","38","6e","6f","70"],function(e,t,r,i,n,a,o,s,u,c){"use strict";var f={};f.rayPlane=function(t,r,o){if(!i(t)){throw new n("ray is required.")}if(!i(r)){throw new n("plane is required.")}if(!i(o)){o=new e}var s=t.origin;var u=t.direction;var c=r.normal;var f=e.dot(c,u);if(Math.abs(f)<a.EPSILON15){return undefined}var l=(-r.distance-e.dot(c,s))/f;if(l<0){return undefined}o=e.multiplyByScalar(u,l,o);return e.add(s,o,o)};var l=new e;var d=new e;var h=new e;var v=new e;var M=new e;function p(t,o,s,u,c){if(!i(t)){throw new n("ray is required.")}if(!i(o)){throw new n("p0 is required.")}if(!i(s)){throw new n("p1 is required.")}if(!i(u)){throw new n("p2 is required.")}c=r(c,false);var f=t.origin;var p=t.direction;var g=e.subtract(s,o,l);var w=e.subtract(u,o,d);var y=e.cross(p,w,h);var A=e.dot(g,y);var m;var D;var N;var E;var I;if(c){if(A<a.EPSILON6){return undefined}m=e.subtract(f,o,v);N=e.dot(m,y);if(N<0||N>A){return undefined}D=e.cross(m,g,M);E=e.dot(p,D);if(E<0||N+E>A){return undefined}I=e.dot(w,D)/A}else{if(Math.abs(A)<a.EPSILON6){return undefined}var T=1/A;m=e.subtract(f,o,v);N=e.dot(m,y)*T;if(N<0||N>1){return undefined}D=e.cross(m,g,M);E=e.dot(p,D)*T;if(E<0||N+E>1){return undefined}I=e.dot(w,D)*T}return I}f.rayTriangle=function(t,r,n,a,o,s){var u=p(t,r,n,a,o);if(!i(u)||u<0){return undefined}if(!i(s)){s=new e}e.multiplyByScalar(t.direction,u,s);return e.add(t.origin,s,s)};var g=new c;f.lineSegmentTriangle=function(t,r,a,o,s,u,c){if(!i(t)){throw new n("v0 is required.")}if(!i(r)){throw new n("v1 is required.")}var f=g;e.clone(t,f.origin);e.subtract(r,t,f.direction);e.normalize(f.direction,f.direction);var l=p(f,a,o,s,u);if(!i(l)||l<0||l>e.distance(t,r)){return undefined}if(!i(c)){c=new e}e.multiplyByScalar(f.direction,l,c);return e.add(f.origin,c,c)};function w(e,t,r,i){var n=t*t-4*e*r;if(n<0){return undefined}else if(n>0){var a=1/(2*e);var o=Math.sqrt(n);var s=(-t+o)*a;var u=(-t-o)*a;if(s<u){i.root0=s;i.root1=u}else{i.root0=u;i.root1=s}return i}var c=-t/(2*e);if(c===0){return undefined}i.root0=i.root1=c;return i}var y={root0:0,root1:0};function A(t,r,n){if(!i(n)){n={}}var a=t.origin;var o=t.direction;var s=r.center;var u=r.radius*r.radius;var c=e.subtract(a,s,h);var f=e.dot(o,o);var l=2*e.dot(o,c);var d=e.magnitudeSquared(c)-u;var v=w(f,l,d,y);if(!i(v)){return undefined}n.start=v.root0;n.stop=v.root1;return n}f.raySphere=function(e,t,r){if(!i(e)){throw new n("ray is required.")}if(!i(t)){throw new n("sphere is required.")}r=A(e,t,r);if(!i(r)||r.stop<0){return undefined}r.start=Math.max(r.start,0);return r};var m=new c;f.lineSegmentSphere=function(t,r,a,o){if(!i(t)){throw new n("p0 is required.")}if(!i(r)){throw new n("p1 is required.")}if(!i(a)){throw new n("sphere is required.")}var s=m;e.clone(t,s.origin);var u=e.subtract(r,t,s.direction);var c=e.magnitude(u);e.normalize(u,u);o=A(s,a,o);if(!i(o)||o.stop<0||o.start>c){return undefined}o.start=Math.max(o.start,0);o.stop=Math.min(o.stop,c);return o};var D=new e;var N=new e;f.rayEllipsoid=function(t,r){if(!i(t)){throw new n("ray is required.")}if(!i(r)){throw new n("ellipsoid is required.")}var a=r.oneOverRadii;var o=e.multiplyComponents(a,t.origin,D);var s=e.multiplyComponents(a,t.direction,N);var u=e.magnitudeSquared(o);var c=e.dot(o,s);var f,l,d,h,v;if(u>1){if(c>=0){return undefined}var M=c*c;f=u-1;l=e.magnitudeSquared(s);d=l*f;if(M<d){return undefined}else if(M>d){h=c*c-d;v=-c+Math.sqrt(h);var p=v/l;var g=f/v;if(p<g){return{start:p,stop:g}}return{start:g,stop:p}}else{var w=Math.sqrt(f/l);return{start:w,stop:w}}}else if(u<1){f=u-1;l=e.magnitudeSquared(s);d=l*f;h=c*c-d;v=-c+Math.sqrt(h);return{start:0,stop:v/l}}else{if(c<0){l=e.magnitudeSquared(s);return{start:0,stop:-c/l}}return undefined}};function E(e,t,r){var i=e+t;if(a.sign(e)!==a.sign(t)&&Math.abs(i/Math.max(Math.abs(e),Math.abs(t)))<r){return 0}return i}function I(t,r,i,n,c){var f=n*n;var l=c*c;var d=(t[o.COLUMN1ROW1]-t[o.COLUMN2ROW2])*l;var h=c*(n*E(t[o.COLUMN1ROW0],t[o.COLUMN0ROW1],a.EPSILON15)+r.y);var v=t[o.COLUMN0ROW0]*f+t[o.COLUMN2ROW2]*l+n*r.x+i;var M=l*E(t[o.COLUMN2ROW1],t[o.COLUMN1ROW2],a.EPSILON15);var p=c*(n*E(t[o.COLUMN2ROW0],t[o.COLUMN0ROW2])+r.z);var g;var w=[];if(p===0&&M===0){g=s.computeRealRoots(d,h,v);if(g.length===0){return w}var y=g[0];var A=Math.sqrt(Math.max(1-y*y,0));w.push(new e(n,c*y,c*-A));w.push(new e(n,c*y,c*A));if(g.length===2){var m=g[1];var D=Math.sqrt(Math.max(1-m*m,0));w.push(new e(n,c*m,c*-D));w.push(new e(n,c*m,c*D))}return w}var N=p*p;var I=M*M;var T=d*d;var L=p*M;var j=T+I;var x=2*(h*d+L);var S=2*v*d+h*h-I+N;var O=2*(v*h-L);var C=v*v-N;if(j===0&&x===0&&S===0&&O===0){return w}g=u.computeRealRoots(j,x,S,O,C);var z=g.length;if(z===0){return w}for(var _=0;_<z;++_){var b=g[_];var k=b*b;var R=Math.max(1-k,0);var P=Math.sqrt(R);var U;if(a.sign(d)===a.sign(v)){U=E(d*k+v,h*b,a.EPSILON12)}else if(a.sign(v)===a.sign(h*b)){U=E(d*k,h*b+v,a.EPSILON12)}else{U=E(d*k+h*b,v,a.EPSILON12)}var Q=E(M*b,p,a.EPSILON15);var B=U*Q;if(B<0){w.push(new e(n,c*b,c*P))}else if(B>0){w.push(new e(n,c*b,c*-P))}else if(P!==0){w.push(new e(n,c*b,c*-P));w.push(new e(n,c*b,c*P));++_}else{w.push(new e(n,c*b,c*P))}}return w}var T=new e;var L=new e;var j=new e;var x=new e;var S=new e;var O=new o;var C=new o;var z=new o;var _=new o;var b=new o;var k=new o;var R=new o;var P=new e;var U=new e;var Q=new t;f.grazingAltitudeLocation=function(t,r){if(!i(t)){throw new n("ray is required.")}if(!i(r)){throw new n("ellipsoid is required.")}var s=t.origin;var u=t.direction;var c=r.geodeticSurfaceNormal(s,T);if(e.dot(u,c)>=0){return s}var f=i(this.rayEllipsoid(t,r));var l=r.transformPositionToScaledSpace(u,T);var d=e.normalize(l,l);var h=e.mostOrthogonalAxis(l,x);var v=e.normalize(e.cross(h,d,L),L);var M=e.normalize(e.cross(d,v,j),j);var p=O;p[0]=d.x;p[1]=d.y;p[2]=d.z;p[3]=v.x;p[4]=v.y;p[5]=v.z;p[6]=M.x;p[7]=M.y;p[8]=M.z;var g=o.transpose(p,C);var w=o.fromScale(r.radii,z);var y=o.fromScale(r.oneOverRadii,_);var A=b;A[0]=0;A[1]=-u.z;A[2]=u.y;A[3]=u.z;A[4]=0;A[5]=-u.x;A[6]=-u.y;A[7]=u.x;A[8]=0;var m=o.multiply(o.multiply(g,y,k),A,k);var D=o.multiply(o.multiply(m,w,R),p,R);var N=o.multiplyByVector(m,s,S);var E=I(D,e.negate(N,T),0,0,1);var B;var q;var Y=E.length;if(Y>0){var F=e.clone(e.ZERO,U);var G=Number.NEGATIVE_INFINITY;for(var V=0;V<Y;++V){B=o.multiplyByVector(w,o.multiplyByVector(p,E[V],P),P);var W=e.normalize(e.subtract(B,s,x),x);var H=e.dot(W,u);if(H>G){G=H;F=e.clone(B,F)}}var Z=r.cartesianToCartographic(F,Q);G=a.clamp(G,0,1);q=e.magnitude(e.subtract(F,s,x))*Math.sqrt(1-G*G);q=f?-q:q;Z.height=q;return r.cartographicToCartesian(Z,new e)}return undefined};var B=new e;f.lineSegmentPlane=function(t,r,o,s){if(!i(t)){throw new n("endPoint0 is required.")}if(!i(r)){throw new n("endPoint1 is required.")}if(!i(o)){throw new n("plane is required.")}if(!i(s)){s=new e}var u=e.subtract(r,t,B);var c=o.normal;var f=e.dot(c,u);if(Math.abs(f)<a.EPSILON6){return undefined}var l=e.dot(c,t);var d=-(o.distance+l)/f;if(d<0||d>1){return undefined}e.multiplyByScalar(u,d,s);e.add(t,s,s);return s};f.trianglePlaneIntersection=function(t,r,a,o){if(!i(t)||!i(r)||!i(a)||!i(o)){throw new n("p0, p1, p2, and plane are required.")}var s=o.normal;var u=o.distance;var c=e.dot(s,t)+u<0;var l=e.dot(s,r)+u<0;var d=e.dot(s,a)+u<0;var h=0;h+=c?1:0;h+=l?1:0;h+=d?1:0;var v,M;if(h===1||h===2){v=new e;M=new e}if(h===1){if(c){f.lineSegmentPlane(t,r,o,v);f.lineSegmentPlane(t,a,o,M);return{positions:[t,r,a,v,M],indices:[0,3,4,1,2,4,1,4,3]}}else if(l){f.lineSegmentPlane(r,a,o,v);f.lineSegmentPlane(r,t,o,M);return{positions:[t,r,a,v,M],indices:[1,3,4,2,0,4,2,4,3]}}else if(d){f.lineSegmentPlane(a,t,o,v);f.lineSegmentPlane(a,r,o,M);return{positions:[t,r,a,v,M],indices:[2,3,4,0,1,4,0,4,3]}}}else if(h===2){if(!c){f.lineSegmentPlane(r,t,o,v);f.lineSegmentPlane(a,t,o,M);return{positions:[t,r,a,v,M],indices:[1,2,4,1,4,3,0,3,4]}}else if(!l){f.lineSegmentPlane(a,r,o,v);f.lineSegmentPlane(t,r,o,M);return{positions:[t,r,a,v,M],indices:[2,0,4,2,4,3,1,3,4]}}else if(!d){f.lineSegmentPlane(t,a,o,v);f.lineSegmentPlane(r,a,o,M);return{positions:[t,r,a,v,M],indices:[0,1,4,0,4,3,2,3,4]}}}return undefined};return f})})();(function(){var t=e.amdDefine;t("72",["1a"],function(e){"use strict";var t=Array.isArray;if(!e(t)){t=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}return t})})();(function(){var t=e.amdDefine;t("4a",["2b","1a","1c","26","22"],function(e,t,r,i,n){"use strict";function a(t,r,i,n){this.x=e(t,0);this.y=e(r,0);this.z=e(i,0);this.w=e(n,0)}a.fromElements=function(e,r,i,n,o){if(!t(o)){return new a(e,r,i,n)}o.x=e;o.y=r;o.z=i;o.w=n;return o};a.fromColor=function(e,i){if(!t(e)){throw new r("color is required")}if(!t(i)){return new a(e.red,e.green,e.blue,e.alpha)}i.x=e.red;i.y=e.green;i.z=e.blue;i.w=e.alpha;return i};a.clone=function(e,r){if(!t(e)){return undefined}if(!t(r)){return new a(e.x,e.y,e.z,e.w)}r.x=e.x;r.y=e.y;r.z=e.z;r.w=e.w;return r};a.packedLength=4;a.pack=function(i,n,a){if(!t(i)){throw new r("value is required")}if(!t(n)){throw new r("array is required")}a=e(a,0);n[a++]=i.x;n[a++]=i.y;n[a++]=i.z;n[a]=i.w};a.unpack=function(i,n,o){if(!t(i)){throw new r("array is required")}n=e(n,0);if(!t(o)){o=new a}o.x=i[n++];o.y=i[n++];o.z=i[n++];o.w=i[n];return o};a.packArray=function(e,i){if(!t(e)){throw new r("array is required")}var n=e.length;if(!t(i)){i=new Array(n*4)}else{i.length=n*4}for(var o=0;o<n;++o){a.pack(e[o],i,o*4)}return i};a.unpackArray=function(e,i){if(!t(e)){throw new r("array is required")}var n=e.length;if(!t(i)){i=new Array(n/4)}else{i.length=n/4}for(var o=0;o<n;o+=4){var s=o/4;i[s]=a.unpack(e,o,i[s])}return i};a.fromArray=a.unpack;a.maximumComponent=function(e){if(!t(e)){throw new r("cartesian is required")}return Math.max(e.x,e.y,e.z,e.w)};a.minimumComponent=function(e){if(!t(e)){throw new r("cartesian is required")}return Math.min(e.x,e.y,e.z,e.w)};a.minimumByComponent=function(e,i,n){if(!t(e)){throw new r("first is required.")}if(!t(i)){throw new r("second is required.")}if(!t(n)){throw new r("result is required.")}n.x=Math.min(e.x,i.x);n.y=Math.min(e.y,i.y);n.z=Math.min(e.z,i.z);n.w=Math.min(e.w,i.w);return n};a.maximumByComponent=function(e,i,n){if(!t(e)){throw new r("first is required.")}if(!t(i)){throw new r("second is required.")}if(!t(n)){throw new r("result is required.")}n.x=Math.max(e.x,i.x);n.y=Math.max(e.y,i.y);n.z=Math.max(e.z,i.z);n.w=Math.max(e.w,i.w);return n};a.magnitudeSquared=function(e){if(!t(e)){throw new r("cartesian is required")}return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w};a.magnitude=function(e){return Math.sqrt(a.magnitudeSquared(e))};var o=new a;a.distance=function(e,i){if(!t(e)||!t(i)){throw new r("left and right are required.")}a.subtract(e,i,o);return a.magnitude(o)};a.distanceSquared=function(e,i){if(!t(e)||!t(i)){throw new r("left and right are required.")}a.subtract(e,i,o);return a.magnitudeSquared(o)};a.normalize=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}var n=a.magnitude(e);i.x=e.x/n;i.y=e.y/n;i.z=e.z/n;i.w=e.w/n;return i};a.dot=function(e,i){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}return e.x*i.x+e.y*i.y+e.z*i.z+e.w*i.w};a.multiplyComponents=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x*i.x;n.y=e.y*i.y;n.z=e.z*i.z;n.w=e.w*i.w;return n};a.add=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x+i.x;n.y=e.y+i.y;n.z=e.z+i.z;n.w=e.w+i.w;return n};a.subtract=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x-i.x;n.y=e.y-i.y;n.z=e.z-i.z;n.w=e.w-i.w;return n};a.multiplyByScalar=function(e,i,n){if(!t(e)){throw new r("cartesian is required")}if(typeof i!=="number"){throw new r("scalar is required and must be a number.")}if(!t(n)){throw new r("result is required")}n.x=e.x*i;n.y=e.y*i;n.z=e.z*i;n.w=e.w*i;return n};a.divideByScalar=function(e,i,n){if(!t(e)){throw new r("cartesian is required")}if(typeof i!=="number"){throw new r("scalar is required and must be a number.")}if(!t(n)){throw new r("result is required")}n.x=e.x/i;n.y=e.y/i;n.z=e.z/i;n.w=e.w/i;return n};a.negate=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}i.x=-e.x;i.y=-e.y;i.z=-e.z;i.w=-e.w;return i};a.abs=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}i.x=Math.abs(e.x);i.y=Math.abs(e.y);i.z=Math.abs(e.z);i.w=Math.abs(e.w);return i};var s=new a;a.lerp=function(e,i,n,o){if(!t(e)){throw new r("start is required.")}if(!t(i)){throw new r("end is required.")}if(typeof n!=="number"){throw new r("t is required and must be a number.")}if(!t(o)){throw new r("result is required.")}a.multiplyByScalar(i,n,s);o=a.multiplyByScalar(e,1-n,o);return a.add(s,o,o)};var u=new a;a.mostOrthogonalAxis=function(e,i){if(!t(e)){throw new r("cartesian is required.")}if(!t(i)){throw new r("result is required.")}var n=a.normalize(e,u);a.abs(n,n);if(n.x<=n.y){if(n.x<=n.z){if(n.x<=n.w){i=a.clone(a.UNIT_X,i)}else{i=a.clone(a.UNIT_W,i)}}else if(n.z<=n.w){i=a.clone(a.UNIT_Z,i)}else{i=a.clone(a.UNIT_W,i)}}else if(n.y<=n.z){if(n.y<=n.w){i=a.clone(a.UNIT_Y,i)}else{i=a.clone(a.UNIT_W,i)}}else if(n.z<=n.w){i=a.clone(a.UNIT_Z,i)}else{i=a.clone(a.UNIT_W,i)}return i};a.equals=function(e,r){return e===r||t(e)&&t(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w};a.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]&&e.w===t[r+3]};a.equalsEpsilon=function(e,r,i,a){return e===r||t(e)&&t(r)&&n.equalsEpsilon(e.x,r.x,i,a)&&n.equalsEpsilon(e.y,r.y,i,a)&&n.equalsEpsilon(e.z,r.z,i,a)&&n.equalsEpsilon(e.w,r.w,i,a);
};a.ZERO=i(new a(0,0,0,0));a.UNIT_X=i(new a(1,0,0,0));a.UNIT_Y=i(new a(0,1,0,0));a.UNIT_Z=i(new a(0,0,1,0));a.UNIT_W=i(new a(0,0,0,1));a.prototype.clone=function(e){return a.clone(this,e)};a.prototype.equals=function(e){return a.equals(this,e)};a.prototype.equalsEpsilon=function(e,t,r){return a.equalsEpsilon(this,e,t,r)};a.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};return a})})();(function(){var t=e.amdDefine;t("1b",["1a"],function(e){"use strict";var t=function(){try{return"x"in Object.defineProperty({},"x",{})}catch(e){return false}}();var r=Object.defineProperties;if(!t||!e(r)){r=function(e){return e}}return r})})();(function(){var t=e.amdDefine;t("38",["32","2b","1a","1b","1c","26","22"],function(e,t,r,i,n,a,o){"use strict";function s(e,r,i,n,a,o,s,u,c){this[0]=t(e,0);this[1]=t(n,0);this[2]=t(s,0);this[3]=t(r,0);this[4]=t(a,0);this[5]=t(u,0);this[6]=t(i,0);this[7]=t(o,0);this[8]=t(c,0)}s.packedLength=9;s.pack=function(e,i,a){if(!r(e)){throw new n("value is required")}if(!r(i)){throw new n("array is required")}a=t(a,0);i[a++]=e[0];i[a++]=e[1];i[a++]=e[2];i[a++]=e[3];i[a++]=e[4];i[a++]=e[5];i[a++]=e[6];i[a++]=e[7];i[a++]=e[8]};s.unpack=function(e,i,a){if(!r(e)){throw new n("array is required")}i=t(i,0);if(!r(a)){a=new s}a[0]=e[i++];a[1]=e[i++];a[2]=e[i++];a[3]=e[i++];a[4]=e[i++];a[5]=e[i++];a[6]=e[i++];a[7]=e[i++];a[8]=e[i++];return a};s.clone=function(e,t){if(!r(e)){return undefined}if(!r(t)){return new s(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t};s.fromArray=function(e,i,a){if(!r(e)){throw new n("array is required")}i=t(i,0);if(!r(a)){a=new s}a[0]=e[i];a[1]=e[i+1];a[2]=e[i+2];a[3]=e[i+3];a[4]=e[i+4];a[5]=e[i+5];a[6]=e[i+6];a[7]=e[i+7];a[8]=e[i+8];return a};s.fromColumnMajorArray=function(e,t){if(!r(e)){throw new n("values parameter is required")}return s.clone(e,t)};s.fromRowMajorArray=function(e,t){if(!r(e)){throw new n("values is required.")}if(!r(t)){return new s(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}t[0]=e[0];t[1]=e[3];t[2]=e[6];t[3]=e[1];t[4]=e[4];t[5]=e[7];t[6]=e[2];t[7]=e[5];t[8]=e[8];return t};s.fromQuaternion=function(e,t){if(!r(e)){throw new n("quaternion is required")}var i=e.x*e.x;var a=e.x*e.y;var o=e.x*e.z;var u=e.x*e.w;var c=e.y*e.y;var f=e.y*e.z;var l=e.y*e.w;var d=e.z*e.z;var h=e.z*e.w;var v=e.w*e.w;var M=i-c-d+v;var p=2*(a-h);var g=2*(o+l);var w=2*(a+h);var y=-i+c-d+v;var A=2*(f-u);var m=2*(o-l);var D=2*(f+u);var N=-i-c+d+v;if(!r(t)){return new s(M,p,g,w,y,A,m,D,N)}t[0]=M;t[1]=w;t[2]=m;t[3]=p;t[4]=y;t[5]=D;t[6]=g;t[7]=A;t[8]=N;return t};s.fromScale=function(e,t){if(!r(e)){throw new n("scale is required.")}if(!r(t)){return new s(e.x,0,0,0,e.y,0,0,0,e.z)}t[0]=e.x;t[1]=0;t[2]=0;t[3]=0;t[4]=e.y;t[5]=0;t[6]=0;t[7]=0;t[8]=e.z;return t};s.fromUniformScale=function(e,t){if(typeof e!=="number"){throw new n("scale is required.")}if(!r(t)){return new s(e,0,0,0,e,0,0,0,e)}t[0]=e;t[1]=0;t[2]=0;t[3]=0;t[4]=e;t[5]=0;t[6]=0;t[7]=0;t[8]=e;return t};s.fromCrossProduct=function(e,t){if(!r(e)){throw new n("vector is required.")}if(!r(t)){return new s(0,-e.z,e.y,e.z,0,-e.x,-e.y,e.x,0)}t[0]=0;t[1]=e.z;t[2]=-e.y;t[3]=-e.z;t[4]=0;t[5]=e.x;t[6]=e.y;t[7]=-e.x;t[8]=0;return t};s.fromRotationX=function(e,t){if(!r(e)){throw new n("angle is required.")}var i=Math.cos(e);var a=Math.sin(e);if(!r(t)){return new s(1,0,0,0,i,-a,0,a,i)}t[0]=1;t[1]=0;t[2]=0;t[3]=0;t[4]=i;t[5]=a;t[6]=0;t[7]=-a;t[8]=i;return t};s.fromRotationY=function(e,t){if(!r(e)){throw new n("angle is required.")}var i=Math.cos(e);var a=Math.sin(e);if(!r(t)){return new s(i,0,a,0,1,0,-a,0,i)}t[0]=i;t[1]=0;t[2]=-a;t[3]=0;t[4]=1;t[5]=0;t[6]=a;t[7]=0;t[8]=i;return t};s.fromRotationZ=function(e,t){if(!r(e)){throw new n("angle is required.")}var i=Math.cos(e);var a=Math.sin(e);if(!r(t)){return new s(i,-a,0,a,i,0,0,0,1)}t[0]=i;t[1]=a;t[2]=0;t[3]=-a;t[4]=i;t[5]=0;t[6]=0;t[7]=0;t[8]=1;return t};s.toArray=function(e,t){if(!r(e)){throw new n("matrix is required")}if(!r(t)){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];return t};s.getElementIndex=function(e,t){if(typeof t!=="number"||t<0||t>2){throw new n("row must be 0, 1, or 2.")}if(typeof e!=="number"||e<0||e>2){throw new n("column must be 0, 1, or 2.")}return e*3+t};s.getColumn=function(e,t,i){if(!r(e)){throw new n("matrix is required.")}if(typeof t!=="number"||t<0||t>2){throw new n("index must be 0, 1, or 2.")}if(!r(i)){throw new n("result is required")}var a=t*3;var o=e[a];var s=e[a+1];var u=e[a+2];i.x=o;i.y=s;i.z=u;return i};s.setColumn=function(e,t,i,a){if(!r(e)){throw new n("matrix is required")}if(!r(i)){throw new n("cartesian is required")}if(typeof t!=="number"||t<0||t>2){throw new n("index must be 0, 1, or 2.")}if(!r(a)){throw new n("result is required")}a=s.clone(e,a);var o=t*3;a[o]=i.x;a[o+1]=i.y;a[o+2]=i.z;return a};s.getRow=function(e,t,i){if(!r(e)){throw new n("matrix is required.")}if(typeof t!=="number"||t<0||t>2){throw new n("index must be 0, 1, or 2.")}if(!r(i)){throw new n("result is required")}var a=e[t];var o=e[t+3];var s=e[t+6];i.x=a;i.y=o;i.z=s;return i};s.setRow=function(e,t,i,a){if(!r(e)){throw new n("matrix is required")}if(!r(i)){throw new n("cartesian is required")}if(typeof t!=="number"||t<0||t>2){throw new n("index must be 0, 1, or 2.")}if(!r(a)){throw new n("result is required")}a=s.clone(e,a);a[t]=i.x;a[t+3]=i.y;a[t+6]=i.z;return a};var u=new e;s.getScale=function(t,i){if(!r(t)){throw new n("matrix is required.")}if(!r(i)){throw new n("result is required")}i.x=e.magnitude(e.fromElements(t[0],t[1],t[2],u));i.y=e.magnitude(e.fromElements(t[3],t[4],t[5],u));i.z=e.magnitude(e.fromElements(t[6],t[7],t[8],u));return i};var c=new e;s.getMaximumScale=function(t){s.getScale(t,c);return e.maximumComponent(c)};s.multiply=function(e,t,i){if(!r(e)){throw new n("left is required")}if(!r(t)){throw new n("right is required")}if(!r(i)){throw new n("result is required")}var a=e[0]*t[0]+e[3]*t[1]+e[6]*t[2];var o=e[1]*t[0]+e[4]*t[1]+e[7]*t[2];var s=e[2]*t[0]+e[5]*t[1]+e[8]*t[2];var u=e[0]*t[3]+e[3]*t[4]+e[6]*t[5];var c=e[1]*t[3]+e[4]*t[4]+e[7]*t[5];var f=e[2]*t[3]+e[5]*t[4]+e[8]*t[5];var l=e[0]*t[6]+e[3]*t[7]+e[6]*t[8];var d=e[1]*t[6]+e[4]*t[7]+e[7]*t[8];var h=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];i[0]=a;i[1]=o;i[2]=s;i[3]=u;i[4]=c;i[5]=f;i[6]=l;i[7]=d;i[8]=h;return i};s.add=function(e,t,i){if(!r(e)){throw new n("left is required")}if(!r(t)){throw new n("right is required")}if(!r(i)){throw new n("result is required")}i[0]=e[0]+t[0];i[1]=e[1]+t[1];i[2]=e[2]+t[2];i[3]=e[3]+t[3];i[4]=e[4]+t[4];i[5]=e[5]+t[5];i[6]=e[6]+t[6];i[7]=e[7]+t[7];i[8]=e[8]+t[8];return i};s.subtract=function(e,t,i){if(!r(e)){throw new n("left is required")}if(!r(t)){throw new n("right is required")}if(!r(i)){throw new n("result is required")}i[0]=e[0]-t[0];i[1]=e[1]-t[1];i[2]=e[2]-t[2];i[3]=e[3]-t[3];i[4]=e[4]-t[4];i[5]=e[5]-t[5];i[6]=e[6]-t[6];i[7]=e[7]-t[7];i[8]=e[8]-t[8];return i};s.multiplyByVector=function(e,t,i){if(!r(e)){throw new n("matrix is required")}if(!r(t)){throw new n("cartesian is required")}if(!r(i)){throw new n("result is required")}var a=t.x;var o=t.y;var s=t.z;var u=e[0]*a+e[3]*o+e[6]*s;var c=e[1]*a+e[4]*o+e[7]*s;var f=e[2]*a+e[5]*o+e[8]*s;i.x=u;i.y=c;i.z=f;return i};s.multiplyByScalar=function(e,t,i){if(!r(e)){throw new n("matrix is required")}if(typeof t!=="number"){throw new n("scalar must be a number")}if(!r(i)){throw new n("result is required")}i[0]=e[0]*t;i[1]=e[1]*t;i[2]=e[2]*t;i[3]=e[3]*t;i[4]=e[4]*t;i[5]=e[5]*t;i[6]=e[6]*t;i[7]=e[7]*t;i[8]=e[8]*t;return i};s.multiplyByScale=function(e,t,i){if(!r(e)){throw new n("matrix is required")}if(!r(t)){throw new n("scale is required")}if(!r(i)){throw new n("result is required")}i[0]=e[0]*t.x;i[1]=e[1]*t.x;i[2]=e[2]*t.x;i[3]=e[3]*t.y;i[4]=e[4]*t.y;i[5]=e[5]*t.y;i[6]=e[6]*t.z;i[7]=e[7]*t.z;i[8]=e[8]*t.z;return i};s.negate=function(e,t){if(!r(e)){throw new n("matrix is required")}if(!r(t)){throw new n("result is required")}t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=-e[3];t[4]=-e[4];t[5]=-e[5];t[6]=-e[6];t[7]=-e[7];t[8]=-e[8];return t};s.transpose=function(e,t){if(!r(e)){throw new n("matrix is required")}if(!r(t)){throw new n("result is required")}var i=e[0];var a=e[3];var o=e[6];var s=e[1];var u=e[4];var c=e[7];var f=e[2];var l=e[5];var d=e[8];t[0]=i;t[1]=a;t[2]=o;t[3]=s;t[4]=u;t[5]=c;t[6]=f;t[7]=l;t[8]=d;return t};function f(e){var t=0;for(var r=0;r<9;++r){var i=e[r];t+=i*i}return Math.sqrt(t)}var l=[1,0,0];var d=[2,2,1];function h(e){var t=0;for(var r=0;r<3;++r){var i=e[s.getElementIndex(d[r],l[r])];t+=2*i*i}return Math.sqrt(t)}function v(e,t){var r=o.EPSILON15;var i=0;var n=1;for(var a=0;a<3;++a){var u=Math.abs(e[s.getElementIndex(d[a],l[a])]);if(u>i){n=a;i=u}}var c=1;var f=0;var h=l[n];var v=d[n];if(Math.abs(e[s.getElementIndex(v,h)])>r){var M=e[s.getElementIndex(v,v)];var p=e[s.getElementIndex(h,h)];var g=e[s.getElementIndex(v,h)];var w=(M-p)/2/g;var y;if(w<0){y=-1/(-w+Math.sqrt(1+w*w))}else{y=1/(w+Math.sqrt(1+w*w))}c=1/Math.sqrt(1+y*y);f=y*c}t=s.clone(s.IDENTITY,t);t[s.getElementIndex(h,h)]=t[s.getElementIndex(v,v)]=c;t[s.getElementIndex(v,h)]=f;t[s.getElementIndex(h,v)]=-f;return t}var M=new s;var p=new s;s.computeEigenDecomposition=function(e,t){if(!r(e)){throw new n("matrix is required.")}var i=o.EPSILON20;var a=10;var u=0;var c=0;if(!r(t)){t={}}var l=t.unitary=s.clone(s.IDENTITY,t.unitary);var d=t.diagonal=s.clone(e,t.diagonal);var g=i*f(d);while(c<a&&h(d)>g){v(d,M);s.transpose(M,p);s.multiply(d,M,d);s.multiply(p,d,d);s.multiply(l,M,l);if(++u>2){++c;u=0}}return t};s.abs=function(e,t){if(!r(e)){throw new n("matrix is required")}if(!r(t)){throw new n("result is required")}t[0]=Math.abs(e[0]);t[1]=Math.abs(e[1]);t[2]=Math.abs(e[2]);t[3]=Math.abs(e[3]);t[4]=Math.abs(e[4]);t[5]=Math.abs(e[5]);t[6]=Math.abs(e[6]);t[7]=Math.abs(e[7]);t[8]=Math.abs(e[8]);return t};s.determinant=function(e){if(!r(e)){throw new n("matrix is required")}var t=e[0];var i=e[3];var a=e[6];var o=e[1];var s=e[4];var u=e[7];var c=e[2];var f=e[5];var l=e[8];return t*(s*l-f*u)+o*(f*a-i*l)+c*(i*u-s*a)};s.inverse=function(e,t){if(!r(e)){throw new n("matrix is required")}if(!r(t)){throw new n("result is required")}var i=e[0];var a=e[1];var u=e[2];var c=e[3];var f=e[4];var l=e[5];var d=e[6];var h=e[7];var v=e[8];var M=s.determinant(e);if(Math.abs(M)<=o.EPSILON15){throw new n("matrix is not invertible")}t[0]=f*v-h*l;t[1]=h*u-a*v;t[2]=a*l-f*u;t[3]=d*l-c*v;t[4]=i*v-d*u;t[5]=c*u-i*l;t[6]=c*h-d*f;t[7]=d*a-i*h;t[8]=i*f-c*a;var p=1/M;return s.multiplyByScalar(t,p,t)};s.equals=function(e,t){return e===t||r(e)&&r(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]};s.equalsEpsilon=function(e,t,i){if(typeof i!=="number"){throw new n("epsilon must be a number")}return e===t||r(e)&&r(t)&&Math.abs(e[0]-t[0])<=i&&Math.abs(e[1]-t[1])<=i&&Math.abs(e[2]-t[2])<=i&&Math.abs(e[3]-t[3])<=i&&Math.abs(e[4]-t[4])<=i&&Math.abs(e[5]-t[5])<=i&&Math.abs(e[6]-t[6])<=i&&Math.abs(e[7]-t[7])<=i&&Math.abs(e[8]-t[8])<=i};s.IDENTITY=a(new s(1,0,0,0,1,0,0,0,1));s.ZERO=a(new s(0,0,0,0,0,0,0,0,0));s.COLUMN0ROW0=0;s.COLUMN0ROW1=1;s.COLUMN0ROW2=2;s.COLUMN1ROW0=3;s.COLUMN1ROW1=4;s.COLUMN1ROW2=5;s.COLUMN2ROW0=6;s.COLUMN2ROW1=7;s.COLUMN2ROW2=8;i(s.prototype,{length:{get:function(){return s.packedLength}}});s.prototype.clone=function(e){return s.clone(this,e)};s.prototype.equals=function(e){return s.equals(this,e)};s.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]};s.prototype.equalsEpsilon=function(e,t){return s.equalsEpsilon(this,e,t)};s.prototype.toString=function(){return"("+this[0]+", "+this[3]+", "+this[6]+")\n"+"("+this[1]+", "+this[4]+", "+this[7]+")\n"+"("+this[2]+", "+this[5]+", "+this[8]+")"};return s})})();(function(){var t=e.amdDefine;t("3f",["1a"],function(e){"use strict";function t(e){this.name="RuntimeError";this.message=e;var t;try{throw new Error}catch(e){t=e.stack}this.stack=t}if(e(Object.create)){t.prototype=Object.create(Error.prototype);t.prototype.constructor=t}t.prototype.toString=function(){var t=this.name+": "+this.message;if(e(this.stack)){t+="\n"+this.stack.toString()}return t};return t})})();(function(){var t=e.amdDefine;t("39",["32","4a","2b","1a","1b","1c","26","22","38","3f"],function(e,t,r,i,n,a,o,s,u,c){"use strict";function f(e,t,i,n,a,o,s,u,c,f,l,d,h,v,M,p){this[0]=r(e,0);this[1]=r(a,0);this[2]=r(c,0);this[3]=r(h,0);this[4]=r(t,0);this[5]=r(o,0);this[6]=r(f,0);this[7]=r(v,0);this[8]=r(i,0);this[9]=r(s,0);this[10]=r(l,0);this[11]=r(M,0);this[12]=r(n,0);this[13]=r(u,0);this[14]=r(d,0);this[15]=r(p,0)}f.packedLength=16;f.pack=function(e,t,n){if(!i(e)){throw new a("value is required")}if(!i(t)){throw new a("array is required")}n=r(n,0);t[n++]=e[0];t[n++]=e[1];t[n++]=e[2];t[n++]=e[3];t[n++]=e[4];t[n++]=e[5];t[n++]=e[6];t[n++]=e[7];t[n++]=e[8];t[n++]=e[9];t[n++]=e[10];t[n++]=e[11];t[n++]=e[12];t[n++]=e[13];t[n++]=e[14];t[n]=e[15]};f.unpack=function(e,t,n){if(!i(e)){throw new a("array is required")}t=r(t,0);if(!i(n)){n=new f}n[0]=e[t++];n[1]=e[t++];n[2]=e[t++];n[3]=e[t++];n[4]=e[t++];n[5]=e[t++];n[6]=e[t++];n[7]=e[t++];n[8]=e[t++];n[9]=e[t++];n[10]=e[t++];n[11]=e[t++];n[12]=e[t++];n[13]=e[t++];n[14]=e[t++];n[15]=e[t];return n};f.clone=function(e,t){if(!i(e)){return undefined}if(!i(t)){return new f(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};f.fromArray=f.unpack;f.fromColumnMajorArray=function(e,t){if(!i(e)){throw new a("values is required")}return f.clone(e,t)};f.fromRowMajorArray=function(e,t){if(!i(e)){throw new a("values is required.")}if(!i(t)){return new f(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}t[0]=e[0];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=e[1];t[5]=e[5];t[6]=e[9];t[7]=e[13];t[8]=e[2];t[9]=e[6];t[10]=e[10];t[11]=e[14];t[12]=e[3];t[13]=e[7];t[14]=e[11];t[15]=e[15];return t};f.fromRotationTranslation=function(t,n,o){if(!i(t)){throw new a("rotation is required.")}n=r(n,e.ZERO);if(!i(o)){return new f(t[0],t[3],t[6],n.x,t[1],t[4],t[7],n.y,t[2],t[5],t[8],n.z,0,0,0,1)}o[0]=t[0];o[1]=t[1];o[2]=t[2];o[3]=0;o[4]=t[3];o[5]=t[4];o[6]=t[5];o[7]=0;o[8]=t[6];o[9]=t[7];o[10]=t[8];o[11]=0;o[12]=n.x;o[13]=n.y;o[14]=n.z;o[15]=1;return o};f.fromTranslationQuaternionRotationScale=function(e,t,r,n){if(!i(e)){throw new a("translation is required.")}if(!i(t)){throw new a("rotation is required.")}if(!i(r)){throw new a("scale is required.")}if(!i(n)){n=new f}var o=r.x;var s=r.y;var u=r.z;var c=t.x*t.x;var l=t.x*t.y;var d=t.x*t.z;var h=t.x*t.w;var v=t.y*t.y;var M=t.y*t.z;var p=t.y*t.w;var g=t.z*t.z;var w=t.z*t.w;var y=t.w*t.w;var A=c-v-g+y;var m=2*(l-w);var D=2*(d+p);var N=2*(l+w);var E=-c+v-g+y;var I=2*(M-h);var T=2*(d-p);var L=2*(M+h);var j=-c-v+g+y;n[0]=A*o;n[1]=N*o;n[2]=T*o;n[3]=0;n[4]=m*s;n[5]=E*s;n[6]=L*s;n[7]=0;n[8]=D*u;n[9]=I*u;n[10]=j*u;n[11]=0;n[12]=e.x;n[13]=e.y;n[14]=e.z;n[15]=1;return n};f.fromTranslationRotationScale=function(e,t){if(!i(e)){throw new a("translationRotationScale is required.")}return f.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t)};f.fromTranslation=function(e,t){if(!i(e)){throw new a("translation is required.")}return f.fromRotationTranslation(u.IDENTITY,e,t)};f.fromScale=function(e,t){if(!i(e)){throw new a("scale is required.")}if(!i(t)){return new f(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)}t[0]=e.x;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=e.y;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=e.z;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};f.fromUniformScale=function(e,t){if(typeof e!=="number"){throw new a("scale is required.")}if(!i(t)){return new f(e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1)}t[0]=e;t[1]=0;t[2]=0;t[3]=0;t[4]=0;t[5]=e;t[6]=0;t[7]=0;t[8]=0;t[9]=0;t[10]=e;t[11]=0;t[12]=0;t[13]=0;t[14]=0;t[15]=1;return t};var l=new e;var d=new e;var h=new e;f.fromCamera=function(t,r){if(!i(t)){throw new a("camera is required.")}var n=t.position;var o=t.direction;var s=t.up;if(!i(n)){throw new a("camera.position is required.")}if(!i(o)){throw new a("camera.direction is required.")}if(!i(s)){throw new a("camera.up is required.")}e.normalize(o,l);e.normalize(e.cross(l,s,d),d);e.normalize(e.cross(d,l,h),h);var u=d.x;var c=d.y;var v=d.z;var M=l.x;var p=l.y;var g=l.z;var w=h.x;var y=h.y;var A=h.z;var m=n.x;var D=n.y;var N=n.z;var E=u*-m+c*-D+v*-N;var I=w*-m+y*-D+A*-N;var T=M*m+p*D+g*N;if(!i(r)){return new f(u,c,v,E,w,y,A,I,-M,-p,-g,T,0,0,0,1)}r[0]=u;r[1]=w;r[2]=-M;r[3]=0;r[4]=c;r[5]=y;r[6]=-p;r[7]=0;r[8]=v;r[9]=A;r[10]=-g;r[11]=0;r[12]=E;r[13]=I;r[14]=T;r[15]=1;return r};f.computePerspectiveFieldOfView=function(e,t,r,n,o){if(e<=0||e>Math.PI){throw new a("fovY must be in [0, PI).")}if(t<=0){throw new a("aspectRatio must be greater than zero.")}if(r<=0){throw new a("near must be greater than zero.")}if(n<=0){throw new a("far must be greater than zero.")}if(!i(o)){throw new a("result is required")}var s=Math.tan(e*.5);var u=1/s;var c=u/t;var f=(n+r)/(r-n);var l=2*n*r/(r-n);o[0]=c;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=u;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=f;o[11]=-1;o[12]=0;o[13]=0;o[14]=l;o[15]=0;return o};f.computeOrthographicOffCenter=function(e,t,r,n,o,s,u){if(!i(e)){throw new a("left is required.")}if(!i(t)){throw new a("right is required.")}if(!i(r)){throw new a("bottom is required.")}if(!i(n)){throw new a("top is required.")}if(!i(o)){throw new a("near is required.")}if(!i(s)){throw new a("far is required.")}if(!i(u)){throw new a("result is required")}var c=1/(t-e);var f=1/(n-r);var l=1/(s-o);var d=-(t+e)*c;var h=-(n+r)*f;var v=-(s+o)*l;c*=2;f*=2;l*=-2;u[0]=c;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=f;u[6]=0;u[7]=0;u[8]=0;u[9]=0;u[10]=l;u[11]=0;u[12]=d;u[13]=h;u[14]=v;u[15]=1;return u};f.computePerspectiveOffCenter=function(e,t,r,n,o,s,u){if(!i(e)){throw new a("left is required.")}if(!i(t)){throw new a("right is required.")}if(!i(r)){throw new a("bottom is required.")}if(!i(n)){throw new a("top is required.")}if(!i(o)){throw new a("near is required.")}if(!i(s)){throw new a("far is required.")}if(!i(u)){throw new a("result is required")}var c=2*o/(t-e);var f=2*o/(n-r);var l=(t+e)/(t-e);var d=(n+r)/(n-r);var h=-(s+o)/(s-o);var v=-1;var M=-2*s*o/(s-o);u[0]=c;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=f;u[6]=0;u[7]=0;u[8]=l;u[9]=d;u[10]=h;u[11]=v;u[12]=0;u[13]=0;u[14]=M;u[15]=0;return u};f.computeInfinitePerspectiveOffCenter=function(e,t,r,n,o,s){if(!i(e)){throw new a("left is required.")}if(!i(t)){throw new a("right is required.")}if(!i(r)){throw new a("bottom is required.")}if(!i(n)){throw new a("top is required.")}if(!i(o)){throw new a("near is required.")}if(!i(s)){throw new a("result is required")}var u=2*o/(t-e);var c=2*o/(n-r);var f=(t+e)/(t-e);var l=(n+r)/(n-r);var d=-1;var h=-1;var v=-2*o;s[0]=u;s[1]=0;s[2]=0;s[3]=0;s[4]=0;s[5]=c;s[6]=0;s[7]=0;s[8]=f;s[9]=l;s[10]=d;s[11]=h;s[12]=0;s[13]=0;s[14]=v;s[15]=0;return s};f.computeViewportTransformation=function(e,t,n,o){if(!i(o)){throw new a("result is required")}e=r(e,r.EMPTY_OBJECT);var s=r(e.x,0);var u=r(e.y,0);var c=r(e.width,0);var f=r(e.height,0);t=r(t,0);n=r(n,1);var l=c*.5;var d=f*.5;var h=(n-t)*.5;var v=l;var M=d;var p=h;var g=s+l;var w=u+d;var y=t+h;var A=1;o[0]=v;o[1]=0;o[2]=0;o[3]=0;o[4]=0;o[5]=M;o[6]=0;o[7]=0;o[8]=0;o[9]=0;o[10]=p;o[11]=0;o[12]=g;o[13]=w;o[14]=y;o[15]=A;return o};f.computeView=function(t,r,n,o,s){if(!i(t)){throw new a("position is required")}if(!i(r)){throw new a("direction is required")}if(!i(n)){throw new a("up is required")}if(!i(o)){throw new a("right is required")}if(!i(s)){throw new a("result is required")}s[0]=o.x;s[1]=n.x;s[2]=-r.x;s[3]=0;s[4]=o.y;s[5]=n.y;s[6]=-r.y;s[7]=0;s[8]=o.z;s[9]=n.z;s[10]=-r.z;s[11]=0;s[12]=-e.dot(o,t);s[13]=-e.dot(n,t);s[14]=e.dot(r,t);s[15]=1;return s};f.toArray=function(e,t){if(!i(e)){throw new a("matrix is required")}if(!i(t)){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[3];t[4]=e[4];t[5]=e[5];t[6]=e[6];t[7]=e[7];t[8]=e[8];t[9]=e[9];t[10]=e[10];t[11]=e[11];t[12]=e[12];t[13]=e[13];t[14]=e[14];t[15]=e[15];return t};f.getElementIndex=function(e,t){if(typeof t!=="number"||t<0||t>3){throw new a("row must be 0, 1, 2, or 3.")}if(typeof e!=="number"||e<0||e>3){throw new a("column must be 0, 1, 2, or 3.")}return e*4+t};f.getColumn=function(e,t,r){if(!i(e)){throw new a("matrix is required.")}if(typeof t!=="number"||t<0||t>3){throw new a("index must be 0, 1, 2, or 3.")}if(!i(r)){throw new a("result is required")}var n=t*4;var o=e[n];var s=e[n+1];var u=e[n+2];var c=e[n+3];r.x=o;r.y=s;r.z=u;r.w=c;return r};f.setColumn=function(e,t,r,n){if(!i(e)){throw new a("matrix is required")}if(!i(r)){throw new a("cartesian is required")}if(typeof t!=="number"||t<0||t>3){throw new a("index must be 0, 1, 2, or 3.")}if(!i(n)){throw new a("result is required")}n=f.clone(e,n);var o=t*4;n[o]=r.x;n[o+1]=r.y;n[o+2]=r.z;n[o+3]=r.w;return n};f.setTranslation=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("translation is required")}if(!i(r)){throw new a("result is required")}r[0]=e[0];r[1]=e[1];r[2]=e[2];r[3]=e[3];r[4]=e[4];r[5]=e[5];r[6]=e[6];r[7]=e[7];r[8]=e[8];r[9]=e[9];r[10]=e[10];r[11]=e[11];r[12]=t.x;r[13]=t.y;r[14]=t.z;r[15]=e[15];return r};f.getRow=function(e,t,r){if(!i(e)){throw new a("matrix is required.")}if(typeof t!=="number"||t<0||t>3){throw new a("index must be 0, 1, 2, or 3.")}if(!i(r)){throw new a("result is required")}var n=e[t];var o=e[t+4];var s=e[t+8];var u=e[t+12];r.x=n;r.y=o;r.z=s;r.w=u;return r};f.setRow=function(e,t,r,n){if(!i(e)){throw new a("matrix is required")}if(!i(r)){throw new a("cartesian is required")}if(typeof t!=="number"||t<0||t>3){throw new a("index must be 0, 1, 2, or 3.")}if(!i(n)){throw new a("result is required")}n=f.clone(e,n);n[t]=r.x;n[t+4]=r.y;n[t+8]=r.z;n[t+12]=r.w;return n};var v=new e;f.getScale=function(t,r){if(!i(t)){throw new a("matrix is required.")}if(!i(r)){throw new a("result is required")}r.x=e.magnitude(e.fromElements(t[0],t[1],t[2],v));r.y=e.magnitude(e.fromElements(t[4],t[5],t[6],v));r.z=e.magnitude(e.fromElements(t[8],t[9],t[10],v));return r};var M=new e;f.getMaximumScale=function(t){f.getScale(t,M);return e.maximumComponent(M)};f.multiply=function(e,t,r){if(!i(e)){throw new a("left is required")}if(!i(t)){throw new a("right is required")}if(!i(r)){throw new a("result is required")}var n=e[0];var o=e[1];var s=e[2];var u=e[3];var c=e[4];var f=e[5];var l=e[6];var d=e[7];var h=e[8];var v=e[9];var M=e[10];var p=e[11];var g=e[12];var w=e[13];var y=e[14];var A=e[15];var m=t[0];var D=t[1];var N=t[2];var E=t[3];var I=t[4];var T=t[5];var L=t[6];var j=t[7];var x=t[8];var S=t[9];var O=t[10];var C=t[11];var z=t[12];var _=t[13];var b=t[14];var k=t[15];var R=n*m+c*D+h*N+g*E;var P=o*m+f*D+v*N+w*E;var U=s*m+l*D+M*N+y*E;var Q=u*m+d*D+p*N+A*E;var B=n*I+c*T+h*L+g*j;var q=o*I+f*T+v*L+w*j;var Y=s*I+l*T+M*L+y*j;var F=u*I+d*T+p*L+A*j;var G=n*x+c*S+h*O+g*C;var V=o*x+f*S+v*O+w*C;var W=s*x+l*S+M*O+y*C;var H=u*x+d*S+p*O+A*C;var Z=n*z+c*_+h*b+g*k;var X=o*z+f*_+v*b+w*k;var K=s*z+l*_+M*b+y*k;var J=u*z+d*_+p*b+A*k;r[0]=R;r[1]=P;r[2]=U;r[3]=Q;r[4]=B;r[5]=q;r[6]=Y;r[7]=F;r[8]=G;r[9]=V;r[10]=W;r[11]=H;r[12]=Z;r[13]=X;r[14]=K;r[15]=J;return r};f.add=function(e,t,r){if(!i(e)){throw new a("left is required")}if(!i(t)){throw new a("right is required")}if(!i(r)){throw new a("result is required")}r[0]=e[0]+t[0];r[1]=e[1]+t[1];r[2]=e[2]+t[2];r[3]=e[3]+t[3];r[4]=e[4]+t[4];r[5]=e[5]+t[5];r[6]=e[6]+t[6];r[7]=e[7]+t[7];r[8]=e[8]+t[8];r[9]=e[9]+t[9];r[10]=e[10]+t[10];r[11]=e[11]+t[11];r[12]=e[12]+t[12];r[13]=e[13]+t[13];r[14]=e[14]+t[14];r[15]=e[15]+t[15];return r};f.subtract=function(e,t,r){if(!i(e)){throw new a("left is required")}if(!i(t)){throw new a("right is required")}if(!i(r)){throw new a("result is required")}r[0]=e[0]-t[0];r[1]=e[1]-t[1];r[2]=e[2]-t[2];r[3]=e[3]-t[3];r[4]=e[4]-t[4];r[5]=e[5]-t[5];r[6]=e[6]-t[6];r[7]=e[7]-t[7];r[8]=e[8]-t[8];r[9]=e[9]-t[9];r[10]=e[10]-t[10];r[11]=e[11]-t[11];r[12]=e[12]-t[12];r[13]=e[13]-t[13];r[14]=e[14]-t[14];r[15]=e[15]-t[15];return r};f.multiplyTransformation=function(e,t,r){if(!i(e)){throw new a("left is required")}if(!i(t)){throw new a("right is required")}if(!i(r)){throw new a("result is required")}var n=e[0];var o=e[1];var s=e[2];var u=e[4];var c=e[5];var f=e[6];var l=e[8];var d=e[9];var h=e[10];var v=e[12];var M=e[13];var p=e[14];var g=t[0];var w=t[1];var y=t[2];var A=t[4];var m=t[5];var D=t[6];var N=t[8];var E=t[9];var I=t[10];var T=t[12];var L=t[13];var j=t[14];var x=n*g+u*w+l*y;var S=o*g+c*w+d*y;var O=s*g+f*w+h*y;var C=n*A+u*m+l*D;var z=o*A+c*m+d*D;var _=s*A+f*m+h*D;var b=n*N+u*E+l*I;var k=o*N+c*E+d*I;var R=s*N+f*E+h*I;var P=n*T+u*L+l*j+v;var U=o*T+c*L+d*j+M;var Q=s*T+f*L+h*j+p;r[0]=x;r[1]=S;r[2]=O;r[3]=0;r[4]=C;r[5]=z;r[6]=_;r[7]=0;r[8]=b;r[9]=k;r[10]=R;r[11]=0;r[12]=P;r[13]=U;r[14]=Q;r[15]=1;return r};f.multiplyByMatrix3=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("rotation is required")}if(!i(r)){throw new a("result is required")}var n=e[0];var o=e[1];var s=e[2];var u=e[4];var c=e[5];var f=e[6];var l=e[8];var d=e[9];var h=e[10];var v=t[0];var M=t[1];var p=t[2];var g=t[3];var w=t[4];var y=t[5];var A=t[6];var m=t[7];var D=t[8];var N=n*v+u*M+l*p;var E=o*v+c*M+d*p;var I=s*v+f*M+h*p;var T=n*g+u*w+l*y;var L=o*g+c*w+d*y;var j=s*g+f*w+h*y;var x=n*A+u*m+l*D;var S=o*A+c*m+d*D;var O=s*A+f*m+h*D;r[0]=N;r[1]=E;r[2]=I;r[3]=0;r[4]=T;r[5]=L;r[6]=j;r[7]=0;r[8]=x;r[9]=S;r[10]=O;r[11]=0;r[12]=e[12];r[13]=e[13];r[14]=e[14];r[15]=e[15];return r};f.multiplyByTranslation=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("translation is required")}if(!i(r)){throw new a("result is required")}var n=t.x;var o=t.y;var s=t.z;var u=n*e[0]+o*e[4]+s*e[8]+e[12];var c=n*e[1]+o*e[5]+s*e[9]+e[13];var f=n*e[2]+o*e[6]+s*e[10]+e[14];r[0]=e[0];r[1]=e[1];r[2]=e[2];r[3]=e[3];r[4]=e[4];r[5]=e[5];r[6]=e[6];r[7]=e[7];r[8]=e[8];r[9]=e[9];r[10]=e[10];r[11]=e[11];r[12]=u;r[13]=c;r[14]=f;r[15]=e[15];return r};var p=new e;f.multiplyByUniformScale=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(typeof t!=="number"){throw new a("scale is required")}if(!i(r)){throw new a("result is required")}p.x=t;p.y=t;p.z=t;return f.multiplyByScale(e,p,r)};f.multiplyByScale=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("scale is required")}if(!i(r)){throw new a("result is required")}var n=t.x;var o=t.y;var s=t.z;if(n===1&&o===1&&s===1){return f.clone(e,r)}r[0]=n*e[0];r[1]=n*e[1];r[2]=n*e[2];r[3]=0;r[4]=o*e[4];r[5]=o*e[5];r[6]=o*e[6];r[7]=0;r[8]=s*e[8];r[9]=s*e[9];r[10]=s*e[10];r[11]=0;r[12]=e[12];r[13]=e[13];r[14]=e[14];r[15]=1;return r};f.multiplyByVector=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("cartesian is required")}if(!i(r)){throw new a("result is required")}var n=t.x;var o=t.y;var s=t.z;var u=t.w;var c=e[0]*n+e[4]*o+e[8]*s+e[12]*u;var f=e[1]*n+e[5]*o+e[9]*s+e[13]*u;var l=e[2]*n+e[6]*o+e[10]*s+e[14]*u;var d=e[3]*n+e[7]*o+e[11]*s+e[15]*u;r.x=c;r.y=f;r.z=l;r.w=d;return r};f.multiplyByPointAsVector=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("cartesian is required")}if(!i(r)){throw new a("result is required")}var n=t.x;var o=t.y;var s=t.z;var u=e[0]*n+e[4]*o+e[8]*s;var c=e[1]*n+e[5]*o+e[9]*s;var f=e[2]*n+e[6]*o+e[10]*s;r.x=u;r.y=c;r.z=f;return r};f.multiplyByPoint=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("cartesian is required")}if(!i(r)){throw new a("result is required")}var n=t.x;var o=t.y;var s=t.z;var u=e[0]*n+e[4]*o+e[8]*s+e[12];var c=e[1]*n+e[5]*o+e[9]*s+e[13];var f=e[2]*n+e[6]*o+e[10]*s+e[14];r.x=u;r.y=c;r.z=f;return r};f.multiplyByScalar=function(e,t,r){if(!i(e)){throw new a("matrix is required")}if(typeof t!=="number"){throw new a("scalar must be a number")}if(!i(r)){throw new a("result is required")}r[0]=e[0]*t;r[1]=e[1]*t;r[2]=e[2]*t;r[3]=e[3]*t;r[4]=e[4]*t;r[5]=e[5]*t;r[6]=e[6]*t;r[7]=e[7]*t;r[8]=e[8]*t;r[9]=e[9]*t;r[10]=e[10]*t;r[11]=e[11]*t;r[12]=e[12]*t;r[13]=e[13]*t;r[14]=e[14]*t;r[15]=e[15]*t;return r};f.negate=function(e,t){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("result is required")}t[0]=-e[0];t[1]=-e[1];t[2]=-e[2];t[3]=-e[3];t[4]=-e[4];t[5]=-e[5];t[6]=-e[6];t[7]=-e[7];t[8]=-e[8];t[9]=-e[9];t[10]=-e[10];t[11]=-e[11];t[12]=-e[12];t[13]=-e[13];t[14]=-e[14];t[15]=-e[15];return t};f.transpose=function(e,t){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("result is required")}var r=e[1];var n=e[2];var o=e[3];var s=e[6];var u=e[7];var c=e[11];t[0]=e[0];t[1]=e[4];t[2]=e[8];t[3]=e[12];t[4]=r;t[5]=e[5];t[6]=e[9];t[7]=e[13];t[8]=n;t[9]=s;t[10]=e[10];t[11]=e[14];t[12]=o;t[13]=u;t[14]=c;t[15]=e[15];return t};f.abs=function(e,t){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("result is required")}t[0]=Math.abs(e[0]);t[1]=Math.abs(e[1]);t[2]=Math.abs(e[2]);t[3]=Math.abs(e[3]);t[4]=Math.abs(e[4]);t[5]=Math.abs(e[5]);t[6]=Math.abs(e[6]);t[7]=Math.abs(e[7]);t[8]=Math.abs(e[8]);t[9]=Math.abs(e[9]);t[10]=Math.abs(e[10]);t[11]=Math.abs(e[11]);t[12]=Math.abs(e[12]);t[13]=Math.abs(e[13]);t[14]=Math.abs(e[14]);t[15]=Math.abs(e[15]);return t};f.equals=function(e,t){return e===t||i(e)&&i(t)&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[3]===t[3]&&e[7]===t[7]&&e[11]===t[11]&&e[15]===t[15]};f.equalsEpsilon=function(e,t,r){if(typeof r!=="number"){throw new a("epsilon must be a number")}return e===t||i(e)&&i(t)&&Math.abs(e[0]-t[0])<=r&&Math.abs(e[1]-t[1])<=r&&Math.abs(e[2]-t[2])<=r&&Math.abs(e[3]-t[3])<=r&&Math.abs(e[4]-t[4])<=r&&Math.abs(e[5]-t[5])<=r&&Math.abs(e[6]-t[6])<=r&&Math.abs(e[7]-t[7])<=r&&Math.abs(e[8]-t[8])<=r&&Math.abs(e[9]-t[9])<=r&&Math.abs(e[10]-t[10])<=r&&Math.abs(e[11]-t[11])<=r&&Math.abs(e[12]-t[12])<=r&&Math.abs(e[13]-t[13])<=r&&Math.abs(e[14]-t[14])<=r&&Math.abs(e[15]-t[15])<=r};f.getTranslation=function(e,t){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("result is required")}t.x=e[12];t.y=e[13];t.z=e[14];return t};f.getRotation=function(e,t){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("result is required")}t[0]=e[0];t[1]=e[1];t[2]=e[2];t[3]=e[4];t[4]=e[5];t[5]=e[6];t[6]=e[8];t[7]=e[9];t[8]=e[10];return t};var g=new u;var w=new u;var y=new t;var A=new t(0,0,0,1);f.inverse=function(e,r){if(!i(e)){throw new a("matrix is required")}if(!i(r)){throw new a("result is required")}if(u.equalsEpsilon(f.getRotation(e,g),w,s.EPSILON7)&&t.equals(f.getRow(e,3,y),A)){r[0]=0;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=0;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=0;r[11]=0;r[12]=-e[12];r[13]=-e[13];r[14]=-e[14];r[15]=1;return r}var n=e[0];var o=e[4];var l=e[8];var d=e[12];var h=e[1];var v=e[5];var M=e[9];var p=e[13];var m=e[2];var D=e[6];var N=e[10];var E=e[14];var I=e[3];var T=e[7];var L=e[11];var j=e[15];var x=N*j;var S=E*L;var O=D*j;var C=E*T;var z=D*L;var _=N*T;var b=m*j;var k=E*I;var R=m*L;var P=N*I;var U=m*T;var Q=D*I;var B=x*v+C*M+z*p-(S*v+O*M+_*p);var q=S*h+b*M+P*p-(x*h+k*M+R*p);var Y=O*h+k*v+U*p-(C*h+b*v+Q*p);var F=_*h+R*v+Q*M-(z*h+P*v+U*M);var G=S*o+O*l+_*d-(x*o+C*l+z*d);var V=x*n+k*l+R*d-(S*n+b*l+P*d);var W=C*n+b*o+Q*d-(O*n+k*o+U*d);var H=z*n+P*o+U*l-(_*n+R*o+Q*l);x=l*p;S=d*M;O=o*p;C=d*v;z=o*M;_=l*v;b=n*p;k=d*h;R=n*M;P=l*h;U=n*v;Q=o*h;var Z=x*T+C*L+z*j-(S*T+O*L+_*j);var X=S*I+b*L+P*j-(x*I+k*L+R*j);var K=O*I+k*T+U*j-(C*I+b*T+Q*j);var J=_*I+R*T+Q*L-(z*I+P*T+U*L);var $=O*N+_*E+S*D-(z*E+x*D+C*N);var ee=R*E+x*m+k*N-(b*N+P*E+S*m);var te=b*D+Q*E+C*m-(U*E+O*m+k*D);var re=U*N+z*m+P*D-(R*D+Q*N+_*m);var ie=n*B+o*q+l*Y+d*F;if(Math.abs(ie)<s.EPSILON20){throw new c("matrix is not invertible because its determinate is zero.");
}ie=1/ie;r[0]=B*ie;r[1]=q*ie;r[2]=Y*ie;r[3]=F*ie;r[4]=G*ie;r[5]=V*ie;r[6]=W*ie;r[7]=H*ie;r[8]=Z*ie;r[9]=X*ie;r[10]=K*ie;r[11]=J*ie;r[12]=$*ie;r[13]=ee*ie;r[14]=te*ie;r[15]=re*ie;return r};f.inverseTransformation=function(e,t){if(!i(e)){throw new a("matrix is required")}if(!i(t)){throw new a("result is required")}var r=e[0];var n=e[1];var o=e[2];var s=e[4];var u=e[5];var c=e[6];var f=e[8];var l=e[9];var d=e[10];var h=e[12];var v=e[13];var M=e[14];var p=-r*h-n*v-o*M;var g=-s*h-u*v-c*M;var w=-f*h-l*v-d*M;t[0]=r;t[1]=s;t[2]=f;t[3]=0;t[4]=n;t[5]=u;t[6]=l;t[7]=0;t[8]=o;t[9]=c;t[10]=d;t[11]=0;t[12]=p;t[13]=g;t[14]=w;t[15]=1;return t};f.IDENTITY=o(new f(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1));f.ZERO=o(new f(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0));f.COLUMN0ROW0=0;f.COLUMN0ROW1=1;f.COLUMN0ROW2=2;f.COLUMN0ROW3=3;f.COLUMN1ROW0=4;f.COLUMN1ROW1=5;f.COLUMN1ROW2=6;f.COLUMN1ROW3=7;f.COLUMN2ROW0=8;f.COLUMN2ROW1=9;f.COLUMN2ROW2=10;f.COLUMN2ROW3=11;f.COLUMN3ROW0=12;f.COLUMN3ROW1=13;f.COLUMN3ROW2=14;f.COLUMN3ROW3=15;n(f.prototype,{length:{get:function(){return f.packedLength}}});f.prototype.clone=function(e){return f.clone(this,e)};f.prototype.equals=function(e){return f.equals(this,e)};f.equalsArray=function(e,t,r){return e[0]===t[r]&&e[1]===t[r+1]&&e[2]===t[r+2]&&e[3]===t[r+3]&&e[4]===t[r+4]&&e[5]===t[r+5]&&e[6]===t[r+6]&&e[7]===t[r+7]&&e[8]===t[r+8]&&e[9]===t[r+9]&&e[10]===t[r+10]&&e[11]===t[r+11]&&e[12]===t[r+12]&&e[13]===t[r+13]&&e[14]===t[r+14]&&e[15]===t[r+15]};f.prototype.equalsEpsilon=function(e,t){return f.equalsEpsilon(this,e,t)};f.prototype.toString=function(){return"("+this[0]+", "+this[4]+", "+this[8]+", "+this[12]+")\n"+"("+this[1]+", "+this[5]+", "+this[9]+", "+this[13]+")\n"+"("+this[2]+", "+this[6]+", "+this[10]+", "+this[14]+")\n"+"("+this[3]+", "+this[7]+", "+this[11]+", "+this[15]+")"};return f})})();(function(){var t=e.amdDefine;t("73",[],function(){var e=function(e){if(e==undefined){e=(new Date).getTime()}this.N=624;this.M=397;this.MATRIX_A=2567483615;this.UPPER_MASK=2147483648;this.LOWER_MASK=2147483647;this.mt=new Array(this.N);this.mti=this.N+1;this.init_genrand(e)};e.prototype.init_genrand=function(e){this.mt[0]=e>>>0;for(this.mti=1;this.mti<this.N;this.mti++){var e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(((e&4294901760)>>>16)*1812433253<<16)+(e&65535)*1812433253+this.mti;this.mt[this.mti]>>>=0}};e.prototype.genrand_int32=function(){var e;var t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var r;if(this.mti==this.N+1)this.init_genrand(5489);for(r=0;r<this.N-this.M;r++){e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK;this.mt[r]=this.mt[r+this.M]^e>>>1^t[e&1]}for(;r<this.N-1;r++){e=this.mt[r]&this.UPPER_MASK|this.mt[r+1]&this.LOWER_MASK;this.mt[r]=this.mt[r+(this.M-this.N)]^e>>>1^t[e&1]}e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[e&1];this.mti=0}e=this.mt[this.mti++];e^=e>>>11;e^=e<<7&2636928640;e^=e<<15&4022730752;e^=e>>>18;return e>>>0};e.prototype.random=function(){return this.genrand_int32()*(1/4294967296)};return e})})();(function(){var t=e.amdDefine;t("2b",["26"],function(e){"use strict";function t(e,t){if(e!==undefined){return e}return t}t.EMPTY_OBJECT=e({});return t})})();(function(){var t=e.amdDefine;t("22",["73","2b","1a","1c"],function(e,t,r,i){"use strict";var n={};n.EPSILON1=.1;n.EPSILON2=.01;n.EPSILON3=.001;n.EPSILON4=1e-4;n.EPSILON5=1e-5;n.EPSILON6=1e-6;n.EPSILON7=1e-7;n.EPSILON8=1e-8;n.EPSILON9=1e-9;n.EPSILON10=1e-10;n.EPSILON11=1e-11;n.EPSILON12=1e-12;n.EPSILON13=1e-13;n.EPSILON14=1e-14;n.EPSILON15=1e-15;n.EPSILON16=1e-16;n.EPSILON17=1e-17;n.EPSILON18=1e-18;n.EPSILON19=1e-19;n.EPSILON20=1e-20;n.GRAVITATIONALPARAMETER=3986004418e5;n.SOLAR_RADIUS=6955e5;n.LUNAR_RADIUS=1737400;n.SIXTY_FOUR_KILOBYTES=64*1024;n.sign=function(e){if(e>0){return 1}if(e<0){return-1}return 0};n.signNotZero=function(e){return e<0?-1:1};n.toSNorm=function(e){return Math.round((n.clamp(e,-1,1)*.5+.5)*255)};n.fromSNorm=function(e){return n.clamp(e,0,255)/255*2-1};n.sinh=function(e){var t=Math.pow(Math.E,e);var r=Math.pow(Math.E,-1*e);return(t-r)*.5};n.cosh=function(e){var t=Math.pow(Math.E,e);var r=Math.pow(Math.E,-1*e);return(t+r)*.5};n.lerp=function(e,t,r){return(1-r)*e+r*t};n.PI=Math.PI;n.ONE_OVER_PI=1/Math.PI;n.PI_OVER_TWO=Math.PI*.5;n.PI_OVER_THREE=Math.PI/3;n.PI_OVER_FOUR=Math.PI/4;n.PI_OVER_SIX=Math.PI/6;n.THREE_PI_OVER_TWO=3*Math.PI*.5;n.TWO_PI=2*Math.PI;n.ONE_OVER_TWO_PI=1/(2*Math.PI);n.RADIANS_PER_DEGREE=Math.PI/180;n.DEGREES_PER_RADIAN=180/Math.PI;n.RADIANS_PER_ARCSECOND=n.RADIANS_PER_DEGREE/3600;n.toRadians=function(e){if(!r(e)){throw new i("degrees is required.")}return e*n.RADIANS_PER_DEGREE};n.toDegrees=function(e){if(!r(e)){throw new i("radians is required.")}return e*n.DEGREES_PER_RADIAN};n.convertLongitudeRange=function(e){if(!r(e)){throw new i("angle is required.")}var t=n.TWO_PI;var a=e-Math.floor(e/t)*t;if(a<-Math.PI){return a+t}if(a>=Math.PI){return a-t}return a};n.negativePiToPi=function(e){if(!r(e)){throw new i("x is required.")}return n.zeroToTwoPi(e+n.PI)-n.PI};n.zeroToTwoPi=function(e){if(!r(e)){throw new i("x is required.")}var t=n.mod(e,n.TWO_PI);if(Math.abs(t)<n.EPSILON14&&Math.abs(e)>n.EPSILON14){return n.TWO_PI}return t};n.mod=function(e,t){if(!r(e)){throw new i("m is required.")}if(!r(t)){throw new i("n is required.")}return(e%t+t)%t};n.equalsEpsilon=function(e,n,a,o){if(!r(e)){throw new i("left is required.")}if(!r(n)){throw new i("right is required.")}if(!r(a)){throw new i("relativeEpsilon is required.")}o=t(o,a);var s=Math.abs(e-n);return s<=o||s<=a*Math.max(Math.abs(e),Math.abs(n))};var a=[1];n.factorial=function(e){if(typeof e!=="number"||e<0){throw new i("A number greater than or equal to 0 is required.")}var t=a.length;if(e>=t){var r=a[t-1];for(var n=t;n<=e;n++){a.push(r*n)}}return a[e]};n.incrementWrap=function(e,n,a){a=t(a,0);if(!r(e)){throw new i("n is required.")}if(n<=a){throw new i("maximumValue must be greater than minimumValue.")}++e;if(e>n){e=a}return e};n.isPowerOfTwo=function(e){if(typeof e!=="number"||e<0){throw new i("A number greater than or equal to 0 is required.")}return e!==0&&(e&e-1)===0};n.nextPowerOfTwo=function(e){if(typeof e!=="number"||e<0){throw new i("A number greater than or equal to 0 is required.")}--e;e|=e>>1;e|=e>>2;e|=e>>4;e|=e>>8;e|=e>>16;++e;return e};n.clamp=function(e,t,n){if(!r(e)){throw new i("value is required")}if(!r(t)){throw new i("min is required.")}if(!r(n)){throw new i("max is required.")}return e<t?t:e>n?n:e};var o=new e;n.setRandomNumberSeed=function(t){if(!r(t)){throw new i("seed is required.")}o=new e(t)};n.nextRandomNumber=function(){return o.random()};n.acosClamped=function(e){if(!r(e)){throw new i("value is required.")}return Math.acos(n.clamp(e,-1,1))};n.asinClamped=function(e){if(!r(e)){throw new i("value is required.")}return Math.asin(n.clamp(e,-1,1))};n.chordLength=function(e,t){if(!r(e)){throw new i("angle is required.")}if(!r(t)){throw new i("radius is required.")}return 2*t*Math.sin(e*.5)};n.logBase=function(e,t){if(!r(e)){throw new i("number is required.")}if(!r(t)){throw new i("base is required.")}return Math.log(e)/Math.log(t)};n.fog=function(e,t){var r=e*t;return 1-Math.exp(-(r*r))};return n})})();(function(){var t=e.amdDefine;t("32",["2b","1a","1c","26","22"],function(e,t,r,i,n){"use strict";function a(t,r,i){this.x=e(t,0);this.y=e(r,0);this.z=e(i,0)}a.fromSpherical=function(i,n){if(!t(i)){throw new r("spherical is required")}if(!t(n)){n=new a}var o=i.clock;var s=i.cone;var u=e(i.magnitude,1);var c=u*Math.sin(s);n.x=c*Math.cos(o);n.y=c*Math.sin(o);n.z=u*Math.cos(s);return n};a.fromElements=function(e,r,i,n){if(!t(n)){return new a(e,r,i)}n.x=e;n.y=r;n.z=i;return n};a.clone=function(e,r){if(!t(e)){return undefined}if(!t(r)){return new a(e.x,e.y,e.z)}r.x=e.x;r.y=e.y;r.z=e.z;return r};a.fromCartesian4=a.clone;a.packedLength=3;a.pack=function(i,n,a){if(!t(i)){throw new r("value is required")}if(!t(n)){throw new r("array is required")}a=e(a,0);n[a++]=i.x;n[a++]=i.y;n[a]=i.z};a.unpack=function(i,n,o){if(!t(i)){throw new r("array is required")}n=e(n,0);if(!t(o)){o=new a}o.x=i[n++];o.y=i[n++];o.z=i[n];return o};a.packArray=function(e,i){if(!t(e)){throw new r("array is required")}var n=e.length;if(!t(i)){i=new Array(n*3)}else{i.length=n*3}for(var o=0;o<n;++o){a.pack(e[o],i,o*3)}return i};a.unpackArray=function(e,i){if(!t(e)){throw new r("array is required")}var n=e.length;if(!t(i)){i=new Array(n/3)}else{i.length=n/3}for(var o=0;o<n;o+=3){var s=o/3;i[s]=a.unpack(e,o,i[s])}return i};a.fromArray=a.unpack;a.maximumComponent=function(e){if(!t(e)){throw new r("cartesian is required")}return Math.max(e.x,e.y,e.z)};a.minimumComponent=function(e){if(!t(e)){throw new r("cartesian is required")}return Math.min(e.x,e.y,e.z)};a.minimumByComponent=function(e,i,n){if(!t(e)){throw new r("first is required.")}if(!t(i)){throw new r("second is required.")}if(!t(n)){throw new r("result is required.")}n.x=Math.min(e.x,i.x);n.y=Math.min(e.y,i.y);n.z=Math.min(e.z,i.z);return n};a.maximumByComponent=function(e,i,n){if(!t(e)){throw new r("first is required.")}if(!t(i)){throw new r("second is required.")}if(!t(n)){throw new r("result is required.")}n.x=Math.max(e.x,i.x);n.y=Math.max(e.y,i.y);n.z=Math.max(e.z,i.z);return n};a.magnitudeSquared=function(e){if(!t(e)){throw new r("cartesian is required")}return e.x*e.x+e.y*e.y+e.z*e.z};a.magnitude=function(e){return Math.sqrt(a.magnitudeSquared(e))};var o=new a;a.distance=function(e,i){if(!t(e)||!t(i)){throw new r("left and right are required.")}a.subtract(e,i,o);return a.magnitude(o)};a.distanceSquared=function(e,i){if(!t(e)||!t(i)){throw new r("left and right are required.")}a.subtract(e,i,o);return a.magnitudeSquared(o)};a.normalize=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}var n=a.magnitude(e);i.x=e.x/n;i.y=e.y/n;i.z=e.z/n;return i};a.dot=function(e,i){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}return e.x*i.x+e.y*i.y+e.z*i.z};a.multiplyComponents=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x*i.x;n.y=e.y*i.y;n.z=e.z*i.z;return n};a.add=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x+i.x;n.y=e.y+i.y;n.z=e.z+i.z;return n};a.subtract=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}n.x=e.x-i.x;n.y=e.y-i.y;n.z=e.z-i.z;return n};a.multiplyByScalar=function(e,i,n){if(!t(e)){throw new r("cartesian is required")}if(typeof i!=="number"){throw new r("scalar is required and must be a number.")}if(!t(n)){throw new r("result is required")}n.x=e.x*i;n.y=e.y*i;n.z=e.z*i;return n};a.divideByScalar=function(e,i,n){if(!t(e)){throw new r("cartesian is required")}if(typeof i!=="number"){throw new r("scalar is required and must be a number.")}if(!t(n)){throw new r("result is required")}n.x=e.x/i;n.y=e.y/i;n.z=e.z/i;return n};a.negate=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}i.x=-e.x;i.y=-e.y;i.z=-e.z;return i};a.abs=function(e,i){if(!t(e)){throw new r("cartesian is required")}if(!t(i)){throw new r("result is required")}i.x=Math.abs(e.x);i.y=Math.abs(e.y);i.z=Math.abs(e.z);return i};var s=new a;a.lerp=function(e,i,n,o){if(!t(e)){throw new r("start is required.")}if(!t(i)){throw new r("end is required.")}if(typeof n!=="number"){throw new r("t is required and must be a number.")}if(!t(o)){throw new r("result is required.")}a.multiplyByScalar(i,n,s);o=a.multiplyByScalar(e,1-n,o);return a.add(s,o,o)};var u=new a;var c=new a;a.angleBetween=function(e,i){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}a.normalize(e,u);a.normalize(i,c);var n=a.dot(u,c);var o=a.magnitude(a.cross(u,c,u));return Math.atan2(o,n)};var f=new a;a.mostOrthogonalAxis=function(e,i){if(!t(e)){throw new r("cartesian is required.")}if(!t(i)){throw new r("result is required.")}var n=a.normalize(e,f);a.abs(n,n);if(n.x<=n.y){if(n.x<=n.z){i=a.clone(a.UNIT_X,i)}else{i=a.clone(a.UNIT_Z,i)}}else{if(n.y<=n.z){i=a.clone(a.UNIT_Y,i)}else{i=a.clone(a.UNIT_Z,i)}}return i};a.equals=function(e,r){return e===r||t(e)&&t(r)&&e.x===r.x&&e.y===r.y&&e.z===r.z};a.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]&&e.z===t[r+2]};a.equalsEpsilon=function(e,r,i,a){return e===r||t(e)&&t(r)&&n.equalsEpsilon(e.x,r.x,i,a)&&n.equalsEpsilon(e.y,r.y,i,a)&&n.equalsEpsilon(e.z,r.z,i,a)};a.cross=function(e,i,n){if(!t(e)){throw new r("left is required")}if(!t(i)){throw new r("right is required")}if(!t(n)){throw new r("result is required")}var a=e.x;var o=e.y;var s=e.z;var u=i.x;var c=i.y;var f=i.z;var l=o*f-s*c;var d=s*u-a*f;var h=a*c-o*u;n.x=l;n.y=d;n.z=h;return n};a.fromDegrees=function(e,i,o,s,u){if(!t(e)){throw new r("longitude is required")}if(!t(i)){throw new r("latitude is required")}var c=n.toRadians(e);var f=n.toRadians(i);return a.fromRadians(c,f,o,s,u)};var l=new a;var d=new a;var h=new a(6378137*6378137,6378137*6378137,6356752.314245179*6356752.314245179);a.fromRadians=function(i,n,o,s,u){if(!t(i)){throw new r("longitude is required")}if(!t(n)){throw new r("latitude is required")}o=e(o,0);var c=t(s)?s.radiiSquared:h;var f=Math.cos(n);l.x=f*Math.cos(i);l.y=f*Math.sin(i);l.z=Math.sin(n);l=a.normalize(l,l);a.multiplyComponents(c,l,d);var v=Math.sqrt(a.dot(l,d));d=a.divideByScalar(d,v,d);l=a.multiplyByScalar(l,o,l);if(!t(u)){u=new a}return a.add(d,l,u)};a.fromDegreesArray=function(e,i,o){if(!t(e)){throw new r("positions is required.")}var s=new Array(e.length);for(var u=0;u<e.length;u++){s[u]=n.toRadians(e[u])}return a.fromRadiansArray(s,i,o)};a.fromRadiansArray=function(e,i,n){if(!t(e)){throw new r("positions is required.")}if(e.length<2){throw new r("positions length cannot be less than 2.")}if(e.length%2!==0){throw new r("positions length must be a multiple of 2.")}var o=e.length;if(!t(n)){n=new Array(o/2)}else{n.length=o/2}for(var s=0;s<o;s+=2){var u=e[s];var c=e[s+1];n[s/2]=a.fromRadians(u,c,0,i,n[s/2])}return n};a.fromDegreesArrayHeights=function(e,i,o){if(!t(e)){throw new r("positions is required.")}if(e.length<3){throw new r("positions length cannot be less than 3.")}if(e.length%3!==0){throw new r("positions length must be a multiple of 3.")}var s=new Array(e.length);for(var u=0;u<e.length;u+=3){s[u]=n.toRadians(e[u]);s[u+1]=n.toRadians(e[u+1]);s[u+2]=e[u+2]}return a.fromRadiansArrayHeights(s,i,o)};a.fromRadiansArrayHeights=function(e,i,n){if(!t(e)){throw new r("positions is required.")}if(e.length<3){throw new r("positions length cannot be less than 3.")}if(e.length%3!==0){throw new r("positions length must be a multiple of 3.")}var o=e.length;if(!t(n)){n=new Array(o/3)}else{n.length=o/3}for(var s=0;s<o;s+=3){var u=e[s];var c=e[s+1];var f=e[s+2];n[s/3]=a.fromRadians(u,c,f,i,n[s/3])}return n};a.ZERO=i(new a(0,0,0));a.UNIT_X=i(new a(1,0,0));a.UNIT_Y=i(new a(0,1,0));a.UNIT_Z=i(new a(0,0,1));a.prototype.clone=function(e){return a.clone(this,e)};a.prototype.equals=function(e){return a.equals(this,e)};a.prototype.equalsEpsilon=function(e,t,r){return a.equalsEpsilon(this,e,t,r)};a.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};return a})})();(function(){var t=e.amdDefine;t("1c",["1a"],function(e){"use strict";function t(e){this.name="DeveloperError";this.message=e;var t;try{throw new Error}catch(e){t=e.stack}this.stack=t}if(e(Object.create)){t.prototype=Object.create(Error.prototype);t.prototype.constructor=t}t.prototype.toString=function(){var t=this.name+": "+this.message;if(e(this.stack)){t+="\n"+this.stack.toString()}return t};t.throwInstantiationError=function(){throw new t("This function defines an interface and should not be called directly.")};return t})})();(function(){var t=e.amdDefine;t("1a",[],function(){"use strict";function e(e){return e!==undefined&&e!==null}return e})})();(function(){var t=e.amdDefine;t("26",["1a"],function(e){"use strict";var t=Object.freeze;if(!e(t)){t=function(e){return e}}return t})})();(function(){var t=e.amdDefine;t("4b",["32","1a","1c","26"],function(e,t,r,i){"use strict";function n(i,n){if(!t(i)){throw new r("normal is required.")}if(!t(n)){throw new r("distance is required.")}this.normal=e.clone(i);this.distance=n}n.fromPointNormal=function(i,a,o){if(!t(i)){throw new r("point is required.")}if(!t(a)){throw new r("normal is required.")}var s=-e.dot(a,i);if(!t(o)){return new n(a,s)}e.clone(a,o.normal);o.distance=s;return o};var a=new e;n.fromCartesian4=function(i,o){if(!t(i)){throw new r("coefficients is required.")}var s=e.fromCartesian4(i,a);var u=i.w;if(!t(o)){return new n(s,u)}else{e.clone(s,o.normal);o.distance=u;return o}};n.getPointDistance=function(i,n){if(!t(i)){throw new r("plane is required.")}if(!t(n)){throw new r("point is required.")}return e.dot(i.normal,n)+i.distance};n.ORIGIN_XY_PLANE=i(new n(e.UNIT_Z,0));n.ORIGIN_YZ_PLANE=i(new n(e.UNIT_X,0));n.ORIGIN_ZX_PLANE=i(new n(e.UNIT_Y,0));return n})})();(function(){var t=e.amdDefine;t("74",["32","42","2b","1a","1c","43","6c","71","72","22","39","4b"],function(e,t,r,i,n,a,o,s,u,c,f,l){"use strict";var d={};d.numberOfPoints=function(t,r,i){var n=e.distance(t,r);return Math.ceil(n/i)};var h=new t;d.extractHeights=function(e,t){var r=e.length;var i=new Array(r);for(var n=0;n<r;n++){var a=e[n];i[n]=t.cartesianToCartographic(a,h).height}return i};var v=new f;var M=new e;var p=new e;var g=new l(e.ZERO,0);var w=new e;var y=new l(e.ZERO,0);var A=new e;var m=new e;var D=[];function N(e,t,r){var i=D;i.length=e;var n;if(t===r){for(n=0;n<e;n++){i[n]=t}return i}var a=r-t;var o=a/e;for(n=0;n<e;n++){var s=t+n*o;i[n]=s}return i}var E=new t;var I=new t;var T=new e;var L=new e;var j=new e;var x=new o;function S(t,r,i,n,a,o,s,u){var c=n.scaleToGeodeticSurface(t,L);var f=n.scaleToGeodeticSurface(r,j);var l=d.numberOfPoints(t,r,i);var h=n.cartesianToCartographic(c,E);var v=n.cartesianToCartographic(f,I);var M=N(l,a,o);x.setEndPoints(h,v);var p=x.surfaceDistance/l;var g=u;h.height=a;var w=n.cartographicToCartesian(h,T);e.pack(w,s,g);g+=3;for(var y=1;y<l;y++){var A=x.interpolateUsingSurfaceDistance(y*p,I);A.height=M[y];w=n.cartographicToCartesian(A,T);e.pack(w,s,g);g+=3}return g}d.wrapLongitude=function(t,n){var a=[];var o=[];if(i(t)&&t.length>0){n=r(n,f.IDENTITY);var u=f.inverseTransformation(n,v);var c=f.multiplyByPoint(u,e.ZERO,M);var d=f.multiplyByPointAsVector(u,e.UNIT_Y,p);var h=l.fromPointNormal(c,d,g);var D=f.multiplyByPointAsVector(u,e.UNIT_X,w);var N=l.fromPointNormal(c,D,y);var E=1;a.push(e.clone(t[0]));var I=a[0];var T=t.length;for(var L=1;L<T;++L){var j=t[L];if(l.getPointDistance(N,I)<0||l.getPointDistance(N,j)<0){var x=s.lineSegmentPlane(I,j,h,A);if(i(x)){var S=e.multiplyByScalar(d,5e-9,m);if(l.getPointDistance(h,I)<0){e.negate(S,S)}a.push(e.add(x,S,new e));o.push(E+1);e.negate(S,S);a.push(e.add(x,S,new e));E=1}}a.push(e.clone(t[L]));E++;I=j}o.push(E)}return{positions:a,lengths:o}};d.generateArc=function(t){if(!i(t)){t={}}var o=t.positions;if(!i(o)){throw new n("options.positions is required.")}var s=o.length;var f=r(t.ellipsoid,a.WGS84);var l=r(t.height,0);if(s<1){return[]}else if(s===1){var h=f.scaleToGeodeticSurface(o[0],L);if(l!==0){var v=f.geodeticSurfaceNormal(h,T);e.multiplyByScalar(v,l,v);e.add(h,v,h)}return[h.x,h.y,h.z]}var M=t.minDistance;if(!i(M)){var p=r(t.granularity,c.RADIANS_PER_DEGREE);M=c.chordLength(p,f.maximumRadius)}var g=0;var w;for(w=0;w<s-1;w++){g+=d.numberOfPoints(o[w],o[w+1],M)}var y=(g+1)*3;var A=new Array(y);var m=0;var N=u(l);for(w=0;w<s-1;w++){var I=o[w];var j=o[w+1];var x=N?l[w]:l;var O=N?l[w+1]:l;m=S(I,j,M,f,x,O,A,m)}D.length=0;var C=o[s-1];var z=f.cartesianToCartographic(C,E);z.height=N?l[s-1]:l;var _=f.cartographicToCartesian(z,T);e.pack(_,A,y-3);return A};d.generateCartesianArc=function(t){var r=d.generateArc(t);var i=r.length/3;var n=new Array(i);for(var a=0;a<i;a++){n[a]=e.unpack(r,a*3)}return n};return d})})();e.register("75",["f"],function(e,t){"use strict";var r=t&&t.id;var i;var n;function a(e,t){var r=e._times;var n=~i.binarySearch(r,t,i.JulianDate.compare);if(n>0){r.splice(0,n);e._values.splice(0,n*e._innerType.packedLength);e._updateTableLength=true;e._definitionChanged.raiseEvent(e)}}function o(e,t){if(t===undefined)return;var r=e._times.length-t;if(r>0){e._times.splice(0,r);e._values.splice(0,r*e._innerType.packedLength);e._updateTableLength=true}}return{setters:[function(e){i=e}],execute:function(){n=function(e,t){return function(){var r=e.apply(this,arguments);t.call(this,r);return r}};i.SampledProperty.prototype.removeSamplesBeforeDate=function(e){a(this,e)};i.SampledPositionProperty.prototype.removeSamplesBeforeDate=function(e){a(this._property,e)};i.SampledProperty.prototype.addSample=n(i.SampledProperty.prototype.addSample,function(){o(this,this.maxNumSamples)});i.SampledProperty.prototype.addSamples=n(i.SampledProperty.prototype.addSamples,function(){o(this,this.maxNumSamples)});i.SampledProperty.prototype.addSamplesPackedArray=n(i.SampledProperty.prototype.addSamplesPackedArray,function(){o(this,this.maxNumSamples)});i.SampledPositionProperty.prototype.addSample=n(i.SampledPositionProperty.prototype.addSample,function(){o(this._property,this.maxNumSamples)});i.SampledPositionProperty.prototype.addSamples=n(i.SampledPositionProperty.prototype.addSamples,function(){o(this._property,this.maxNumSamples)});i.SampledPositionProperty.prototype.addSamplesPackedArray=n(i.SampledPositionProperty.prototype.addSamplesPackedArray,function(){o(this._property,this.maxNumSamples)})}}});e.register("f",["52","19","1e","25","1f","32","4a","42","29","2a","2d","31","35","2e","2b","1a","1c","43","2f","30","1d","50","41","44","2c","22","38","39","45","46","47","34","3c","3a","4c","33","4d","4e","4f","23","24","3b","6a","74","75"],function(e,t){"use strict";var r=t&&t.id;return{setters:[function(t){e({binarySearch:t["default"]})},function(t){e({CallbackProperty:t["default"]})},function(t){e({CameraEventAggregator:t["default"]})},function(t){e({CameraEventType:t["default"]})},function(t){e({Cartesian2:t["default"]})},function(t){e({Cartesian3:t["default"]})},function(t){e({Cartesian4:t["default"]})},function(t){e({Cartographic:t["default"]})},function(t){e({Clock:t["default"]})},function(t){e({ClockStep:t["default"]})},function(t){e({CompositeEntityCollection:t["default"]})},function(t){e({ConstantPositionProperty:t["default"]})},function(t){e({ConstantProperty:t["default"]})},function(t){e({createGuid:t["default"]})},function(t){e({defaultValue:t["default"]})},function(t){e({defined:t["default"]})},function(t){e({DeveloperError:t["default"]})},function(t){e({Ellipsoid:t["default"]})},function(t){e({Entity:t["default"]})},function(t){e({EntityCollection:t["default"]})},function(t){e({Event:t["default"]})},function(t){e({ExtrapolationType:t["default"]})},function(t){e({GeographicProjection:t["default"]})},function(t){e({HermitePolynomialApproximation:t["default"]})},function(t){e({JulianDate:t["default"]})},function(t){e({CesiumMath:t["default"]})},function(t){e({Matrix3:t["default"]})},function(t){e({Matrix4:t["default"]})},function(t){e({OrientationProperty:t["default"]})},function(t){e({PerspectiveFrustum:t["default"]})},function(t){e({PerspectiveOffCenterFrustum:t["default"]})},function(t){e({PositionProperty:t["default"]})},function(t){e({Property:t["default"]})},function(t){e({Quaternion:t["default"]})},function(t){e({ReferenceEntity:t["default"]})},function(t){e({ReferenceFrame:t["default"]})},function(t){e({ReferenceProperty:t["default"]})},function(t){e({SampledPositionProperty:t["default"]})},function(t){e({SampledProperty:t["default"]})},function(t){e({ScreenSpaceEventHandler:t["default"]})},function(t){e({ScreenSpaceEventType:t["default"]})},function(t){e({Transforms:t["default"]})},function(t){e({Simon1994PlanetaryPositions:t["default"]})},function(t){e({PolylinePipeline:t["default"]})},function(e){}],execute:function(){}}});e.register("c",["1d","f"],function(e,t){"use strict";var r=t&&t.id;var i,n;var a,o,s,u,c,f,l,d,h,v,M,p,g,w,y;function A(e){var t=[];var r=e;do{var i=r.position;r=i&&i.referenceFrame;if(n.defined(r))t.unshift(r)}while(n.defined(r));return t}e("getAncestorReferenceFrames",A);function m(e,t,r,i){return e.position&&e.position.getValueInReferenceFrame(t,r,i)}e("getEntityPositionInReferenceFrame",m);function D(e,t,r,i){var a=e.position&&e.position.referenceFrame;if(!n.defined(a))return undefined;var o=e.orientation&&e.orientation.getValue(t,i);if(!n.defined(o))return undefined;return n.OrientationProperty.convertToReferenceFrame(t,o,a,r,i)}e("getEntityOrientationInReferenceFrame",D);function N(e,t,r){var i=undefined;if(!n.defined(r)){i=A(e);r=i[0]}if(!n.defined(r))return;var a=m(e,t,r,{});if(!a&&!i)return undefined;var o=D(e,t,r,{});if(!o&&!i)return undefined;if(a&&o){return{p:a,o:o,r:typeof r==="number"?r:r.id}}else if(i){for(var s=1;s<i.length;s++){r=i[s];if(!n.defined(r))return undefined;var u=N(e,t,r);if(u)return u}}return undefined}e("getSerializedEntityPose",N);function E(e){if(!c)throw new Error("resolveURL requires DOM api");if(e===undefined)throw new Error("Expected inURL");c.href="";c.href=e;return c.href}e("resolveURL",E);function I(e){if(!c)throw new Error("parseURL requires DOM api");if(e===undefined)throw new Error("Expected inURL");c.href="";c.href=e;return{href:c.href,protocol:c.protocol,hostname:c.hostname,port:c.port,pathname:c.pathname,search:c.search,hash:c.hash,host:c.host}}e("parseURL",I);function T(e,t){var r=e[n.Matrix4.COLUMN0ROW0];var i=e[n.Matrix4.COLUMN1ROW1];var a=e[n.Matrix4.COLUMN2ROW0];var o=e[n.Matrix4.COLUMN2ROW1];var s=e[n.Matrix4.COLUMN2ROW2];var u=e[n.Matrix4.COLUMN3ROW2];var c=t.near=u/(s-1);t.far=u/(s+1);t.bottom=c*(o-1)/i;t.top=c*(o+1)/i;t.left=c*(a-1)/r;t.right=c*(a+1)/r;return t}e("decomposePerspectiveOffCenterProjectionMatrix",T);function L(e,t){var r=T(e,h);var i=(r.left+r.right)/2;var n=(r.top+r.bottom)/2;var a=r.near;var o=r.far;var s=r.right-i;var u=r.top-n;var c=s/u;var f=2*Math.atan(u/a);var l;if(c<1){l=f}else{l=Math.atan(Math.tan(f*.5)*c)*2}t.near=a;t.far=o;t.fov=l;t.aspectRatio=c;t.xOffset=i;t.yOffset=n;return t}e("decomposePerspectiveProjectionMatrix",L);function j(e,t,r){if(!e.position||!(e.position instanceof n.ConstantPositionProperty)||!e.orientation||!(e.orientation instanceof n.ConstantProperty)){return false}if(!m(e,t,r,v)){return false}if(!D(e,t,r,M)){return false}e.position.setValue(v,r);e.orientation.setValue(M);return true}e("convertEntityReferenceFrame",j);function x(){if(p){var e=window.location.protocol;window.location.protocol=e==="https:"?"argon4s":"argon4"}}e("openInArgonApp",x);function S(e){var t=function(e){return e.stopPropagation()};g.forEach(function(r){e.addEventListener(r,t,false)})}e("blockAllUIEventBubbling",S);return{setters:[function(e){i=e},function(e){n=e}],execute:function(){a=function(){function e(){this._event=new i.default}Object.defineProperty(e.prototype,"numberOfListeners",{get:function(){return this._event.numberOfListeners},enumerable:true,configurable:true});e.prototype.addEventListener=function(e){return this._event.addEventListener(e)};e.prototype.removeEventListener=function(e){return this._event.removeEventListener(e)};e.prototype.raiseEvent=function(e){this._event.raiseEvent(e)};return e}();e("Event",a);o=function(){function e(){var e=this;this._queue=[];this._paused=true;this.errorEvent=new a;this.errorEvent.addEventListener(function(t){if(e.errorEvent.numberOfListeners===1)console.error(t)})}e.prototype.push=function(e,t){var r=this;var i=new Promise(function(t,i){r._queue.push({command:e,reject:i,execute:function(){var r=Promise.resolve().then(e);t(r);return r}})});if(t)this.execute();return i};e.prototype.execute=function(){var e=this;this._paused=false;Promise.resolve().then(function(){if(e._queue.length>0&&!e._currentCommandPending){e._executeNextCommand()}})};e.prototype.pause=function(){this._paused=true};e.prototype.clear=function(){this._queue.forEach(function(e){e.reject("Unable to execute.")});this._queue=[]};e.prototype._executeNextCommand=function(){var e=this;this._currentCommand=undefined;this._currentCommandPending=undefined;if(this._paused)return;var t=this._queue.shift();if(!t)return;this._currentCommand=t.command;this._currentCommandPending=t.execute().then(this._executeNextCommand.bind(this)).catch(function(t){e.errorEvent.raiseEvent(t);e._executeNextCommand()})};return e}();e("CommandQueue",o);e("getEntityPosition",s=m);e("getEntityOrientation",u=D);c=typeof document!=="undefined"?document.createElement("a"):undefined;f=function(){function e(){var e=this;var t=true;var r;var i;var n;r=new Promise(function(r){e.port1={set onmessage(e){n=e;r()},get onmessage(){return n},postMessage:function(r){if(t){i.then(function(){if(e.port2.onmessage)e.port2.onmessage({data:r})})}},close:function(){t=false}}});var a;i=new Promise(function(i){e.port2={set onmessage(e){a=e;i()},get onmessage(){return a},postMessage:function(i){if(t){r.then(function(){if(e.port1.onmessage)e.port1.onmessage({data:i})})}},close:function(){t=false}}})}return e}();e("MessageChannelLike",f);l=function(){function e(){var e=this;var t=[];var r=function(e){t.push(e)};e.port1={get onmessage(){return r},set onmessage(e){r=e;t.forEach(function(t){return e(t)});t=[]},postMessage:function(t){if(e.port2.onmessage)e.port2.onmessage({data:t})},close:function(){e.port1.onmessage=undefined;e.port2.onmessage=undefined}};var i=[];var n=function(e){i.push(e)};e.port2={get onmessage(){return n},set onmessage(e){n=e;i.forEach(function(t){return e(t)});i=[]},postMessage:function(t){if(e.port1.onmessage)e.port1.onmessage({data:t})},close:function(){e.port1.onmessage=undefined;e.port2.onmessage=undefined}}}return e}();e("SynchronousMessageChannel",l);d=function(){function e(){}e.prototype.create=function(){if(typeof MessageChannel!=="undefined")return new MessageChannel;else return new f};e.prototype.createSynchronous=function(){return new l};return e}();e("MessageChannelFactory",d);h=new n.PerspectiveOffCenterFrustum;v=new n.Cartesian3;M=new n.Quaternion;e("isIOS",p=typeof navigator!=="undefined"&&typeof window!=="undefined"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window["MSStream"]);g=Object.keys(typeof window!==undefined?window:{}).filter(function(e){return e.substring(0,2)=="on"&&(document[e]==null||typeof document[e]=="function")}).map(function(e){return e.substring(2)});w=0;e("requestAnimationFrame",y=window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){var t=performance.now();var r=Math.max(0,16-(t-w));var i=setTimeout(function(){e(t+r)},r);w=t+r;return i})}}});e.register("1",["2","3","d","f","8","b","10","13","11","15","12","9","a","14","e","16","18","c"],function(e,t){"use strict";var r=t&&t.id;var i=this&&this.__extends||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r];function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)};var n,a,o,s,u,c,f,l,d,h,v,M,p,g,w;var y,A;function m(e){var t=e===void 0?{}:e,r=t.configuration,i=t.container,a=i===void 0?new n.Container:i;var o;if(typeof HTMLElement==="undefined"){o=u.Role.REALITY_MANAGER}else if(navigator.userAgent.indexOf("Argon")>0||window.top!==window){o=u.Role.APPLICATION}else{o=u.Role.REALITY_MANAGER}var s=Object.assign(r||{},{role:o});a.registerInstance("containerElement",null);return new y(s,a)}e("init",m);function D(e){if(e===void 0){e={}}return N(e)}e("initReality",D);function N(e){var t=e===void 0?{}:e,r=t.configuration,i=t.container,a=i===void 0?new n.Container:i;var o=Object.assign(r||{},{role:u.Role.REALITY_VIEW,"reality.supportsControlPort":true});a.registerInstance("containerElement",null);return new y(o,a)}e("initRealityViewer",N);function E(e){var t=e.containerElement,r=e.configuration,i=e.container,a=i===void 0?new n.Container:i;var o=Object.assign(r||{},{
role:u.Role.REALITY_MANAGER});a.registerInstance("containerElement",t);return new y(o,a)}e("initLocal",E);var I={ArgonSystem:true,RealityView:true,init:true,initReality:true,initRealityViewer:true,initLocal:true,DI:true,Cesium:true,URI:true,EmptyRealityLoader:true,LiveVideoRealityLoader:true,HostedRealityLoader:true};function T(t){var r={};for(var i in t){if(i!=="default"&&!I.hasOwnProperty(i))r[i]=t[i]}e(r)}return{setters:[function(e){},function(e){},function(e){n=e},function(e){a=e},function(e){o=e},function(e){s=e;T(e)},function(e){u=e;T(e)},function(e){c=e;T(e)},function(e){f=e;T(e)},function(e){l=e;T(e)},function(e){d=e;T(e)},function(e){h=e;T(e)},function(e){v=e;T(e)},function(e){M=e;T(e)},function(e){p=e},function(e){g=e},function(e){w=e},function(e){T(e)}],execute:function(){(window||global)["WebVRConfig"]={DEFER_INITIALIZATION:typeof navigator=="undefined",MOUSE_KEYBOARD_CONTROLS_DISABLED:true};e("DI",n);e("Cesium",a);e("URI",o);e("EmptyRealityLoader",p.EmptyRealityLoader);e("LiveVideoRealityLoader",g.LiveVideoRealityLoader);e("HostedRealityLoader",w.HostedRealityLoader);y=function(){function e(t,r){var i=this;if(r===void 0){r=new n.Container}this.container=r;if(!e.instance)e.instance=this;r.registerInstance("config",t);r.registerInstance(e,this);if(!r.hasResolver("containerElement"))r.registerInstance("containerElement",null);if(u.Role.isRealityManager(t.role)){r.registerSingleton(s.ConnectService,s.LoopbackConnectService);this.reality.registerLoader(r.get(p.EmptyRealityLoader));this.reality.registerLoader(r.get(g.LiveVideoRealityLoader));if(typeof document!=="undefined"){this.reality.registerLoader(r.get(w.HostedRealityLoader));r.get(h.DefaultUIService)}if(g.LiveVideoRealityLoader.isAvailable()){this.reality.setDefault(A.LIVE_VIDEO)}else{this.reality.setDefault(A.EMPTY)}}else if(s.WKWebViewConnectService.isAvailable()){r.registerSingleton(s.ConnectService,s.WKWebViewConnectService)}else if(s.DOMConnectService.isAvailable()){r.registerSingleton(s.ConnectService,s.DOMConnectService)}else if(s.DebugConnectService.isAvailable()){r.registerSingleton(s.ConnectService,s.DebugConnectService)}for(var a=0,o=Object.keys(e.prototype);a<o.length;a++){var c=o[a];this[c]}if(!u.Role.isRealityAugmenter(t.role)){var f=0;this.reality.viewStateEvent.addEventListener(function(e){i.context._update({index:f++,reality:i.reality.getCurrent(),view:e})})}this.session.connect()}Object.defineProperty(e.prototype,"context",{get:function(){return this.container.get(c.ContextService)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"device",{get:function(){return this.container.get(f.DeviceService)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"focus",{get:function(){return this.container.get(l.FocusService)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"reality",{get:function(){return this.container.get(d.RealityService)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"session",{get:function(){return this.container.get(s.SessionService)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"view",{get:function(){return this.container.get(v.ViewService)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"vuforia",{get:function(){return this.container.get(M.VuforiaService)},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"updateEvent",{get:function(){return this.context.updateEvent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"renderEvent",{get:function(){return this.context.renderEvent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"focusEvent",{get:function(){return this.focus.focusEvent},enumerable:true,configurable:true});Object.defineProperty(e.prototype,"blurEvent",{get:function(){return this.focus.blurEvent},enumerable:true,configurable:true});return e}();e("ArgonSystem",y);A=function(e){i(t,e);function t(){e.call(this);console.warn("RealityView class has been renamed to RealityViewer")}return t}(u.RealityViewer);e("RealityView",A)}}})})(function(e){if(typeof define=="function"&&define.amd)define([],e);else if(typeof module=="object"&&module.exports&&typeof require=="function")module.exports=e();else Argon=e()});